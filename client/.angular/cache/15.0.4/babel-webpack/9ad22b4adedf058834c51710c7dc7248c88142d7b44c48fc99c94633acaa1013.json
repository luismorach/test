{"ast":null,"code":"import { FormControl } from '@angular/forms';\nimport { DinamicInput } from 'src/app/utils/DinamicInput';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/comunicator/comunicator-componets.service\";\nimport * as i3 from \"../../ventas/service/ventas.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../../devoluciones/service/devoluciones.service\";\nconst _c0 = [\"quantity\"];\nconst _c1 = [\"popup\"];\nfunction DetallesVentaComponent_tr_100_td_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r10 = i0.ɵɵnextContext().index;\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r11.products[i_r10].barcode);\n  }\n}\nfunction DetallesVentaComponent_tr_100_td_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r10 = i0.ɵɵnextContext().index;\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate3(\" \", ctx_r12.products[i_r10].name, \"\\u00A0\", ctx_r12.products[i_r10].mark, \"\\u00A0\", ctx_r12.products[i_r10].model, \"\\u00A0\");\n  }\n}\nfunction DetallesVentaComponent_tr_100_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, DetallesVentaComponent_tr_100_td_3_Template, 2, 1, \"td\", 33);\n    i0.ɵɵtemplate(4, DetallesVentaComponent_tr_100_td_4_Template, 2, 3, \"td\", 33);\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"percent\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"percent\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵtext(20);\n    i0.ɵɵpipe(21, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"td\", 34);\n    i0.ɵɵlistener(\"click\", function DetallesVentaComponent_tr_100_Template_td_click_22_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r16);\n      const i_r10 = restoredCtx.index;\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.showModal(ctx_r15.products[i_r10], i_r10));\n    });\n    i0.ɵɵelement(23, \"i\", 35);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const sell_product_r9 = ctx.$implicit;\n    const i_r10 = ctx.index;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r10 + 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.products[i_r10] != undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.products[i_r10] != undefined);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", sell_product_r9.quantity_products, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(9, 9, sell_product_r9.sell_price, ctx_r1.sell.coin + \" \"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(12, 12, sell_product_r9.discount_product, \"2.2-2\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(15, 15, sell_product_r9.discount_product * sell_product_r9.sell_price, ctx_r1.sell.coin + \" \"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(18, 18, sell_product_r9.impuest, \"2.2-2\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(21, 21, ctx_r1.calcularSubtotal(i_r10), ctx_r1.sell.coin + \" \"));\n  }\n}\nfunction DetallesVentaComponent_tr_158_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const pay_r17 = ctx.$implicit;\n    const i_r18 = ctx.index;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r18 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 8, pay_r17.date, \"dd/MM/yyyy\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(pay_r17.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(10, 11, pay_r17.mount, pay_r17.coin + \" \"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(pay_r17.reference);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r3.user_pay[i_r18].names_user, \" \", ctx_r3.user_pay[i_r18].last_names_user, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.registers_pay[i_r18].name);\n  }\n}\nfunction DetallesVentaComponent_tr_189_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const repayment_r19 = ctx.$implicit;\n    const i_r20 = ctx.index;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r20 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 6, repayment_r19.date, \"dd/MM/yyyy\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r5.product(repayment_r19));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(repayment_r19.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(12, 9, repayment_r19.price, repayment_r19.coin + \" \"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(15, 12, repayment_r19.total, repayment_r19.coin + \" \"));\n  }\n}\nfunction DetallesVentaComponent_button_219_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function DetallesVentaComponent_button_219_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.cancel(ctx_r21.popUp));\n    });\n    i0.ɵɵtext(1, \" \\u00A0\\u00A0CANCELAR\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c2 = function (a0, a1) {\n  return {\n    \"input-on-focus-success\": a0,\n    \"input-on-focus-fail\": a1\n  };\n};\nconst _c3 = function (a0, a1) {\n  return {\n    \"label-on-focus-down\": a0,\n    \"label-on-focus-up\": a1\n  };\n};\nconst _c4 = function (a0) {\n  return {\n    \"enable aceptar\": a0\n  };\n};\nexport class DetallesVentaComponent extends DinamicInput {\n  constructor(routes, comunicatorSvc, renderer, route, ventasSvc, fb, location, devolucionesSvc) {\n    super();\n    this.routes = routes;\n    this.comunicatorSvc = comunicatorSvc;\n    this.renderer = renderer;\n    this.route = route;\n    this.ventasSvc = ventasSvc;\n    this.fb = fb;\n    this.location = location;\n    this.devolucionesSvc = devolucionesSvc;\n    this.title = [];\n    this.user_pay = [];\n    this.registers_pay = [];\n    this.sell_products = [];\n    this.repayments = [];\n    this.products = [];\n    this.pays = [];\n  }\n  ngOnInit() {\n    setTimeout(() => {\n      /* Obtengo la ruta actual y la transformo para obtener el titulo del componente*/\n      this.ruta = this.routes.url.slice(this.routes.url.slice(1).indexOf('/') + 2, this.routes.url.lastIndexOf('?'));\n      this.title.push(\"fas fa-coins fa-fw\"); //aañado el icono del titulo al array\n      this.title.push(decodeURI(this.ruta).toUpperCase()); //añado el titulo al array\n      this.comunicatorSvc.setTitleComponent(this.title);\n    });\n    this.route.queryParams.subscribe(params => {\n      this.ventasSvc.getSell(params['id_sell']).subscribe(res => {\n        let aux = res;\n        this.sell = aux[0];\n        this.user_sell = aux[0];\n        this.client = aux[0];\n        this.register_sell = aux[0];\n      });\n      this.ventasSvc.getProductsSell(params['id_sell']).subscribe(res => {\n        if (res instanceof Array) {\n          let aux = res;\n          this.products = aux;\n          this.sell_products = aux;\n        }\n      });\n      this.ventasSvc.getPaysSell(params['id_sell']).subscribe(res => {\n        if (res instanceof Array) {\n          let aux = res;\n          this.user_pay = aux;\n          this.registers_pay = aux;\n          this.pays = aux;\n        }\n      });\n      this.devolucionesSvc.getRepaymentsSell(params['id_sell']).subscribe(res => {\n        console.log(res);\n        if (res instanceof Array) {\n          this.repayments = res;\n        }\n      });\n    });\n    this.formDevolucion = this.fb.group({\n      quantity_back: new FormControl('')\n    });\n  }\n  showModal(product, index) {\n    console.log(this.products);\n    this.indexElementToBack = index;\n    this.renderer.setProperty(this.quantityBack?.nativeElement.children[0].children[0], 'textContent', 'Realizar Devolución (' + product.name + ' ' + product.mark + ' ' + product.model + ')');\n    this.quantityBack?.nativeElement.showModal();\n  }\n  calcularPromedio(price) {\n    return (this.products[this.indexElementToBack].sell_price * this.products[this.indexElementToBack].exist_quantity - this.sell_products[this.indexElementToBack].sell_price * Number(this.formDevolucion.get('quantity_back')?.value)) / (this.products[this.indexElementToBack].exist_quantity - Number(this.formDevolucion.get('quantity_back')?.value));\n  }\n  registrarDevolucion() {\n    let garanty = new Date(this.products[this.indexElementToBack].time_garanty);\n    let today = new Date();\n    let content = '';\n    if (Number(this.formDevolucion.get('quantity_back')?.value) > this.sell_products[this.indexElementToBack].quantity_products - this.sell_products[this.indexElementToBack].quantity_back) {\n      content = 'La cantidad a devolver es mayor a la registrada en la venta';\n    } else if (this.products[this.indexElementToBack].time_garanty === null) {\n      content = 'No se puede realizar devolución de este producto, el mismo no posee garantia';\n    } else if (garanty < today) {\n      content = 'La garantia del producto ha caducado';\n    } else {\n      let repayment = {\n        type: 'venta',\n        date: new Date(),\n        id_sell: this.sell.id_sell,\n        quantity: Number(this.formDevolucion.get('quantity_back')?.value),\n        price: this.sell_products[this.indexElementToBack].sell_price,\n        total: Number(this.formDevolucion.get('quantity_back')?.value) * this.sell_products[this.indexElementToBack].sell_price,\n        coin: this.sell.coin,\n        exist_quantity: this.products[this.indexElementToBack].exist_quantity - Number(this.formDevolucion.get('quantity_back')?.value),\n        weighted_averages: Number(((this.products[this.indexElementToBack].sell_price * this.products[this.indexElementToBack].exist_quantity + this.comunicatorSvc.converterToMainCoin(this.sell_products[this.indexElementToBack].sell_price, this.sell.exchange) * Number(this.formDevolucion.get('quantity_back')?.value)) / (this.products[this.indexElementToBack].exist_quantity + Number(this.formDevolucion.get('quantity_back')?.value))).toFixed(2)),\n        id_user: this.sell.id_user,\n        id_product: this.sell_products[this.indexElementToBack].id_product\n      };\n      repayment.weighted_averages = isNaN(repayment.weighted_averages) ? 0 : repayment.weighted_averages;\n      repayment.weighted_averages = this.comunicatorSvc.converterToSecondaryCoin(repayment.weighted_averages, this.sell.exchange);\n      this.devolucionesSvc.setRepaymentSell(repayment).subscribe(res => {\n        if (res.title.includes('Registrada')) {\n          this.repayments.push(repayment);\n        }\n        /*this.sell_products[this.indexElementToBack].quantity_back += Number(this.formDevolucion.get('quantity_back')?.value)\n        this.sell.total_sell -= (Number(this.formDevolucion.get('quantity_back')?.value) *\n          this.sell_products[this.indexElementToBack].sell_price)\n        this.products[this.indexElementToBack].sell_price = this.comunicatorSvc.converterToMainCoin(\n          repayment.weighted_averages, this.sell.exchange)\n               this.products[this.indexElementToBack].buy_price =\n          Number((((this.products[this.indexElementToBack].sell_price *\n            this.products[this.indexElementToBack].exist_quantity) -\n            (this.comunicatorSvc.converterToMainCoin(this.sell_products[this.indexElementToBack].sell_price, this.sell.exchange) *\n              Number(this.formDevolucion.get('quantity_back')?.value))) /\n            (this.products[this.indexElementToBack].exist_quantity -\n              Number(this.formDevolucion.get('quantity_back')?.value))).toFixed(2))\n        this.products[this.indexElementToBack].exist_quantity = repayment.exist_quantity\n        console.log(this.products[this.indexElementToBack].sell_price)\n        this.products[this.indexElementToBack].sell_price = (\n          this.products[this.indexElementToBack].exist_quantity === 0) ? 0 : this.products[this.indexElementToBack].sell_price\n        this.ventasSvc.updateSell(this.sell_products[this.indexElementToBack].id_sell, this.sell).subscribe(\n          res => console.log(res)\n        )\n        this.ventasSvc.updateProductsSell(this.sell_products[this.indexElementToBack].id_sell,\n          this.sell_products[this.indexElementToBack].id_product, this.sell_products[this.indexElementToBack]).subscribe(\n            res => console.log(res)\n          )\n        this.productosSvc.updateProducto(this.products[this.indexElementToBack].id_product,\n          this.products[this.indexElementToBack]).subscribe(res => console.log(res))\n        } */\n        console.log(res);\n        this.changeModal(res);\n        this.popUp?.nativeElement.showModal();\n      });\n    }\n    if (content !== '') {\n      let values = {\n        icon: 'fa-regular fa-circle-xmark',\n        title: 'Ocurrió un error inesperado',\n        content: content\n      };\n      this.changeModal(values);\n      this.popUp?.nativeElement.showModal();\n    }\n  }\n  calcularSubtotal(index) {\n    let price = this.products[index].sell_price;\n    let discount = this.products[index].discount;\n    let quantity = this.sell_products[index].quantity_products;\n    return Number((price * quantity - Number((price * discount).toFixed(2)) * quantity).toFixed(2));\n  }\n  calcularTotal() {\n    let total = 0;\n    this.products.forEach((product, index) => {\n      total += this.calcularSubtotal(index);\n    });\n    return total;\n  }\n  calcularDescuentoVenta() {\n    return Number((this.sell.discount * this.calcularTotal()).toFixed(2));\n  }\n  calcularImpuestoVenta() {\n    let montoImponible = 0;\n    this.products.forEach((product, index) => {\n      if (product.impuest > 0) {\n        montoImponible += Number((product.impuest * this.calcularSubtotal(index)).toFixed(2));\n      }\n    });\n    return montoImponible;\n  }\n  calcularCostosVenta() {\n    let total = 0;\n    this.products.forEach((product, index) => {\n      total += product.buy_price * this.sell_products[index].quantity_products;\n    });\n    return total;\n  }\n  total() {\n    return Number((this.calcularTotal() + this.calcularImpuestoVenta() - this.calcularDescuentoVenta()).toFixed(2));\n  }\n  redirectToVentasRealizadas() {\n    this.location.back();\n  }\n  product(repayment) {\n    let name_product = '';\n    this.products.forEach(product => {\n      if (product.id_product === repayment.id_product) {\n        name_product = product.name + ' ' + product.mark + ' ' + product.model;\n      }\n    });\n    return name_product;\n  }\n  acept() {\n    if (this.popUp?.nativeElement.children[1].textContent === 'Ocurrió un error inesperado') {\n      this.cancel(this.popUp);\n    } else {\n      this.cancel(this.popUp);\n      this.cancel(this.quantityBack);\n    }\n  }\n}\nDetallesVentaComponent.ɵfac = function DetallesVentaComponent_Factory(t) {\n  return new (t || DetallesVentaComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ComunicatorComponetsService), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i3.VentasService), i0.ɵɵdirectiveInject(i4.FormBuilder), i0.ɵɵdirectiveInject(i5.Location), i0.ɵɵdirectiveInject(i6.DevolucionesService));\n};\nDetallesVentaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DetallesVentaComponent,\n  selectors: [[\"app-detalles-venta\"]],\n  viewQuery: function DetallesVentaComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n      i0.ɵɵviewQuery(_c1, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.quantityBack = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.popUp = _t.first);\n    }\n  },\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 220,\n  vars: 66,\n  consts: [[1, \"form-container\"], [1, \"back\"], [1, \"form-button\", \"btn-save\", 3, \"click\"], [1, \"fas\", \"fa-reply\"], [1, \"form-title\"], [1, \"datos\"], [1, \"table-container\"], [1, \"table-title\"], [1, \"table-body\"], [1, \"table-responsive\"], [1, \"table\", \"table-bordered\"], [\"tab\", \"\"], [4, \"ngFor\", \"ngForOf\"], [1, \"totales\"], [1, \"line\"], [1, \"quantity\"], [\"quantity\", \"\"], [1, \"header\"], [1, \"title\"], [1, \"btn-cerrar-dialog\", 3, \"click\"], [1, \"form\", 3, \"formGroup\"], [1, \"form-control\", 3, \"ngClass\"], [1, \"form-label\", 3, \"ngClass\", \"ngStyle\"], [\"formControlName\", \"quantity_back\", 1, \"form-input\", 3, \"ngStyle\", \"focus\", \"focusout\", \"keypress\"], [1, \"form-actions\"], [1, \"form-button\", \"btn\", 3, \"ngClass\", \"click\"], [1, \"fas\", \"fa-truck-loading\", \"fa-fw\"], [1, \"form-button\", \"btn\", \"enable\", 2, \"color\", \"#f44336\", 3, \"click\"], [1, \"far\", \"fa-times-circle\"], [1, \"dialog\"], [\"popup\", \"\"], [1, \"fa-regular\", \"fa-circle-question\"], [\"class\", \"form-button btn-cancel\", 3, \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"icon\", 3, \"click\"], [1, \"fas\", \"fa-truck-loading\", \"fa-fw\", 2, \"color\", \"#009688\"], [1, \"form-button\", \"btn-cancel\", 3, \"click\"]],\n  template: function DetallesVentaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function DetallesVentaComponent_Template_button_click_2_listener() {\n        return ctx.redirectToVentasRealizadas();\n      });\n      i0.ɵɵelement(3, \"i\", 3);\n      i0.ɵɵtext(4, \" \\u00A0Regresar\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"h3\", 4);\n      i0.ɵɵtext(6, \" \\u00A0Datos de la venta \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\")(9, \"h3\");\n      i0.ɵɵtext(10, \"DATOS DE VENTA\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"p\")(12, \"strong\");\n      i0.ɵɵtext(13, \"N\\u00B0 factura: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"p\")(16, \"strong\");\n      i0.ɵɵtext(17, \"Fecha: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(18);\n      i0.ɵɵpipe(19, \"date\");\n      i0.ɵɵpipe(20, \"date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"p\")(22, \"strong\");\n      i0.ɵɵtext(23, \"Tipo de venta: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(24);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(25, \"div\")(26, \"h3\");\n      i0.ɵɵtext(27, \"CAJA Y USUARIO\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"p\")(29, \"strong\");\n      i0.ɵɵtext(30, \"Caja: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(31);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"p\")(33, \"strong\");\n      i0.ɵɵtext(34, \"Vendedor: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(35);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"p\")(37, \"strong\");\n      i0.ɵɵtext(38, \"Cliente: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(39);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(40, \"div\")(41, \"h3\");\n      i0.ɵɵtext(42, \"TOTALES Y ESTADO\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"p\")(44, \"strong\");\n      i0.ɵɵtext(45, \"Total: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(46);\n      i0.ɵɵpipe(47, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(48, \"p\")(49, \"strong\");\n      i0.ɵɵtext(50, \"Pagado: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(51);\n      i0.ɵɵpipe(52, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(53, \"p\")(54, \"strong\");\n      i0.ɵɵtext(55, \"Estado:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(56);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(57, \"p\")(58, \"strong\");\n      i0.ɵɵtext(59, \"Costos de venta:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(60);\n      i0.ɵɵpipe(61, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(62, \"p\")(63, \"strong\");\n      i0.ɵɵtext(64, \"Utilidad (ganancias): \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(65);\n      i0.ɵɵpipe(66, \"currency\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(67, \"h3\", 4);\n      i0.ɵɵtext(68, \" \\u00A0Detalles de venta \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(69, \"div\", 6)(70, \"div\", 7)(71, \"h6\");\n      i0.ɵɵtext(72, \"productos vendidos\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(73, \"div\", 8)(74, \"div\", 9)(75, \"table\", 10)(76, \"thead\")(77, \"tr\")(78, \"th\");\n      i0.ɵɵtext(79, \"N\\u00B0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(80, \"th\");\n      i0.ɵɵtext(81, \"C\\u00F3digo de barra\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(82, \"th\");\n      i0.ɵɵtext(83, \"Producto\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(84, \"th\");\n      i0.ɵɵtext(85, \"Cantidad\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(86, \"th\");\n      i0.ɵɵtext(87, \"Precio de venta\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(88, \"th\");\n      i0.ɵɵtext(89, \"Descuento\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(90, \"th\");\n      i0.ɵɵtext(91, \"Valor de descuento\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(92, \"th\");\n      i0.ɵɵtext(93, \"IVA\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(94, \"th\");\n      i0.ɵɵtext(95, \"Sub total\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(96, \"th\");\n      i0.ɵɵtext(97, \"Devoluci\\u00F3n\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(98, \"tbody\", null, 11);\n      i0.ɵɵtemplate(100, DetallesVentaComponent_tr_100_Template, 24, 24, \"tr\", 12);\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(101, \"div\", 13)(102, \"div\")(103, \"p\")(104, \"strong\");\n      i0.ɵɵtext(105, \"SUBTOTAL \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(106, \"p\");\n      i0.ɵɵtext(107);\n      i0.ɵɵpipe(108, \"currency\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(109, \"div\")(110, \"p\")(111, \"strong\");\n      i0.ɵɵtext(112, \"IVA \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(113, \"p\");\n      i0.ɵɵtext(114);\n      i0.ɵɵpipe(115, \"currency\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(116, \"div\")(117, \"p\")(118, \"strong\");\n      i0.ɵɵtext(119, \"DESCUENTO \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(120, \"p\");\n      i0.ɵɵtext(121);\n      i0.ɵɵpipe(122, \"currency\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(123, \"div\")(124, \"p\")(125, \"strong\");\n      i0.ɵɵtext(126, \"TOTAL \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(127, \"p\");\n      i0.ɵɵtext(128);\n      i0.ɵɵpipe(129, \"currency\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(130, \"div\", 14);\n      i0.ɵɵelementStart(131, \"h3\", 4);\n      i0.ɵɵtext(132, \" \\u00A0Detalles de pagos \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(133, \"div\", 6)(134, \"div\", 7)(135, \"h6\");\n      i0.ɵɵtext(136, \"Pagos realizados\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(137, \"div\", 8)(138, \"div\", 9)(139, \"table\", 10)(140, \"thead\")(141, \"tr\")(142, \"th\");\n      i0.ɵɵtext(143, \"N\\u00B0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(144, \"th\");\n      i0.ɵɵtext(145, \"Fecha\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(146, \"th\");\n      i0.ɵɵtext(147, \"Tipo de venta\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(148, \"th\");\n      i0.ɵɵtext(149, \"Monto\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(150, \"th\");\n      i0.ɵɵtext(151, \"Referencia\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(152, \"th\");\n      i0.ɵɵtext(153, \"Vendedor\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(154, \"th\");\n      i0.ɵɵtext(155, \"caja\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(156, \"tbody\", null, 11);\n      i0.ɵɵtemplate(158, DetallesVentaComponent_tr_158_Template, 17, 14, \"tr\", 12);\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelement(159, \"div\", 14);\n      i0.ɵɵelementStart(160, \"h3\", 4);\n      i0.ɵɵtext(161, \" \\u00A0Detalles de devoluciones \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(162, \"div\", 6)(163, \"div\", 7)(164, \"h6\");\n      i0.ɵɵtext(165, \"Devoluciones realizadas\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(166, \"div\", 8)(167, \"div\", 9)(168, \"table\", 10)(169, \"thead\")(170, \"tr\")(171, \"th\");\n      i0.ɵɵtext(172, \"N\\u00B0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(173, \"th\");\n      i0.ɵɵtext(174, \"Fecha\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(175, \"th\");\n      i0.ɵɵtext(176, \"Producto\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(177, \"th\");\n      i0.ɵɵtext(178, \"Cantidad\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(179, \"th\");\n      i0.ɵɵtext(180, \"Precio de compra\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(181, \"th\");\n      i0.ɵɵtext(182, \"Total\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(183, \"th\");\n      i0.ɵɵtext(184, \"Vendedor\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(185, \"th\");\n      i0.ɵɵtext(186, \"caja\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(187, \"tbody\", null, 11);\n      i0.ɵɵtemplate(189, DetallesVentaComponent_tr_189_Template, 16, 15, \"tr\", 12);\n      i0.ɵɵelementEnd()()()()()();\n      i0.ɵɵelementStart(190, \"dialog\", 15, 16)(192, \"div\", 17)(193, \"h2\", 18);\n      i0.ɵɵtext(194, \"Realizar devoluci\\u00F3n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(195, \"button\", 19);\n      i0.ɵɵlistener(\"click\", function DetallesVentaComponent_Template_button_click_195_listener() {\n        return ctx.cancel(ctx.quantityBack);\n      });\n      i0.ɵɵtext(196, \"x\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(197, \"div\", 20)(198, \"div\", 21)(199, \"label\", 22);\n      i0.ɵɵtext(200, \" Cantidad a devolver \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(201, \"input\", 23);\n      i0.ɵɵlistener(\"focus\", function DetallesVentaComponent_Template_input_focus_201_listener() {\n        return ctx.isFocused(7, ctx.formDevolucion, \"quantity_back\");\n      })(\"focusout\", function DetallesVentaComponent_Template_input_focusout_201_listener() {\n        return ctx.isFocused(7, ctx.formDevolucion, \"quantity_back\");\n      })(\"keypress\", function DetallesVentaComponent_Template_input_keypress_201_listener($event) {\n        return ctx.validate($event, false);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(202, \"div\", 24)(203, \"button\", 25);\n      i0.ɵɵlistener(\"click\", function DetallesVentaComponent_Template_button_click_203_listener() {\n        return ctx.registrarDevolucion();\n      });\n      i0.ɵɵelement(204, \"i\", 26);\n      i0.ɵɵtext(205, \" \\u00A0\\u00A0REALIZAR DEVOLUCI\\u00D3N\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(206, \"button\", 27);\n      i0.ɵɵlistener(\"click\", function DetallesVentaComponent_Template_button_click_206_listener() {\n        return ctx.cancel(ctx.quantityBack);\n      });\n      i0.ɵɵelement(207, \"i\", 28);\n      i0.ɵɵtext(208, \" \\u00A0\\u00A0CANCELAR\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(209, \"dialog\", 29, 30);\n      i0.ɵɵelement(211, \"i\", 31);\n      i0.ɵɵelementStart(212, \"h3\");\n      i0.ɵɵtext(213, \"\\u00BFEstas seguro?\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(214, \"p\");\n      i0.ɵɵtext(215, \"Lois datos seran guardados en el sistema\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(216, \"div\")(217, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function DetallesVentaComponent_Template_button_click_217_listener() {\n        return ctx.acept();\n      });\n      i0.ɵɵtext(218, \" \\u00A0\\u00A0ACEPTAR\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(219, DetallesVentaComponent_button_219_Template, 2, 0, \"button\", 32);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      let tmp_23_0;\n      i0.ɵɵadvance(14);\n      i0.ɵɵtextInterpolate(ctx.sell.id_sell);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(19, 28, ctx.sell.date, \"dd/MM/yyyy\"), \" \", i0.ɵɵpipeBind2(20, 31, ctx.sell.time, \"hh:mm:ss aaaa\"), \"\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate(ctx.sell.type_sell);\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(ctx.register_sell.name);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate2(\"\", ctx.user_sell.names_user, \" \", ctx.user_sell.last_names_user, \"\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate2(\" \", ctx.client.names_client, \" \", ctx.client.last_names_client, \"\");\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(47, 34, ctx.sell.total_sell, ctx.sell.coin + \" \"));\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(52, 37, ctx.sell.total_pay, ctx.sell.coin + \" \"));\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\" \", ctx.sell.state, \"\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(61, 40, ctx.calcularCostosVenta(), ctx.sell.coin + \" \"));\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(66, 43, ctx.sell.total_sell - ctx.calcularCostosVenta(), ctx.sell.coin + \" \"));\n      i0.ɵɵadvance(35);\n      i0.ɵɵproperty(\"ngForOf\", ctx.sell_products);\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate1(\"+ \", i0.ɵɵpipeBind2(108, 46, ctx.calcularTotal(), ctx.sell.coin + \" \"), \"\");\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate1(\"+ \", i0.ɵɵpipeBind2(115, 49, ctx.calcularImpuestoVenta(), ctx.sell.coin + \" \"), \"\");\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate1(\"- \", i0.ɵɵpipeBind2(122, 52, ctx.calcularDescuentoVenta(), ctx.sell.coin + \" \"), \"\");\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(129, 55, ctx.total(), ctx.sell.coin + \" \"));\n      i0.ɵɵadvance(30);\n      i0.ɵɵproperty(\"ngForOf\", ctx.pays);\n      i0.ɵɵadvance(31);\n      i0.ɵɵproperty(\"ngForOf\", ctx.repayments);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"formGroup\", ctx.formDevolucion);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(58, _c2, ctx.verifyStyleInput(ctx.formDevolucion, \"quantity_back\") && ctx.elementHasFocus[7], !ctx.verifyStyleInput(ctx.formDevolucion, \"quantity_back\")));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(61, _c3, ctx.elementHasFocus[7] && ctx.positionLabel[7], ctx.elementHasFocus[7] && !ctx.positionLabel[7]))(\"ngStyle\", ctx.animationLabel(ctx.formDevolucion, \"quantity_back\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngStyle\", ctx.styleForeground(ctx.formDevolucion, \"quantity_back\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(64, _c4, ((tmp_23_0 = ctx.formDevolucion.get(\"quantity_back\")) == null ? null : tmp_23_0.value.length) > 0));\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"ngIf\", (ctx.popUp == null ? null : ctx.popUp.nativeElement.children[1].textContent) === \"\\u00BFEst\\u00E1s seguro?\");\n    }\n  },\n  dependencies: [i5.NgClass, i5.NgForOf, i5.NgIf, i5.NgStyle, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName, i5.PercentPipe, i5.CurrencyPipe, i5.DatePipe],\n  styles: [\".totales[_ngcontent-%COMP%]{\\n    display: flex;\\n    flex-direction: column;\\n    align-items: flex-end;\\n    margin-top: 0px;\\n}\\n.table-container[_ngcontent-%COMP%]{\\n    margin-bottom: 0px;\\n}\\n.totales[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{\\n    width: 20%;\\n    margin-right:5rem;\\n    display: flex;\\n    justify-content: space-between;\\n}\\n.totales[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{\\n    margin: .5rem;\\n}\\n.line[_ngcontent-%COMP%]{\\n    border-bottom: 1px dashed #D8D8D8;\\n    margin:2rem 0rem\\n}\\n.form-title[_ngcontent-%COMP%]{\\n    text-align: center;\\n}\\n.datos[_ngcontent-%COMP%]{\\n    width: 100%;\\n    display: flex;\\n    justify-content: space-between;\\n    flex-grow: 0;\\n}\\n.datos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{\\n    width: 100%;\\n    margin: 1rem;\\n}\\n.datos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{\\n    color:white;\\n    padding: .3rem;\\n    background-color: #424242;\\n    text-align: center;\\n}\\n.back[_ngcontent-%COMP%]{\\n    display: flex;\\n    justify-content: right;\\n}\\n.quantity[_ngcontent-%COMP%]{\\n    width: 30%;\\n    border: none;\\n  }\\n  .quantity[_ngcontent-%COMP%]::-webkit-backdrop{\\n    background-color: rgba(0, 0, 0, .5);\\n  }\\n  .quantity[_ngcontent-%COMP%]::backdrop{\\n    background-color: rgba(0, 0, 0, .5);\\n  }\\n  .quantity[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{\\n      width: 95%;\\n  }\\n  .header[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: space-between;\\n  }\\n  .btn-cerrar-dialog[_ngcontent-%COMP%] {\\n    all: unset;\\n    padding: .1rem 1rem;\\n    border-radius: .1rem;\\n    background-color: transparent;\\n    font-size: 1.5rem;\\n    font-weight: 800;\\n    text-shadow: 0 1px 0 #fff;\\n    opacity: .5;\\n    cursor: pointer;\\n    color: black;\\n    -webkit-appearance: none;\\n            appearance: none;\\n  }\\n  .btn-cerrar-dialog[_ngcontent-%COMP%]:hover{\\n    opacity: 1;\\n  }\\n  .form-actions[_ngcontent-%COMP%]{\\n    justify-content: right;\\n  }\\n  .btn[_ngcontent-%COMP%] {\\n    all: unset;\\n    min-width: 70px;\\n    padding: .8rem 1rem;\\n    margin: 0rem 0rem;\\n    margin-top: 1rem;\\n    border-radius: .3rem;\\n    font-size: .8125rem;\\n    text-align: center;\\n    cursor: not-allowed;\\n    outline: 0;\\n    font-size: 1rem;\\n    color: #676d74;\\n  }\\n  .aceptar[_ngcontent-%COMP%]{\\n    color:#03a9f4\\n  }\\n  .enable[_ngcontent-%COMP%] {\\n    cursor: pointer;\\n  }\\n  .enable[_ngcontent-%COMP%]:hover {\\n    background-color: #EBEBEB;\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29udGVudC92ZW50YXMvZGV0YWxsZXMtdmVudGEvZGV0YWxsZXMtdmVudGEuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIscUJBQXFCO0lBQ3JCLGVBQWU7QUFDbkI7QUFDQTtJQUNJLGtCQUFrQjtBQUN0QjtBQUNBO0lBQ0ksVUFBVTtJQUNWLGlCQUFpQjtJQUNqQixhQUFhO0lBQ2IsOEJBQThCO0FBQ2xDO0FBQ0E7SUFDSSxhQUFhO0FBQ2pCO0FBQ0E7SUFDSSxpQ0FBaUM7SUFDakM7QUFDSjtBQUNBO0lBQ0ksa0JBQWtCO0FBQ3RCO0FBQ0E7SUFDSSxXQUFXO0lBQ1gsYUFBYTtJQUNiLDhCQUE4QjtJQUM5QixZQUFZO0FBQ2hCO0FBQ0E7SUFDSSxXQUFXO0lBQ1gsWUFBWTtBQUNoQjtBQUNBO0lBQ0ksV0FBVztJQUNYLGNBQWM7SUFDZCx5QkFBeUI7SUFDekIsa0JBQWtCO0FBQ3RCO0FBQ0E7SUFDSSxhQUFhO0lBQ2Isc0JBQXNCO0FBQzFCO0FBQ0E7SUFDSSxVQUFVO0lBQ1YsWUFBWTtFQUNkO0VBQ0E7SUFDRSxtQ0FBbUM7RUFDckM7RUFGQTtJQUNFLG1DQUFtQztFQUNyQztFQUNBO01BQ0ksVUFBVTtFQUNkO0VBQ0E7SUFDRSxhQUFhO0lBQ2IsOEJBQThCO0VBQ2hDO0VBQ0E7SUFDRSxVQUFVO0lBQ1YsbUJBQW1CO0lBQ25CLG9CQUFvQjtJQUNwQiw2QkFBNkI7SUFDN0IsaUJBQWlCO0lBQ2pCLGdCQUFnQjtJQUNoQix5QkFBeUI7SUFDekIsV0FBVztJQUNYLGVBQWU7SUFDZixZQUFZO0lBQ1osd0JBQWdCO1lBQWhCLGdCQUFnQjtFQUNsQjtFQUNBO0lBQ0UsVUFBVTtFQUNaO0VBQ0E7SUFDRSxzQkFBc0I7RUFDeEI7RUFDQTtJQUNFLFVBQVU7SUFDVixlQUFlO0lBQ2YsbUJBQW1CO0lBQ25CLGlCQUFpQjtJQUNqQixnQkFBZ0I7SUFDaEIsb0JBQW9CO0lBQ3BCLG1CQUFtQjtJQUNuQixrQkFBa0I7SUFDbEIsbUJBQW1CO0lBQ25CLFVBQVU7SUFDVixlQUFlO0lBQ2YsY0FBYztFQUNoQjtFQUNBO0lBQ0U7RUFDRjtFQUNBO0lBQ0UsZUFBZTtFQUNqQjtFQUNBO0lBQ0UseUJBQXlCO0VBQzNCIiwic291cmNlc0NvbnRlbnQiOlsiLnRvdGFsZXN7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgICBtYXJnaW4tdG9wOiAwcHg7XG59XG4udGFibGUtY29udGFpbmVye1xuICAgIG1hcmdpbi1ib3R0b206IDBweDtcbn1cbi50b3RhbGVzIGRpdntcbiAgICB3aWR0aDogMjAlO1xuICAgIG1hcmdpbi1yaWdodDo1cmVtO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xufVxuLnRvdGFsZXMgZGl2IHB7XG4gICAgbWFyZ2luOiAuNXJlbTtcbn1cbi5saW5le1xuICAgIGJvcmRlci1ib3R0b206IDFweCBkYXNoZWQgI0Q4RDhEODtcbiAgICBtYXJnaW46MnJlbSAwcmVtXG59XG4uZm9ybS10aXRsZXtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG4uZGF0b3N7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgZmxleC1ncm93OiAwO1xufVxuLmRhdG9zIGRpdntcbiAgICB3aWR0aDogMTAwJTtcbiAgICBtYXJnaW46IDFyZW07XG59XG4uZGF0b3MgZGl2IGgze1xuICAgIGNvbG9yOndoaXRlO1xuICAgIHBhZGRpbmc6IC4zcmVtO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICM0MjQyNDI7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuLmJhY2t7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHJpZ2h0O1xufVxuLnF1YW50aXR5e1xuICAgIHdpZHRoOiAzMCU7XG4gICAgYm9yZGVyOiBub25lO1xuICB9XG4gIC5xdWFudGl0eTo6YmFja2Ryb3B7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAuNSk7XG4gIH1cbiAgLnF1YW50aXR5IC5mb3JtIC5mb3JtLWNvbnRyb2x7XG4gICAgICB3aWR0aDogOTUlO1xuICB9XG4gIC5oZWFkZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICB9XG4gIC5idG4tY2VycmFyLWRpYWxvZyB7XG4gICAgYWxsOiB1bnNldDtcbiAgICBwYWRkaW5nOiAuMXJlbSAxcmVtO1xuICAgIGJvcmRlci1yYWRpdXM6IC4xcmVtO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgIGZvbnQtc2l6ZTogMS41cmVtO1xuICAgIGZvbnQtd2VpZ2h0OiA4MDA7XG4gICAgdGV4dC1zaGFkb3c6IDAgMXB4IDAgI2ZmZjtcbiAgICBvcGFjaXR5OiAuNTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgY29sb3I6IGJsYWNrO1xuICAgIGFwcGVhcmFuY2U6IG5vbmU7XG4gIH1cbiAgLmJ0bi1jZXJyYXItZGlhbG9nOmhvdmVye1xuICAgIG9wYWNpdHk6IDE7XG4gIH1cbiAgLmZvcm0tYWN0aW9uc3tcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHJpZ2h0O1xuICB9XG4gIC5idG4ge1xuICAgIGFsbDogdW5zZXQ7XG4gICAgbWluLXdpZHRoOiA3MHB4O1xuICAgIHBhZGRpbmc6IC44cmVtIDFyZW07XG4gICAgbWFyZ2luOiAwcmVtIDByZW07XG4gICAgbWFyZ2luLXRvcDogMXJlbTtcbiAgICBib3JkZXItcmFkaXVzOiAuM3JlbTtcbiAgICBmb250LXNpemU6IC44MTI1cmVtO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xuICAgIG91dGxpbmU6IDA7XG4gICAgZm9udC1zaXplOiAxcmVtO1xuICAgIGNvbG9yOiAjNjc2ZDc0O1xuICB9XG4gIC5hY2VwdGFye1xuICAgIGNvbG9yOiMwM2E5ZjRcbiAgfVxuICAuZW5hYmxlIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gIH1cbiAgLmVuYWJsZTpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI0VCRUJFQjtcbiAgfSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"AACA,SAAsBA,WAAW,QAAmB,gBAAgB;AAIpE,SAASC,YAAY,QAAQ,4BAA4B;;;;;;;;;;;;ICsD7BC,0BAAmC;IAAAA,YAAuB;IAAAA,iBAAK;;;;;IAA5BA,eAAuB;IAAvBA,qDAAuB;;;;;IAC1DA,0BAAmC;IAC/BA,YAA+E;IAAAA,iBAAK;;;;;IAApFA,eAA+E;IAA/EA,mJAA+E;;;;;;IAJvFA,0BAA4D;IACpDA,YAAO;IAAAA,iBAAK;IAChBA,6EAA+D;IAC/DA,6EACwF;IACxFA,0BAAI;IAAAA,YAAmC;IAAAA,iBAAK;IAC5CA,0BAAI;IAAAA,YAAkD;;IAAAA,iBAAK;IAC3DA,2BAAI;IAAAA,aAAiD;;IAAAA,iBAAK;IAC1DA,2BAAI;IAAAA,aAAgF;;IAAAA,iBAAK;IACzFA,2BAAI;IAAAA,aAAwC;;IAAAA,iBAAK;IACjDA,2BAAI;IAAAA,aAA8C;;IAAAA,iBAAK;IACvDA,+BAAoD;IAAnCA;MAAA;MAAA;MAAA;MAAA,OAASA,gEAAwB;IAAA,EAAC;IAC/CA,yBAAgE;IACpEA,iBAAK;;;;;;IAZDA,eAAO;IAAPA,+BAAO;IACNA,eAA4B;IAA5BA,0DAA4B;IAC5BA,eAA4B;IAA5BA,0DAA4B;IAE7BA,eAAmC;IAAnCA,iEAAmC;IACnCA,eAAkD;IAAlDA,8FAAkD;IAClDA,eAAiD;IAAjDA,uFAAiD;IACjDA,eAAgF;IAAhFA,mIAAgF;IAChFA,eAAwC;IAAxCA,8EAAwC;IACxCA,eAA8C;IAA9CA,oGAA8C;;;;;IAoDvDA,0BAA0C;IACrCA,YAAO;IAAAA,iBAAK;IAChBA,0BAAI;IAAAA,YAA8B;;IAAAA,iBAAK;IACvCA,0BAAI;IAAAA,YAAY;IAAAA,iBAAK;IACrBA,0BAAI;IAAAA,YAAmC;;IAAAA,iBAAK;IAC5CA,2BAAI;IAAAA,aAAiB;IAAAA,iBAAK;IAC1BA,2BAAI;IAAAA,aAA0D;IAAAA,iBAAK;IACnEA,2BAAI;IAAAA,aAAyB;IAAAA,iBAAK;;;;;;IAN9BA,eAAO;IAAPA,+BAAO;IACPA,eAA8B;IAA9BA,sEAA8B;IAC9BA,eAAY;IAAZA,kCAAY;IACZA,eAAmC;IAAnCA,+EAAmC;IACnCA,eAAiB;IAAjBA,uCAAiB;IACjBA,eAA0D;IAA1DA,6GAA0D;IAC1DA,eAAyB;IAAzBA,sDAAyB;;;;;IAiC9BA,0BAAsD;IACjDA,YAAO;IAAAA,iBAAK;IAChBA,0BAAI;IAAAA,YAAoC;;IAAAA,iBAAK;IAC7CA,0BAAI;IAAAA,YAAsB;IAAAA,iBAAK;IAC/BA,0BAAI;IAAAA,YAAsB;IAAAA,iBAAK;IAC/BA,2BAAI;IAAAA,aAA+C;;IAAAA,iBAAK;IACxDA,2BAAI;IAAAA,aAA+C;;IAAAA,iBAAK;;;;;;IALpDA,eAAO;IAAPA,+BAAO;IACPA,eAAoC;IAApCA,4EAAoC;IACpCA,eAAsB;IAAtBA,mDAAsB;IACtBA,eAAsB;IAAtBA,4CAAsB;IACtBA,eAA+C;IAA/CA,0FAA+C;IAC/CA,eAA+C;IAA/CA,2FAA+C;;;;;;IA6CnEA,kCAC2D;IAAxBA;MAAAA;MAAA;MAAA,OAASA,4CAAa;IAAA,EAAC;IACtDA,qCAAoB;IAAAA,iBAAS;;;;;;;;;;;;;;;;;;;;ADnMzC,OAAM,MAAOC,sBAAuB,SAAQF,YAAY;EAmBtDG,YAAoBC,MAAc,EACxBC,cAA2C,EACnCC,QAAmB,EAC3BC,KAAqB,EACrBC,SAAwB,EACxBC,EAAe,EACfC,QAAkB,EAClBC,eAAoC;IAC5C,KAAK,EAAE;IARW,WAAM,GAANP,MAAM;IAChB,mBAAc,GAAdC,cAAc;IACN,aAAQ,GAARC,QAAQ;IAChB,UAAK,GAALC,KAAK;IACL,cAAS,GAATC,SAAS;IACT,OAAE,GAAFC,EAAE;IACF,aAAQ,GAARC,QAAQ;IACR,oBAAe,GAAfC,eAAe;IAvBzB,UAAK,GAAa,EAAE;IAGpB,aAAQ,GAAS,EAAE;IAGnB,kBAAa,GAAY,EAAE;IAC3B,kBAAa,GAAmB,EAAE;IAClC,eAAU,GAAgB,EAAE;IAC5B,aAAQ,GAAc,EAAE;IACxB,SAAI,GAAO,EAAE;EAeb;EAEAC,QAAQ;IACNC,UAAU,CAAC,MAAK;MACd;MACA,IAAI,CAACC,IAAI,GAAG,IAAI,CAACV,MAAM,CAACW,GAAG,CAACC,KAAK,CAAE,IAAI,CAACZ,MAAM,CAACW,GAAG,CAACC,KAAK,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,GAAG,CAAC,GAAI,CAAC,EAAE,IAAI,CAACb,MAAM,CAACW,GAAG,CAACG,WAAW,CAAC,GAAG,CAAC,CAAC;MAChH,IAAI,CAACC,KAAK,CAACC,IAAI,CAAC,oBAAoB,CAAC,CAAC;MACtC,IAAI,CAACD,KAAK,CAACC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACP,IAAI,CAAC,CAACQ,WAAW,EAAE,CAAC,CAAC;MACpD,IAAI,CAACjB,cAAc,CAACkB,iBAAiB,CAAC,IAAI,CAACJ,KAAK,CAAC;IACnD,CAAC,CAAC;IACF,IAAI,CAACZ,KAAK,CAACiB,WAAW,CAACC,SAAS,CAAEC,MAAM,IAAI;MAC1C,IAAI,CAAClB,SAAS,CAACmB,OAAO,CAACD,MAAM,CAAC,SAAS,CAAC,CAAC,CAACD,SAAS,CAACG,GAAG,IAAG;QACxD,IAAIC,GAAG,GAAQD,GAAG;QAClB,IAAI,CAACE,IAAI,GAAGD,GAAG,CAAC,CAAC,CAAC;QAClB,IAAI,CAACE,SAAS,GAACF,GAAG,CAAC,CAAC,CAAC;QACrB,IAAI,CAACG,MAAM,GAACH,GAAG,CAAC,CAAC,CAAC;QAClB,IAAI,CAACI,aAAa,GAACJ,GAAG,CAAC,CAAC,CAAC;MAC3B,CAAC,CAAC;MACF,IAAI,CAACrB,SAAS,CAAC0B,eAAe,CAACR,MAAM,CAAC,SAAS,CAAC,CAAC,CAACD,SAAS,CAACG,GAAG,IAAG;QAChE,IAAIA,GAAG,YAAYO,KAAK,EAAC;UACvB,IAAIN,GAAG,GAAKD,GAAG;UACf,IAAI,CAACQ,QAAQ,GAACP,GAAG;UACjB,IAAI,CAACQ,aAAa,GAAGR,GAAG;;MAE5B,CAAC,CAAC;MACF,IAAI,CAACrB,SAAS,CAAC8B,WAAW,CAACZ,MAAM,CAAC,SAAS,CAAC,CAAC,CAACD,SAAS,CAACG,GAAG,IAAE;QAC3D,IAAGA,GAAG,YAAYO,KAAK,EAAC;UACtB,IAAIN,GAAG,GAAKD,GAAG;UACf,IAAI,CAACW,QAAQ,GAACV,GAAG;UACjB,IAAI,CAACW,aAAa,GAACX,GAAG;UACtB,IAAI,CAACY,IAAI,GAACZ,GAAG;;MAEjB,CAAC,CAAC;MACF,IAAI,CAAClB,eAAe,CAAC+B,iBAAiB,CAAChB,MAAM,CAAC,SAAS,CAAC,CAAC,CAACD,SAAS,CAACG,GAAG,IAAE;QACvEe,OAAO,CAACC,GAAG,CAAChB,GAAG,CAAC;QAChB,IAAGA,GAAG,YAAYO,KAAK,EAAC;UACtB,IAAI,CAACU,UAAU,GAACjB,GAAG;;MAEvB,CAAC,CAAC;IACJ,CAAC,CAAC;IACF,IAAI,CAACkB,cAAc,GAAG,IAAI,CAACrC,EAAE,CAACsC,KAAK,CAAC;MAClCC,aAAa,EAAE,IAAIjD,WAAW,CAAC,EAAE;KAClC,CAAC;EACJ;EACAkD,SAAS,CAACC,OAAgB,EAAEC,KAAa;IACvCR,OAAO,CAACC,GAAG,CAAC,IAAI,CAACR,QAAQ,CAAC;IAC1B,IAAI,CAACgB,kBAAkB,GAAGD,KAAK;IAC/B,IAAI,CAAC7C,QAAQ,CAAC+C,WAAW,CAAC,IAAI,CAACC,YAAY,EAAEC,aAAa,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,EAChF,aAAa,EAAE,uBAAuB,GAAGN,OAAO,CAACO,IAAI,GAAG,GAAG,GAAGP,OAAO,CAACQ,IAAI,GAAG,GAAG,GAAGR,OAAO,CAACS,KAAK,GAAG,GAAG,CAAC;IACzG,IAAI,CAACL,YAAY,EAAEC,aAAa,CAACN,SAAS,EAAE;EAC9C;EACAW,gBAAgB,CAACC,KAAa;IAC5B,OAAO,CAAE,IAAI,CAACzB,QAAQ,CAAC,IAAI,CAACgB,kBAAkB,CAAC,CAACU,UAAU,GACxD,IAAI,CAAC1B,QAAQ,CAAC,IAAI,CAACgB,kBAAkB,CAAC,CAACW,cAAc,GACpD,IAAI,CAAC1B,aAAa,CAAC,IAAI,CAACe,kBAAkB,CAAC,CAACU,UAAU,GACrDE,MAAM,CAAC,IAAI,CAAClB,cAAc,CAACmB,GAAG,CAAC,eAAe,CAAC,EAAEC,KAAK,CAAE,KACzD,IAAI,CAAC9B,QAAQ,CAAC,IAAI,CAACgB,kBAAkB,CAAC,CAACW,cAAc,GACpDC,MAAM,CAAC,IAAI,CAAClB,cAAc,CAACmB,GAAG,CAAC,eAAe,CAAC,EAAEC,KAAK,CAAC,CAAC;EAC9D;EACAC,mBAAmB;IACjB,IAAIC,OAAO,GAAC,IAAIC,IAAI,CAAC,IAAI,CAACjC,QAAQ,CAAC,IAAI,CAACgB,kBAAkB,CAAC,CAACkB,YAAY,CAAC;IACzE,IAAIC,KAAK,GAAC,IAAIF,IAAI,EAAE;IACpB,IAAIG,OAAO,GAAG,EAAE;IAChB,IAAIR,MAAM,CAAC,IAAI,CAAClB,cAAc,CAACmB,GAAG,CAAC,eAAe,CAAC,EAAEC,KAAK,CAAC,GACxD,IAAI,CAAC7B,aAAa,CAAC,IAAI,CAACe,kBAAkB,CAAC,CAACqB,iBAAiB,GAC5D,IAAI,CAACpC,aAAa,CAAC,IAAI,CAACe,kBAAkB,CAAC,CAACJ,aAAc,EAAE;MAC9DwB,OAAO,GAAG,6DAA6D;KACxE,MAAM,IAAI,IAAI,CAACpC,QAAQ,CAAC,IAAI,CAACgB,kBAAkB,CAAC,CAACkB,YAAY,KAAG,IAAI,EAAE;MACrEE,OAAO,GAAG,8EAA8E;KACzF,MAAK,IAAGJ,OAAO,GAACG,KAAK,EAAC;MACrBC,OAAO,GAAG,sCAAsC;KACjD,MAAM;MACL,IAAIE,SAAS,GAAc;QACzBC,IAAI,EAAE,OAAO;QACbC,IAAI,EAAE,IAAIP,IAAI,EAAE;QAChBQ,OAAO,EAAE,IAAI,CAAC/C,IAAI,CAAC+C,OAAO;QAC1BC,QAAQ,EAAEd,MAAM,CAAC,IAAI,CAAClB,cAAc,CAACmB,GAAG,CAAC,eAAe,CAAC,EAAEC,KAAK,CAAC;QACjEL,KAAK,EAAE,IAAI,CAACxB,aAAa,CAAC,IAAI,CAACe,kBAAkB,CAAC,CAACU,UAAU;QAC7DiB,KAAK,EAAEf,MAAM,CAAC,IAAI,CAAClB,cAAc,CAACmB,GAAG,CAAC,eAAe,CAAC,EAAEC,KAAK,CAAC,GAC5D,IAAI,CAAC7B,aAAa,CAAC,IAAI,CAACe,kBAAkB,CAAC,CAACU,UAAU;QACxDkB,IAAI,EAAE,IAAI,CAAClD,IAAI,CAACkD,IAAI;QACpBjB,cAAc,EAAE,IAAI,CAAC3B,QAAQ,CAAC,IAAI,CAACgB,kBAAkB,CAAC,CAACW,cAAc,GAAGC,MAAM,CAAC,IAAI,CAAClB,cAAc,CAACmB,GAAG,CAAC,eAAe,CAAC,EAAEC,KAAK,CAAC;QAC/He,iBAAiB,EAAEjB,MAAM,CAAC,CAAC,CAAE,IAAI,CAAC5B,QAAQ,CAAC,IAAI,CAACgB,kBAAkB,CAAC,CAACU,UAAU,GAC5E,IAAI,CAAC1B,QAAQ,CAAC,IAAI,CAACgB,kBAAkB,CAAC,CAACW,cAAc,GACpD,IAAI,CAAC1D,cAAc,CAAC6E,mBAAmB,CAAC,IAAI,CAAC7C,aAAa,CAAC,IAAI,CAACe,kBAAkB,CAAC,CAACU,UAAU,EAAE,IAAI,CAAChC,IAAI,CAACqD,QAAQ,CAAC,GAClHnB,MAAM,CAAC,IAAI,CAAClB,cAAc,CAACmB,GAAG,CAAC,eAAe,CAAC,EAAEC,KAAK,CAAE,KACzD,IAAI,CAAC9B,QAAQ,CAAC,IAAI,CAACgB,kBAAkB,CAAC,CAACW,cAAc,GACpDC,MAAM,CAAC,IAAI,CAAClB,cAAc,CAACmB,GAAG,CAAC,eAAe,CAAC,EAAEC,KAAK,CAAC,CAAC,EAAEkB,OAAO,CAAC,CAAC,CAAC,CAAC;QACzEC,OAAO,EAAE,IAAI,CAACvD,IAAI,CAACuD,OAAO;QAC1BC,UAAU,EAAE,IAAI,CAACjD,aAAa,CAAC,IAAI,CAACe,kBAAkB,CAAC,CAACkC;OACzD;MACDZ,SAAS,CAACO,iBAAiB,GAAIM,KAAK,CAACb,SAAS,CAACO,iBAAiB,CAAC,GAAI,CAAC,GAAGP,SAAS,CAACO,iBAAiB;MACpGP,SAAS,CAACO,iBAAiB,GAAG,IAAI,CAAC5E,cAAc,CAACmF,wBAAwB,CAACd,SAAS,CAACO,iBAAiB,EAAE,IAAI,CAACnD,IAAI,CAACqD,QAAQ,CAAC;MAC3H,IAAI,CAACxE,eAAe,CAAC8E,gBAAgB,CAACf,SAAS,CAAC,CAACjD,SAAS,CAACG,GAAG,IAAG;QAC9D,IAAIA,GAAG,CAACT,KAAK,CAACuE,QAAQ,CAAC,YAAY,CAAC,EAAE;UACrC,IAAI,CAAC7C,UAAU,CAACzB,IAAI,CAACsD,SAAS,CAAC;;QAE/B;;;;;;;;;;;;;;;;;;;;;;;;;;QA2BF/B,OAAO,CAACC,GAAG,CAAChB,GAAG,CAAC;QAChB,IAAI,CAAC+D,WAAW,CAAC/D,GAAG,CAAC;QACrB,IAAI,CAACgE,KAAK,EAAErC,aAAa,CAACN,SAAS,EAAE;MACvC,CAAC,CAAC;;IAEJ,IAAIuB,OAAO,KAAK,EAAE,EAAE;MAClB,IAAIqB,MAAM,GAAU;QAClBC,IAAI,EAAE,4BAA4B;QAClC3E,KAAK,EAAE,6BAA6B;QACpCqD,OAAO,EAAEA;OACV;MACD,IAAI,CAACmB,WAAW,CAACE,MAAM,CAAC;MACxB,IAAI,CAACD,KAAK,EAAErC,aAAa,CAACN,SAAS,EAAE;;EAEzC;EAEA8C,gBAAgB,CAAC5C,KAAa;IAC5B,IAAIU,KAAK,GAAG,IAAI,CAACzB,QAAQ,CAACe,KAAK,CAAC,CAACW,UAAU;IAC3C,IAAIkC,QAAQ,GAAG,IAAI,CAAC5D,QAAQ,CAACe,KAAK,CAAC,CAAC6C,QAAQ;IAC5C,IAAIlB,QAAQ,GAAG,IAAI,CAACzC,aAAa,CAACc,KAAK,CAAC,CAACsB,iBAAiB;IAC1D,OAAOT,MAAM,CAAC,CAAEH,KAAK,GAAGiB,QAAQ,GAAKd,MAAM,CAAC,CAACH,KAAK,GAAGmC,QAAQ,EAAEZ,OAAO,CAAC,CAAC,CAAC,CAAC,GAAGN,QAAS,EAAEM,OAAO,CAAC,CAAC,CAAC,CAAC;EACrG;EAEAa,aAAa;IACX,IAAIlB,KAAK,GAAG,CAAC;IACb,IAAI,CAAC3C,QAAQ,CAAC8D,OAAO,CAAC,CAAChD,OAAgB,EAAEC,KAAa,KAAI;MACxD4B,KAAK,IAAI,IAAI,CAACgB,gBAAgB,CAAC5C,KAAK,CAAC;IACvC,CAAC,CAAC;IACF,OAAO4B,KAAK;EACd;EACAoB,sBAAsB;IACpB,OAAOnC,MAAM,CAAC,CAAC,IAAI,CAAClC,IAAI,CAACkE,QAAQ,GAAG,IAAI,CAACC,aAAa,EAAE,EAAEb,OAAO,CAAC,CAAC,CAAC,CAAC;EACvE;EACAgB,qBAAqB;IACnB,IAAIC,cAAc,GAAG,CAAC;IACtB,IAAI,CAACjE,QAAQ,CAAC8D,OAAO,CAAC,CAAChD,OAAgB,EAAEC,KAAa,KAAI;MACxD,IAAID,OAAO,CAACoD,OAAO,GAAG,CAAC,EAAE;QACvBD,cAAc,IAAIrC,MAAM,CAAC,CAACd,OAAO,CAACoD,OAAO,GAAG,IAAI,CAACP,gBAAgB,CAAC5C,KAAK,CAAC,EAAEiC,OAAO,CAAC,CAAC,CAAC,CAAC;;IAEzF,CAAC,CAAC;IACF,OAAOiB,cAAc;EACvB;EACAE,mBAAmB;IACjB,IAAIxB,KAAK,GAAG,CAAC;IACb,IAAI,CAAC3C,QAAQ,CAAC8D,OAAO,CAAC,CAAChD,OAAgB,EAAEC,KAAa,KAAI;MACxD4B,KAAK,IAAI7B,OAAO,CAACsD,SAAS,GAAC,IAAI,CAACnE,aAAa,CAACc,KAAK,CAAC,CAACsB,iBAAiB;IACxE,CAAC,CAAC;IACF,OAAOM,KAAK;EACd;EACAA,KAAK;IACH,OAAOf,MAAM,CAAC,CAAC,IAAI,CAACiC,aAAa,EAAE,GAAG,IAAI,CAACG,qBAAqB,EAAE,GAAG,IAAI,CAACD,sBAAsB,EAAE,EAAEf,OAAO,CAAC,CAAC,CAAC,CAAC;EACjH;EACAqB,0BAA0B;IACxB,IAAI,CAAC/F,QAAQ,CAACgG,IAAI,EAAE;EACtB;EACAxD,OAAO,CAACwB,SAAoB;IAC1B,IAAIiC,YAAY,GAAG,EAAE;IACrB,IAAI,CAACvE,QAAQ,CAAC8D,OAAO,CAAEhD,OAAgB,IAAI;MACzC,IAAIA,OAAO,CAACoC,UAAU,KAAKZ,SAAS,CAACY,UAAU,EAAE;QAC/CqB,YAAY,GAAGzD,OAAO,CAACO,IAAI,GAAG,GAAG,GAAGP,OAAO,CAACQ,IAAI,GAAG,GAAG,GAAGR,OAAO,CAACS,KAAK;;IAE1E,CAAC,CAAC;IACF,OAAOgD,YAAY;EACrB;EACAC,KAAK;IACH,IAAI,IAAI,CAAChB,KAAK,EAAErC,aAAa,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACqD,WAAW,KAAK,6BAA6B,EAAE;MACvF,IAAI,CAACC,MAAM,CAAC,IAAI,CAAClB,KAAK,CAAC;KACxB,MAAM;MACL,IAAI,CAACkB,MAAM,CAAC,IAAI,CAAClB,KAAK,CAAC;MACvB,IAAI,CAACkB,MAAM,CAAC,IAAI,CAACxD,YAAY,CAAC;;EAElC;;AA/NWpD,sBAAuB;mBAAvBA,sBAAsB;AAAA;AAAtBA,sBAAuB;QAAvBA,sBAAsB;EAAA6G;EAAAC;IAAA;;;;;;;;;;;;;;;;MCjBnC/G,8BAA4B;MAEhBA;QAAA,OAASgH,gCAA4B;MAAA,EAAC;MAA8BhH,uBAA4B;MACpGA,+BAAc;MAAAA,iBAAS;MAEvBA,6BAAuB;MACnBA,yCACJ;MAAAA,iBAAK;MACTA,8BAAmB;MAEPA,+BAAc;MAAAA,iBAAK;MACvBA,0BAAG;MAAQA,kCAAY;MAAAA,iBAAS;MAAAA,aAAgB;MAAAA,iBAAI;MACpDA,0BAAG;MAAQA,wBAAO;MAAAA,iBAAS;MAAAA,aAAkE;;;MAAAA,iBAAI;MACjGA,0BAAG;MAAQA,gCAAe;MAAAA,iBAAS;MAAAA,aAAkB;MAAAA,iBAAI;MAE7DA,4BAAK;MACGA,+BAAc;MAAAA,iBAAK;MACvBA,0BAAG;MAAQA,uBAAM;MAAAA,iBAAS;MAAAA,aAAsB;MAAAA,iBAAI;MACpDA,0BAAG;MAAQA,2BAAU;MAAAA,iBAAS;MAAAA,aAAsD;MAAAA,iBAAI;MACxFA,0BAAG;MAAQA,0BAAS;MAAAA,iBAAS;MAACA,aAAoD;MAAAA,iBAAI;MAE1FA,4BAAK;MACGA,iCAAgB;MAAAA,iBAAK;MACzBA,0BAAG;MAAQA,wBAAO;MAAAA,iBAAS;MAAAA,aAA0C;;MAAAA,iBAAI;MACzEA,0BAAG;MAAQA,yBAAQ;MAAAA,iBAAS;MAAAA,aAAyC;;MAAAA,iBAAI;MACzEA,0BAAG;MAAQA,wBAAO;MAAAA,iBAAS;MAACA,aAAc;MAAAA,iBAAI;MAC9CA,0BAAG;MAAQA,iCAAgB;MAAAA,iBAAS;MAAAA,aAAgD;;MAAAA,iBAAI;MACxFA,0BAAG;MAAQA,uCAAsB;MAAAA,iBAAS;MAAAA,aAAgE;;MAAAA,iBAAI;MAItHA,8BAAuB;MACnBA,0CACJ;MAAAA,iBAAK;MACLA,+BAA6B;MAEjBA,mCAAkB;MAAAA,iBAAK;MAE/BA,+BAAwB;MAKAA,wBAAE;MAAAA,iBAAK;MACXA,2BAAI;MAAAA,qCAAe;MAAAA,iBAAK;MACxBA,2BAAI;MAAAA,yBAAQ;MAAAA,iBAAK;MACjBA,2BAAI;MAAAA,yBAAQ;MAAAA,iBAAK;MACjBA,2BAAI;MAAAA,gCAAe;MAAAA,iBAAK;MACxBA,2BAAI;MAAAA,0BAAS;MAAAA,iBAAK;MAClBA,2BAAI;MAAAA,mCAAkB;MAAAA,iBAAK;MAC3BA,2BAAI;MAAAA,oBAAG;MAAAA,iBAAK;MACZA,2BAAI;MAAAA,0BAAS;MAAAA,iBAAK;MAClBA,2BAAI;MAAAA,gCAAU;MAAAA,iBAAK;MAI3BA,wCAAY;MACRA,4EAcK;MACTA,iBAAQ;MAKxBA,iCAAqB;MAEFA,2BAAS;MAAAA,iBAAS;MAC7BA,2BAAG;MAAAA,cAA4C;;MAAAA,iBAAI;MAEvDA,6BAAK;MACUA,sBAAI;MAAAA,iBAAS;MACxBA,2BAAG;MAAAA,cAAoD;;MAAAA,iBAAI;MAE/DA,6BAAK;MACUA,4BAAU;MAAAA,iBAAS;MAC9BA,2BAAG;MAAAA,cAAqD;;MAAAA,iBAAI;MAEhEA,6BAAK;MACUA,wBAAM;MAAAA,iBAAS;MAC1BA,2BAAG;MAAAA,cAAkC;;MAAAA,iBAAI;MAGjDA,4BAAwB;MACxBA,+BAAuB;MACnBA,2CACJ;MAAAA,iBAAK;MACLA,gCAA6B;MAEjBA,kCAAgB;MAAAA,iBAAK;MAE7BA,gCAAwB;MAKAA,yBAAE;MAAAA,iBAAK;MACXA,4BAAI;MAAAA,uBAAK;MAAAA,iBAAK;MACdA,4BAAI;MAAAA,+BAAa;MAAAA,iBAAK;MACtBA,4BAAI;MAAAA,uBAAK;MAAAA,iBAAK;MACdA,4BAAI;MAAAA,4BAAU;MAAAA,iBAAK;MACnBA,4BAAI;MAAAA,0BAAQ;MAAAA,iBAAK;MACjBA,4BAAI;MAAAA,sBAAI;MAAAA,iBAAK;MAIrBA,yCAAY;MACTA,4EAQE;MAELA,iBAAQ;MAKxBA,4BAAwB;MACxBA,+BAAuB;MACnBA,kDACJ;MAAAA,iBAAK;MACLA,gCAA6B;MAEjBA,yCAAuB;MAAAA,iBAAK;MAEpCA,gCAAwB;MAKAA,yBAAE;MAAAA,iBAAK;MACXA,4BAAI;MAAAA,uBAAK;MAAAA,iBAAK;MACdA,4BAAI;MAAAA,0BAAQ;MAAAA,iBAAK;MACjBA,4BAAI;MAAAA,0BAAQ;MAAAA,iBAAK;MACjBA,4BAAI;MAAAA,kCAAgB;MAAAA,iBAAK;MACzBA,4BAAI;MAAAA,uBAAK;MAAAA,iBAAK;MACdA,4BAAI;MAAAA,0BAAQ;MAAAA,iBAAK;MACjBA,4BAAI;MAAAA,sBAAI;MAAAA,iBAAK;MAIrBA,yCAAY;MACTA,4EAOE;MAELA,iBAAQ;MAM5BA,wCAAmC;MAETA,0CAAmB;MAAAA,iBAAK;MAC1CA,oCAAiE;MAA/BA;QAAA,OAASgH,4BAAoB;MAAA,EAAC;MAAChH,mBAAC;MAAAA,iBAAS;MAE/EA,iCAA+C;MAQnCA,uCACJ;MAAAA,iBAAQ;MACRA,mCAEoG;MAF7DA;QAAA,OAASgH,cAAU,CAAC,sBAAgB,eAAe,CAAC;MAAA,EAAC;QAAA,OAC5EA,cAAU,CAAC,sBAAgB,eAAe,CAAC;MAAA,EADiC;QAAA,OAEhBA,qBAAgB,KAAK,CAAC;MAAA,EAFN;MAA5FhH,iBAEoG;MAG5GA,iCAA0B;MAGlBA;QAAA,OAASgH,yBAAqB;MAAA,EAAC;MAC/BhH,0BAA0C;MAACA,uDAA+B;MAAAA,iBAAS;MACvFA,oCAA4F;MAArDA;QAAA,OAASgH,4BAAoB;MAAA,EAAC;MACjEhH,0BAAmC;MAACA,uCAAoB;MAAAA,iBAAS;MAG7EA,wCAA8B;MAC1BA,0BAA6C;MAC7CA,4BAAI;MAAAA,qCAAc;MAAAA,iBAAK;MACvBA,2BAAG;MAAAA,0DAAwC;MAAAA,iBAAI;MAC/CA,6BAAK;MACoCA;QAAA,OAASgH,WAAO;MAAA,EAAC;MAClDhH,sCAAmB;MAAAA,iBAAS;MAChCA,kFAEiC;MACrCA,iBAAM;;;;MA1MkCA,gBAAgB;MAAhBA,sCAAgB;MACrBA,eAAkE;MAAlEA,+IAAkE;MAC1DA,eAAkB;MAAlBA,wCAAkB;MAI3BA,eAAsB;MAAtBA,4CAAsB;MAClBA,eAAsD;MAAtDA,2FAAsD;MACtDA,eAAoD;MAApDA,0FAAoD;MAIvDA,eAA0C;MAA1CA,sFAA0C;MACzCA,eAAyC;MAAzCA,qFAAyC;MACzCA,eAAc;MAAdA,8CAAc;MACNA,eAAgD;MAAhDA,4FAAgD;MAC1CA,eAAgE;MAAhEA,kHAAgE;MA8BjEA,gBAAkB;MAAlBA,2CAAkB;MAuBxDA,eAA4C;MAA5CA,kGAA4C;MAI5CA,eAAoD;MAApDA,0GAAoD;MAIpDA,eAAqD;MAArDA,2GAAqD;MAIrDA,eAAkC;MAAlCA,+EAAkC;MA2BNA,gBAAS;MAATA,kCAAS;MAwCHA,gBAAe;MAAfA,wCAAe;MAoB1CA,eAA4B;MAA5BA,8CAA4B;MAChBA,eAC8D;MAD9DA,sMAC8D;MAC1DA,eAGC;MAHDA,sJAGC;MAMvBA,eAA2D;MAA3DA,kFAA2D;MAK/DA,eAAkF;MAAlFA,wJAAkF;MAc7EA,gBAA4E;MAA5EA,kIAA4E","names":["FormControl","DinamicInput","i0","DetallesVentaComponent","constructor","routes","comunicatorSvc","renderer","route","ventasSvc","fb","location","devolucionesSvc","ngOnInit","setTimeout","ruta","url","slice","indexOf","lastIndexOf","title","push","decodeURI","toUpperCase","setTitleComponent","queryParams","subscribe","params","getSell","res","aux","sell","user_sell","client","register_sell","getProductsSell","Array","products","sell_products","getPaysSell","user_pay","registers_pay","pays","getRepaymentsSell","console","log","repayments","formDevolucion","group","quantity_back","showModal","product","index","indexElementToBack","setProperty","quantityBack","nativeElement","children","name","mark","model","calcularPromedio","price","sell_price","exist_quantity","Number","get","value","registrarDevolucion","garanty","Date","time_garanty","today","content","quantity_products","repayment","type","date","id_sell","quantity","total","coin","weighted_averages","converterToMainCoin","exchange","toFixed","id_user","id_product","isNaN","converterToSecondaryCoin","setRepaymentSell","includes","changeModal","popUp","values","icon","calcularSubtotal","discount","calcularTotal","forEach","calcularDescuentoVenta","calcularImpuestoVenta","montoImponible","impuest","calcularCostosVenta","buy_price","redirectToVentasRealizadas","back","name_product","acept","textContent","cancel","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["/home/luis/Documentos/systems vs code/inventary-system/client/src/app/content/ventas/detalles-venta/detalles-venta.component.ts","/home/luis/Documentos/systems vs code/inventary-system/client/src/app/content/ventas/detalles-venta/detalles-venta.component.html"],"sourcesContent":["import { Component, ElementRef, Renderer2, ViewChild } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { product, repayment, sell, sell_product, user, alert, pay, register, client } from 'src/app/interfaces/interfaces';\nimport { ComunicatorComponetsService } from 'src/app/services/comunicator/comunicator-componets.service';\nimport { DinamicInput } from 'src/app/utils/DinamicInput';\nimport { VentasService } from '../../ventas/service/ventas.service';\nimport { UsuariosService } from '../../administracion/usuarios/service/usuarios.service';\nimport { ProductosService } from '../../productos/productos-en-almacen/service/productos.service';\nimport { DevolucionesService } from '../../devoluciones/service/devoluciones.service';\nimport { Location } from '@angular/common';\n\n@Component({\n  selector: 'app-detalles-venta',\n  templateUrl: './detalles-venta.component.html',\n  styleUrls: ['./detalles-venta.component.css']\n})\nexport class DetallesVentaComponent extends DinamicInput {\n\n  ruta!: string\n  title: string[] = []\n  sell!: sell\n  user_sell!: user\n  user_pay: user[]=[]\n  client!:client\n  register_sell!:register\n  registers_pay:register[]=[]\n  sell_products: sell_product[] = []\n  repayments: repayment[] = []\n  products: product[] = []\n  pays:pay[]=[]\n  indexElementToBack!: number\n  formDevolucion!: FormGroup\n  @ViewChild('quantity', { static: true }) quantityBack?: ElementRef;\n  @ViewChild('popup', { static: true }) override popUp?: ElementRef;\n\n  constructor(private routes: Router,\n    private comunicatorSvc: ComunicatorComponetsService,\n    public override renderer: Renderer2,\n    private route: ActivatedRoute,\n    private ventasSvc: VentasService,\n    private fb: FormBuilder,\n    private location: Location,\n    private devolucionesSvc: DevolucionesService) {\n    super()\n  }\n\n  ngOnInit() {\n    setTimeout(() => {\n      /* Obtengo la ruta actual y la transformo para obtener el titulo del componente*/\n      this.ruta = this.routes.url.slice((this.routes.url.slice(1).indexOf('/')) + 2, this.routes.url.lastIndexOf('?'));\n      this.title.push(\"fas fa-coins fa-fw\");//aañado el icono del titulo al array\n      this.title.push(decodeURI(this.ruta).toUpperCase());//añado el titulo al array\n      this.comunicatorSvc.setTitleComponent(this.title);\n    });\n    this.route.queryParams.subscribe((params) => {\n      this.ventasSvc.getSell(params['id_sell']).subscribe(res => {\n        let aux: any = res\n        this.sell = aux[0]\n        this.user_sell=aux[0]\n        this.client=aux[0]\n        this.register_sell=aux[0]\n      })\n      this.ventasSvc.getProductsSell(params['id_sell']).subscribe(res => {\n        if (res instanceof Array){\n          let aux:any=res\n          this.products=aux\n          this.sell_products = aux\n        }\n      })\n      this.ventasSvc.getPaysSell(params['id_sell']).subscribe(res=>{\n        if(res instanceof Array){\n          let aux:any=res\n          this.user_pay=aux\n          this.registers_pay=aux\n          this.pays=aux\n        }\n      })\n      this.devolucionesSvc.getRepaymentsSell(params['id_sell']).subscribe(res=>{\n        console.log(res)\n        if(res instanceof Array){\n          this.repayments=res\n        }\n      })\n    })\n    this.formDevolucion = this.fb.group({\n      quantity_back: new FormControl('')\n    })\n  }\n  showModal(product: product, index: number) {\n    console.log(this.products)\n    this.indexElementToBack = index\n    this.renderer.setProperty(this.quantityBack?.nativeElement.children[0].children[0],\n      'textContent', 'Realizar Devolución (' + product.name + ' ' + product.mark + ' ' + product.model + ')')\n    this.quantityBack?.nativeElement.showModal()\n  }\n  calcularPromedio(price: number) {\n    return ((this.products[this.indexElementToBack].sell_price *\n      this.products[this.indexElementToBack].exist_quantity) -\n      (this.sell_products[this.indexElementToBack].sell_price *\n        Number(this.formDevolucion.get('quantity_back')?.value))) /\n      (this.products[this.indexElementToBack].exist_quantity -\n        Number(this.formDevolucion.get('quantity_back')?.value))\n  }\n  registrarDevolucion() {\n    let garanty=new Date(this.products[this.indexElementToBack].time_garanty)\n    let today=new Date()\n    let content = ''\n    if (Number(this.formDevolucion.get('quantity_back')?.value) >\n      (this.sell_products[this.indexElementToBack].quantity_products -\n        this.sell_products[this.indexElementToBack].quantity_back)) {\n      content = 'La cantidad a devolver es mayor a la registrada en la venta'\n    } else if (this.products[this.indexElementToBack].time_garanty===null) {\n      content = 'No se puede realizar devolución de este producto, el mismo no posee garantia'\n    }else if(garanty<today){\n      content = 'La garantia del producto ha caducado'\n    } else {\n      let repayment: repayment = {\n        type: 'venta',\n        date: new Date(),\n        id_sell: this.sell.id_sell, \n        quantity: Number(this.formDevolucion.get('quantity_back')?.value),\n        price: this.sell_products[this.indexElementToBack].sell_price,\n        total: Number(this.formDevolucion.get('quantity_back')?.value) *\n          this.sell_products[this.indexElementToBack].sell_price,\n        coin: this.sell.coin,\n        exist_quantity: this.products[this.indexElementToBack].exist_quantity - Number(this.formDevolucion.get('quantity_back')?.value),\n        weighted_averages: Number((((this.products[this.indexElementToBack].sell_price *\n          this.products[this.indexElementToBack].exist_quantity) +\n          (this.comunicatorSvc.converterToMainCoin(this.sell_products[this.indexElementToBack].sell_price, this.sell.exchange) *\n            Number(this.formDevolucion.get('quantity_back')?.value))) /\n          (this.products[this.indexElementToBack].exist_quantity +\n            Number(this.formDevolucion.get('quantity_back')?.value))).toFixed(2)),\n        id_user: this.sell.id_user,\n        id_product: this.sell_products[this.indexElementToBack].id_product,\n      }\n      repayment.weighted_averages = (isNaN(repayment.weighted_averages)) ? 0 : repayment.weighted_averages\n      repayment.weighted_averages = this.comunicatorSvc.converterToSecondaryCoin(repayment.weighted_averages, this.sell.exchange)\n      this.devolucionesSvc.setRepaymentSell(repayment).subscribe(res => {\n         if (res.title.includes('Registrada')) {\n          this.repayments.push(repayment)\n         }\n          /*this.sell_products[this.indexElementToBack].quantity_back += Number(this.formDevolucion.get('quantity_back')?.value)\n          this.sell.total_sell -= (Number(this.formDevolucion.get('quantity_back')?.value) *\n            this.sell_products[this.indexElementToBack].sell_price)\n          this.products[this.indexElementToBack].sell_price = this.comunicatorSvc.converterToMainCoin(\n            repayment.weighted_averages, this.sell.exchange)\n\n          this.products[this.indexElementToBack].buy_price =\n            Number((((this.products[this.indexElementToBack].sell_price *\n              this.products[this.indexElementToBack].exist_quantity) -\n              (this.comunicatorSvc.converterToMainCoin(this.sell_products[this.indexElementToBack].sell_price, this.sell.exchange) *\n                Number(this.formDevolucion.get('quantity_back')?.value))) /\n              (this.products[this.indexElementToBack].exist_quantity -\n                Number(this.formDevolucion.get('quantity_back')?.value))).toFixed(2))\n          this.products[this.indexElementToBack].exist_quantity = repayment.exist_quantity\n          console.log(this.products[this.indexElementToBack].sell_price)\n          this.products[this.indexElementToBack].sell_price = (\n            this.products[this.indexElementToBack].exist_quantity === 0) ? 0 : this.products[this.indexElementToBack].sell_price\n          this.ventasSvc.updateSell(this.sell_products[this.indexElementToBack].id_sell, this.sell).subscribe(\n            res => console.log(res)\n          )\n          this.ventasSvc.updateProductsSell(this.sell_products[this.indexElementToBack].id_sell,\n            this.sell_products[this.indexElementToBack].id_product, this.sell_products[this.indexElementToBack]).subscribe(\n              res => console.log(res)\n            )\n          this.productosSvc.updateProducto(this.products[this.indexElementToBack].id_product,\n            this.products[this.indexElementToBack]).subscribe(res => console.log(res))\n        } */\n        console.log(res)\n        this.changeModal(res)\n        this.popUp?.nativeElement.showModal()\n      })\n    }\n    if (content !== '') {\n      let values: alert = {\n        icon: 'fa-regular fa-circle-xmark',\n        title: 'Ocurrió un error inesperado',\n        content: content\n      }\n      this.changeModal(values)\n      this.popUp?.nativeElement.showModal()\n    }\n  }\n\n  calcularSubtotal(index: number) {\n    let price = this.products[index].sell_price\n    let discount = this.products[index].discount\n    let quantity = this.sell_products[index].quantity_products\n    return Number(((price * quantity) - (Number((price * discount).toFixed(2)) * quantity)).toFixed(2))\n  }\n\n  calcularTotal() {\n    let total = 0\n    this.products.forEach((product: product, index: number) => {\n      total += this.calcularSubtotal(index)\n    });\n    return total\n  }\n  calcularDescuentoVenta() {\n    return Number((this.sell.discount * this.calcularTotal()).toFixed(2))\n  }\n  calcularImpuestoVenta() {\n    let montoImponible = 0\n    this.products.forEach((product: product, index: number) => {\n      if (product.impuest > 0) {\n        montoImponible += Number((product.impuest * this.calcularSubtotal(index)).toFixed(2))\n      }\n    })\n    return montoImponible\n  }\n  calcularCostosVenta(){\n    let total = 0\n    this.products.forEach((product: product, index: number) => {\n      total += product.buy_price*this.sell_products[index].quantity_products\n    });\n    return total\n  }\n  total() {\n    return Number((this.calcularTotal() + this.calcularImpuestoVenta() - this.calcularDescuentoVenta()).toFixed(2))\n  }\n  redirectToVentasRealizadas() {\n    this.location.back()\n  }\n  product(repayment: repayment) {\n    let name_product = ''\n    this.products.forEach((product: product) => {\n      if (product.id_product === repayment.id_product) {\n        name_product = product.name + ' ' + product.mark + ' ' + product.model\n      }\n    })\n    return name_product\n  }\n  acept() {\n    if (this.popUp?.nativeElement.children[1].textContent === 'Ocurrió un error inesperado') {\n      this.cancel(this.popUp)\n    } else {\n      this.cancel(this.popUp)\n      this.cancel(this.quantityBack)\n    }\n  }\n}\n","<div class=\"form-container\">\n    <div class=\"back\">\n    <button (click)=\"redirectToVentasRealizadas()\" class=\"form-button btn-save\"><i class=\"fas fa-reply\"></i>\n        &nbsp;Regresar</button>\n    </div>\n        <h3 class=\"form-title\">\n            &nbsp;Datos de la venta\n        </h3>\n    <div class=\"datos\">\n        <div>\n            <h3>DATOS DE VENTA</h3>\n            <p><strong>N° factura: </strong>{{sell.id_sell}}</p>\n            <p><strong>Fecha: </strong>{{sell.date|date:'dd/MM/yyyy'}} {{sell.time|date:'hh:mm:ss aaaa'}}</p>\n            <p><strong>Tipo de venta: </strong>{{sell.type_sell}}</p>\n        </div>\n        <div>\n            <h3>CAJA Y USUARIO</h3>\n            <p><strong>Caja: </strong>{{register_sell.name}}</p>\n            <p><strong>Vendedor: </strong>{{user_sell.names_user}} {{user_sell.last_names_user}}</p>\n            <p><strong>Cliente: </strong> {{client.names_client}} {{client.last_names_client}}</p>\n        </div>\n        <div>\n            <h3>TOTALES Y ESTADO</h3>\n            <p><strong>Total: </strong>{{sell.total_sell|currency:sell.coin+' '}}</p>\n            <p><strong>Pagado: </strong>{{sell.total_pay|currency:sell.coin+' '}}</p>\n            <p><strong>Estado:</strong> {{sell.state}}</p>\n            <p><strong>Costos de venta:</strong>{{calcularCostosVenta()|currency:sell.coin+' '}}</p>\n            <p><strong>Utilidad (ganancias): </strong>{{sell.total_sell-calcularCostosVenta()|currency:sell.coin+' '}}</p>\n        </div>\n       \n    </div>\n    <h3 class=\"form-title\">\n        &nbsp;Detalles de venta\n    </h3>\n    <div class=\"table-container\">\n        <div class=\"table-title\">\n            <h6>productos vendidos</h6>\n        </div>\n        <div class=\"table-body\">\n            <div class=\"table-responsive\">\n                <table class=\"table table-bordered\">\n                    <thead>\n                        <tr>\n                            <th>N°</th>\n                            <th>Código de barra</th>\n                            <th>Producto</th>\n                            <th>Cantidad</th>\n                            <th>Precio de venta</th>\n                            <th>Descuento</th>\n                            <th>Valor de descuento</th>\n                            <th>IVA</th>\n                            <th>Sub total</th>\n                            <th>Devolución</th>\n                        </tr>\n                    </thead>\n\n                    <tbody #tab>\n                        <tr *ngFor=\"let sell_product of sell_products; let i=index\">\n                            <td>{{i+1}}</td>\n                            <td *ngIf=\"products[i]!=undefined\">{{products[i].barcode}}</td>\n                            <td *ngIf=\"products[i]!=undefined\">\n                                {{products[i].name}}&nbsp;{{products[i].mark}}&nbsp;{{products[i].model}}&nbsp;</td>\n                            <td>{{sell_product.quantity_products}} </td>\n                            <td>{{sell_product.sell_price|currency:sell.coin+' '}}</td>\n                            <td>{{sell_product.discount_product|percent:'2.2-2'}}</td>\n                            <td>{{sell_product.discount_product*sell_product.sell_price|currency:sell.coin+' '}}</td>\n                            <td>{{sell_product.impuest|percent:'2.2-2'}}</td>\n                            <td>{{calcularSubtotal(i)|currency:sell.coin+' '}}</td>\n                            <td class=\"icon\" (click)=\"showModal(products[i],i)\">\n                                <i class=\"fas fa-truck-loading fa-fw\" style=\"color:#009688\"></i>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n    <div class=\"totales\">\n        <div>\n            <p><strong>SUBTOTAL </strong></p>\n            <p>+ {{calcularTotal()|currency:sell.coin+' '}}</p>\n        </div>\n        <div>\n            <p><strong>IVA </strong></p>\n            <p>+ {{calcularImpuestoVenta()|currency:sell.coin+' '}}</p>\n        </div>\n        <div>\n            <p><strong>DESCUENTO </strong></p>\n            <p>- {{calcularDescuentoVenta()|currency:sell.coin+' '}}</p>\n        </div>\n        <div>\n            <p><strong>TOTAL </strong></p>\n            <p>{{total()|currency:sell.coin+' '}}</p>\n        </div>\n    </div>\n    <div class=\"line\"></div>\n    <h3 class=\"form-title\">\n        &nbsp;Detalles de pagos\n    </h3>\n    <div class=\"table-container\">\n        <div class=\"table-title\">\n            <h6>Pagos realizados</h6>\n        </div>\n        <div class=\"table-body\">\n            <div class=\"table-responsive\">\n                <table class=\"table table-bordered\">\n                    <thead>\n                        <tr>\n                            <th>N°</th>\n                            <th>Fecha</th>\n                            <th>Tipo de venta</th>\n                            <th>Monto</th>\n                            <th>Referencia</th>\n                            <th>Vendedor</th>\n                            <th>caja</th>\n                        </tr>\n                    </thead>\n\n                    <tbody #tab>\n                       <tr *ngFor=\"let pay of pays; let i=index\">\n                        <td>{{i+1}}</td>\n                        <td>{{pay.date|date:'dd/MM/yyyy'}}</td>\n                        <td>{{pay.type}}</td> \n                        <td>{{pay.mount|currency:pay.coin+' '}}</td>\n                        <td>{{pay.reference}}</td>\n                        <td>{{user_pay[i].names_user}} {{user_pay[i].last_names_user}}</td>\n                        <td>{{registers_pay[i].name}}</td>\n                    </tr>\n                        \n                    </tbody> \n                </table>\n            </div>\n        </div>\n    </div>\n    <div class=\"line\"></div>\n    <h3 class=\"form-title\">\n        &nbsp;Detalles de devoluciones\n    </h3>\n    <div class=\"table-container\">\n        <div class=\"table-title\">\n            <h6>Devoluciones realizadas</h6>\n        </div>\n        <div class=\"table-body\">\n            <div class=\"table-responsive\">\n                <table class=\"table table-bordered\">\n                    <thead>\n                        <tr>\n                            <th>N°</th>\n                            <th>Fecha</th>\n                            <th>Producto</th>\n                            <th>Cantidad</th>\n                            <th>Precio de compra</th>\n                            <th>Total</th>\n                            <th>Vendedor</th>\n                            <th>caja</th>\n                        </tr>\n                    </thead>\n\n                    <tbody #tab>\n                       <tr *ngFor=\"let repayment of repayments; let i=index\">\n                        <td>{{i+1}}</td>\n                        <td>{{repayment.date|date:'dd/MM/yyyy'}}</td>\n                        <td>{{product(repayment)}}</td> \n                        <td>{{repayment.quantity}}</td>\n                        <td>{{repayment.price|currency:repayment.coin+' '}}</td>\n                        <td>{{repayment.total|currency:repayment.coin+' '}}</td>\n                    </tr>\n                        \n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n<dialog #quantity class=\"quantity\">\n    <div class=\"header\">\n        <h2 class=\"title\">Realizar devolución</h2>\n        <button class=\"btn-cerrar-dialog\" (click)=\"cancel(quantityBack)\">x</button>\n    </div>\n    <div class=\"form\" [formGroup]=\"formDevolucion\">\n        <div class=\"form-control\" [ngClass]=\"{'input-on-focus-success':verifyStyleInput(formDevolucion,'quantity_back')&&\n    elementHasFocus[7],'input-on-focus-fail':!verifyStyleInput(formDevolucion,'quantity_back')}\">\n            <label class=\"form-label\" [ngClass]=\"{'label-on-focus-down':\nelementHasFocus[7]&&positionLabel[7],\n'label-on-focus-up':\nelementHasFocus[7]&&!positionLabel[7]}\" [ngStyle]=\"animationLabel(formDevolucion,\n'quantity_back')\">\n                Cantidad a devolver\n            </label>\n            <input formControlName=\"quantity_back\" (focus)=\"isFocused(7,formDevolucion,'quantity_back')\"\n                (focusout)=\"isFocused(7,formDevolucion,'quantity_back')\" class=\"form-input\"\n                [ngStyle]=\"styleForeground(formDevolucion,'quantity_back')\" (keypress)=\"validate($event,false)\">\n        </div>\n    </div>\n    <div class=\"form-actions\">\n        <button class=\"form-button btn\"\n            [ngClass]=\"{'enable aceptar':formDevolucion.get('quantity_back')?.value.length>0}\"\n            (click)=\"registrarDevolucion()\">\n            <i class=\"fas fa-truck-loading fa-fw\"></i> &nbsp;&nbsp;REALIZAR DEVOLUCIÓN</button>\n        <button class=\"form-button btn enable\" (click)=\"cancel(quantityBack)\" style=\"color:#f44336\">\n            <i class=\"far fa-times-circle\"></i> &nbsp;&nbsp;CANCELAR</button>\n    </div>\n</dialog>\n<dialog class=\"dialog\" #popup>\n    <i class=\"fa-regular fa-circle-question\"></i>\n    <h3>¿Estas seguro?</h3>\n    <p>Lois datos seran guardados en el sistema</p>\n    <div>\n        <button class=\"form-button btn-save\" (click)=\"acept()\">\n            &nbsp;&nbsp;ACEPTAR</button>\n        <button *ngIf=\"this.popUp?.nativeElement.children[1].textContent === '¿Estás seguro?'\"\n            class=\"form-button btn-cancel\" (click)=\"cancel(popUp)\">\n            &nbsp;&nbsp;CANCELAR</button>\n    </div>\n</dialog>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}