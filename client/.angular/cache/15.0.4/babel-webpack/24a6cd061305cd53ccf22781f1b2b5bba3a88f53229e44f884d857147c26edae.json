{"ast":null,"code":"import { Alert } from \"src/app/utils/Alert\";\nexport class DinamicTable extends Alert {\n  constructor(renderer) {\n    super();\n    this.renderer = renderer;\n    this.numberPages = 0;\n    this.indexCurrentPage = 0;\n    this.numberRows = 0;\n  }\n  deleteChildren() {\n    let nodes = this.pagination?.nativeElement.childNodes;\n    if (nodes.length > 2) {\n      for (let index = 1; index < nodes.length - 1;) {\n        this.renderer.removeChild(this.pagination?.nativeElement, this.pagination?.nativeElement.children[1]);\n      }\n    }\n  }\n  AddDeleteStyles(classOne, classTwo) {\n    this.renderer.removeClass(this.currentPage, classOne);\n    this.renderer.addClass(this.currentPage, classTwo);\n  }\n  changePage(child, form, currentData, allData) {\n    this.AddDeleteStyles('selected', 'items');\n    this.currentPage = child;\n    this.indexCurrentPage = Number(child.value);\n    this.AddDeleteStyles('items', 'selected');\n    this.getInfo(form, currentData, allData);\n    this.createPages(form, currentData, allData);\n  }\n  addClassPages(child, value) {\n    this.renderer.addClass(child, 'dataTables_info'); //\n    this.renderer.addClass(child, 'page-item'); //añado las clases alos elementos\n    this.renderer.addClass(child, 'active'); //\n    this.renderer.appendChild(child, value); //le agrego el texto al elemento\n  }\n\n  addEventToChild(child, form, currentData, allData, i) {\n    let value = this.renderer.createText((i + 1).toString());\n    this.renderer.setProperty(child, 'value', i);\n    this.renderer.listen(child, 'click', event => {\n      this.changePage(child, form, currentData, allData);\n    });\n    switch (this.indexCurrentPage) {\n      case this.numberPages:\n        this.indexCurrentPage = this.numberPages - 1;\n        break;\n      case i:\n        this.renderer.addClass(child, 'selected');\n        this.currentPage = child;\n        break;\n      default:\n        this.renderer.addClass(child, 'items');\n        break;\n    }\n    return value;\n  }\n  createPages(form, currentData, allData) {\n    if (this.numberRows != form.get('numberRows')?.value) this.indexCurrentPage = 0;\n    this.numberRows = form.get('numberRows')?.value;\n    this.deleteChildren(); //elimino todas las paginas actuales\n    this.numberPages = Math.trunc((currentData.length - 1) / this.numberRows) + 1;\n    //itero sobre el numero de paginas a crear\n    for (let i = 0; i < (this.numberPages > 7 ? 7 : this.numberPages); i++) {\n      const child = this.renderer.createElement('li'); //creo la pagina\n      let value;\n      if (this.numberPages <= 7) {\n        value = this.addEventToChild(child, form, currentData, allData, i);\n      } else {\n        switch (i) {\n          case 0:\n            value = this.addEventToChild(child, form, currentData, allData, i);\n            break;\n          case 1:\n            if (this.indexCurrentPage >= 4) {\n              value = this.renderer.createText('...'.toString());\n            } else {\n              value = this.addEventToChild(child, form, currentData, allData, i);\n            }\n            break;\n          case 5:\n            if (this.numberPages - this.indexCurrentPage > 4) {\n              value = this.renderer.createText('...'.toString());\n            } else {\n              value = this.addEventToChild(child, form, currentData, allData, this.numberPages - 2);\n            }\n            break;\n          case 6:\n            value = this.addEventToChild(child, form, currentData, allData, this.numberPages - 1);\n            break;\n          default:\n            if (this.indexCurrentPage >= 4 && this.numberPages - this.indexCurrentPage > 3) {\n              value = this.addEventToChild(child, form, currentData, allData, this.indexCurrentPage - 3 + i);\n            } else if (this.numberPages - this.indexCurrentPage < 4) {\n              value = this.addEventToChild(child, form, currentData, allData, this.numberPages - 7 + i);\n            } else {\n              value = this.addEventToChild(child, form, currentData, allData, i);\n            }\n            break;\n        }\n      }\n      this.renderer.addClass(child, 'dataTables_info'); //\n      this.renderer.addClass(child, 'page-item'); //añado las clases alos elementos\n      this.renderer.addClass(child, 'active'); //\n      this.renderer.appendChild(child, value); //le agrego el texto al elemento\n      this.renderer.insertBefore(this.pagination?.nativeElement, child, this.next?.nativeElement); //inserto el elento en la vista\n      this.getInfo(form, currentData, allData);\n    }\n  }\n  getInfo(form, currentData, allData) {\n    let msj = 'mostrando ';\n    let nodes = this.info?.nativeElement.childNodes;\n    let inicio = Number(this.currentPage.value) * Number(form.get('numberRows')?.value) + 1;\n    let fin = inicio + Number(form.get('numberRows')?.value) - 1;\n    for (let index = 0; index < nodes.length;) {\n      this.renderer.removeChild(this.info?.nativeElement, this.info?.nativeElement.children[0]);\n    }\n    if (currentData.length < fin) {\n      if (form.get(\"search\")?.value !== '' && form.get(\"search\")?.value !== null) {\n        msj = msj.concat('del ', String(inicio), ' al ', String(currentData.length), \" de \", String(currentData.length), \" entradas \", \" (filtradas de \", String(allData.length), \" en total)\");\n      } else {\n        msj = msj.concat('del ', String(inicio), ' al ', String(allData.length), \" de \", String(allData.length), \" entradas\");\n      }\n    } else {\n      if (form.get(\"search\")?.value !== '' && form.get(\"search\")?.value !== null) {\n        msj = msj.concat('del ', String(inicio), ' al ', String(fin), ' de ', String(currentData.length), \" entradas\", \" (filtradas de \", String(allData.length), \" en total)\");\n      } else {\n        msj = msj.concat('del ', String(inicio), ' al ', String(fin), ' de ', String(allData.length), \" entradas\");\n      }\n    }\n    const child = this.renderer.createElement('p');\n    const text = this.renderer.createText(msj);\n    this.renderer.appendChild(child, text);\n    this.renderer.addClass(child, 'dataTables_info');\n    this.renderer.appendChild(this.info?.nativeElement, child);\n  }\n  getValuesToPipe(form) {\n    let argsPipe = {\n      search: form.get('search')?.value,\n      indexCurrentPage: this.currentPage === undefined ? 0 : Number(this.currentPage.value),\n      numberRows: Number(form.get('numberRows')?.value)\n    };\n    return argsPipe;\n  }\n  nextPage(form, currentData, allData) {\n    let nodes = this.pagination?.nativeElement.children;\n    for (let i = 0; i < nodes.length; i++) {\n      if (nodes[i].value === this.currentPage.value + 1) {\n        this.changePage(nodes[i], form, currentData, allData);\n        break;\n      }\n    }\n  }\n  previousPage(form, currentData, allData) {\n    let nodes = this.pagination?.nativeElement.children;\n    for (let i = 1; i < nodes.length; i++) {\n      if (nodes[i].value === this.currentPage.value - 1) {\n        this.changePage(nodes[i], form, currentData, allData);\n        break;\n      }\n    }\n  }\n}","map":{"version":3,"mappings":"AAEA,SAASA,KAAK,QAAQ,qBAAqB;AAE3C,OAAM,MAAOC,YAAa,SAAQD,KAAK;EAQrCE,YAA+BC,QAAmB;IAChD,KAAK,EAAE;IADsB,aAAQ,GAARA,QAAQ;IAPvC,gBAAW,GAAW,CAAC;IAEvB,qBAAgB,GAAW,CAAC;IAC5B,eAAU,GAAW,CAAC;EAMtB;EAEAC,cAAc;IACZ,IAAIC,KAAK,GAAG,IAAI,CAACC,UAAU,EAAEC,aAAa,CAACC,UAAU;IACrD,IAAIH,KAAK,CAACI,MAAM,GAAG,CAAC,EAAE;MACpB,KAAK,IAAIC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGL,KAAK,CAACI,MAAM,GAAG,CAAC,GAAG;QAC7C,IAAI,CAACN,QAAQ,CAACQ,WAAW,CAAC,IAAI,CAACL,UAAU,EAAEC,aAAa,EACtD,IAAI,CAACD,UAAU,EAAEC,aAAa,CAACK,QAAQ,CAAC,CAAC,CAAC,CAAC;;;EAGnD;EAEAC,eAAe,CAACC,QAAgB,EAAEC,QAAgB;IAChD,IAAI,CAACZ,QAAQ,CAACa,WAAW,CAAC,IAAI,CAACC,WAAW,EAAEH,QAAQ,CAAC;IACrD,IAAI,CAACX,QAAQ,CAACe,QAAQ,CAAC,IAAI,CAACD,WAAW,EAAEF,QAAQ,CAAC;EACpD;EACAI,UAAU,CAACC,KAAU,EAAEC,IAAe,EAAEC,WAAkB,EAAEC,OAAc;IACxE,IAAI,CAACV,eAAe,CAAC,UAAU,EAAE,OAAO,CAAC;IACzC,IAAI,CAACI,WAAW,GAAGG,KAAK;IACxB,IAAI,CAACI,gBAAgB,GAAGC,MAAM,CAACL,KAAK,CAACM,KAAK,CAAC;IAC3C,IAAI,CAACb,eAAe,CAAC,OAAO,EAAE,UAAU,CAAC;IACzC,IAAI,CAACc,OAAO,CAACN,IAAI,EAAEC,WAAW,EAAEC,OAAO,CAAC;IACxC,IAAI,CAACK,WAAW,CAACP,IAAI,EAAEC,WAAW,EAAEC,OAAO,CAAC;EAC9C;EAEAM,aAAa,CAACT,KAAU,EAAEM,KAAa;IACrC,IAAI,CAACvB,QAAQ,CAACe,QAAQ,CAACE,KAAK,EAAE,iBAAiB,CAAC;IAChD,IAAI,CAACjB,QAAQ,CAACe,QAAQ,CAACE,KAAK,EAAE,WAAW,CAAC;IAC1C,IAAI,CAACjB,QAAQ,CAACe,QAAQ,CAACE,KAAK,EAAE,QAAQ,CAAC;IACvC,IAAI,CAACjB,QAAQ,CAAC2B,WAAW,CAACV,KAAK,EAAEM,KAAK,CAAC;EACzC;;EAEAK,eAAe,CAACX,KAAU,EAAEC,IAAe,EAAEC,WAAkB,EAAEC,OAAc,EAAES,CAAS;IACxF,IAAIN,KAAK,GAAG,IAAI,CAACvB,QAAQ,CAAC8B,UAAU,CAAC,CAACD,CAAC,GAAG,CAAC,EAAEE,QAAQ,EAAE,CAAC;IACxD,IAAI,CAAC/B,QAAQ,CAACgC,WAAW,CAACf,KAAK,EAAE,OAAO,EAAEY,CAAC,CAAC;IAC5C,IAAI,CAAC7B,QAAQ,CAACiC,MAAM,CAAChB,KAAK,EAAE,OAAO,EAAGiB,KAAK,IAAI;MAC7C,IAAI,CAAClB,UAAU,CAACC,KAAK,EAAEC,IAAI,EAAEC,WAAW,EAAEC,OAAO,CAAC;IACpD,CAAC,CAAC;IACF,QAAQ,IAAI,CAACC,gBAAgB;MAC3B,KAAK,IAAI,CAACc,WAAW;QACnB,IAAI,CAACd,gBAAgB,GAAG,IAAI,CAACc,WAAW,GAAG,CAAC;QAC5C;MACF,KAAKN,CAAC;QACJ,IAAI,CAAC7B,QAAQ,CAACe,QAAQ,CAACE,KAAK,EAAE,UAAU,CAAC;QACzC,IAAI,CAACH,WAAW,GAAGG,KAAK;QACxB;MACF;QACE,IAAI,CAACjB,QAAQ,CAACe,QAAQ,CAACE,KAAK,EAAE,OAAO,CAAC;QACtC;IAAM;IAGV,OAAOM,KAAK;EACd;EACAE,WAAW,CAACP,IAAe,EAAEC,WAAkB,EAAEC,OAAc;IAC7D,IAAI,IAAI,CAACgB,UAAU,IAAIlB,IAAI,CAACmB,GAAG,CAAC,YAAY,CAAC,EAAEd,KAAK,EAClD,IAAI,CAACF,gBAAgB,GAAG,CAAC;IAC3B,IAAI,CAACe,UAAU,GAAGlB,IAAI,CAACmB,GAAG,CAAC,YAAY,CAAC,EAAEd,KAAK;IAC/C,IAAI,CAACtB,cAAc,EAAE,CAAC,CAAC;IACvB,IAAI,CAACkC,WAAW,GAAGG,IAAI,CAACC,KAAK,CAAC,CAACpB,WAAW,CAACb,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC8B,UAAU,CAAC,GAAG,CAAC;IAC7E;IACA,KAAK,IAAIP,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAK,IAAI,CAACM,WAAW,GAAG,CAAC,GAAI,CAAC,GAAG,IAAI,CAACA,WAAW,CAAC,EAAEN,CAAC,EAAE,EAAE;MACxE,MAAMZ,KAAK,GAAG,IAAI,CAACjB,QAAQ,CAACwC,aAAa,CAAC,IAAI,CAAC;MAC/C,IAAIjB,KAAK;MACT,IAAI,IAAI,CAACY,WAAW,IAAG,CAAC,EAAE;QACxBZ,KAAK,GAAG,IAAI,CAACK,eAAe,CAACX,KAAK,EAAEC,IAAI,EAAEC,WAAW,EAAEC,OAAO,EAAES,CAAC,CAAC;OACnE,MAAM;QACL,QAAQA,CAAC;UACP,KAAK,CAAC;YACJN,KAAK,GAAG,IAAI,CAACK,eAAe,CAACX,KAAK,EAAEC,IAAI,EAAEC,WAAW,EAAEC,OAAO,EAAES,CAAC,CAAC;YAClE;UACF,KAAK,CAAC;YACJ,IAAI,IAAI,CAACR,gBAAgB,IAAI,CAAC,EAAE;cAC9BE,KAAK,GAAG,IAAI,CAACvB,QAAQ,CAAC8B,UAAU,CAAE,KAAK,CAAEC,QAAQ,EAAE,CAAC;aACrD,MAAM;cACLR,KAAK,GAAG,IAAI,CAACK,eAAe,CAACX,KAAK,EAAEC,IAAI,EAAEC,WAAW,EAAEC,OAAO,EAAES,CAAC,CAAC;;YAEpE;UACF,KAAK,CAAC;YACJ,IAAI,IAAI,CAACM,WAAW,GAAG,IAAI,CAACd,gBAAgB,GAAG,CAAC,EAAE;cAChDE,KAAK,GAAG,IAAI,CAACvB,QAAQ,CAAC8B,UAAU,CAAE,KAAK,CAAEC,QAAQ,EAAE,CAAC;aACrD,MAAM;cACLR,KAAK,GAAG,IAAI,CAACK,eAAe,CAACX,KAAK,EAAEC,IAAI,EAAEC,WAAW,EAAEC,OAAO,EAAE,IAAI,CAACe,WAAW,GAAG,CAAC,CAAC;;YAEvF;UACF,KAAK,CAAC;YACJZ,KAAK,GAAG,IAAI,CAACK,eAAe,CAACX,KAAK,EAAEC,IAAI,EAAEC,WAAW,EAAEC,OAAO,EAAE,IAAI,CAACe,WAAW,GAAG,CAAC,CAAC;YACrF;UACF;YACE,IAAI,IAAI,CAACd,gBAAgB,IAAI,CAAC,IAAI,IAAI,CAACc,WAAW,GAAC,IAAI,CAACd,gBAAgB,GAAC,CAAC,EAAE;cAC1EE,KAAK,GAAG,IAAI,CAACK,eAAe,CAACX,KAAK,EAAEC,IAAI,EAAEC,WAAW,EAAEC,OAAO,EAAE,IAAI,CAACC,gBAAgB,GAAC,CAAC,GAACQ,CAAC,CAAC;aAC3F,MAAK,IAAG,IAAI,CAACM,WAAW,GAAG,IAAI,CAACd,gBAAgB,GAAG,CAAC,EAAC;cACpDE,KAAK,GAAG,IAAI,CAACK,eAAe,CAACX,KAAK,EAAEC,IAAI,EAAEC,WAAW,EAAEC,OAAO,EAAE,IAAI,CAACe,WAAW,GAAC,CAAC,GAACN,CAAC,CAAC;aACtF,MAAM;cACLN,KAAK,GAAG,IAAI,CAACK,eAAe,CAACX,KAAK,EAAEC,IAAI,EAAEC,WAAW,EAAEC,OAAO,EAAES,CAAC,CAAC;;YAGpE;QAAM;;MAKZ,IAAI,CAAC7B,QAAQ,CAACe,QAAQ,CAACE,KAAK,EAAE,iBAAiB,CAAC;MAChD,IAAI,CAACjB,QAAQ,CAACe,QAAQ,CAACE,KAAK,EAAE,WAAW,CAAC;MAC1C,IAAI,CAACjB,QAAQ,CAACe,QAAQ,CAACE,KAAK,EAAE,QAAQ,CAAC;MACvC,IAAI,CAACjB,QAAQ,CAAC2B,WAAW,CAACV,KAAK,EAAEM,KAAK,CAAC;MACvC,IAAI,CAACvB,QAAQ,CAACyC,YAAY,CAAC,IAAI,CAACtC,UAAU,EAAEC,aAAa,EACvDa,KAAK,EAAE,IAAI,CAACyB,IAAI,EAAEtC,aAAa,CAAC;MAElC,IAAI,CAACoB,OAAO,CAACN,IAAI,EAAEC,WAAW,EAAEC,OAAO,CAAC;;EAG5C;EAEAI,OAAO,CAACN,IAAe,EAAEC,WAAkB,EAAEC,OAAc;IACzD,IAAIuB,GAAG,GAAW,YAAY;IAC9B,IAAIzC,KAAK,GAAG,IAAI,CAAC0C,IAAI,EAAExC,aAAa,CAACC,UAAU;IAC/C,IAAIwC,MAAM,GAAGvB,MAAM,CAAC,IAAI,CAACR,WAAW,CAACS,KAAK,CAAC,GACzCD,MAAM,CAACJ,IAAI,CAACmB,GAAG,CAAC,YAAY,CAAC,EAAEd,KAAK,CAAC,GAAG,CAAC;IAC3C,IAAIuB,GAAG,GAAGD,MAAM,GACdvB,MAAM,CAACJ,IAAI,CAACmB,GAAG,CAAC,YAAY,CAAC,EAAEd,KAAK,CAAC,GAAG,CAAC;IAC3C,KAAK,IAAIhB,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGL,KAAK,CAACI,MAAM,GAAG;MACzC,IAAI,CAACN,QAAQ,CAACQ,WAAW,CAAC,IAAI,CAACoC,IAAI,EAAExC,aAAa,EAChD,IAAI,CAACwC,IAAI,EAAExC,aAAa,CAACK,QAAQ,CAAC,CAAC,CAAC,CAAC;;IAEzC,IAAIU,WAAW,CAACb,MAAM,GAAGwC,GAAG,EAAE;MAC5B,IAAI5B,IAAI,CAACmB,GAAG,CAAC,QAAQ,CAAC,EAAEd,KAAK,KAAK,EAAE,IAClCL,IAAI,CAACmB,GAAG,CAAC,QAAQ,CAAC,EAAEd,KAAK,KAAK,IAAI,EAAE;QACpCoB,GAAG,GAAGA,GAAG,CAACI,MAAM,CAAC,MAAM,EAAEC,MAAM,CAACH,MAAM,CAAC,EACrC,MAAM,EAAEG,MAAM,CAAC7B,WAAW,CAACb,MAAM,CAAC,EAAE,MAAM,EAC1C0C,MAAM,CAAC7B,WAAW,CAACb,MAAM,CAAC,EAAE,YAAY,EACxC,iBAAiB,EAAE0C,MAAM,CAAC5B,OAAO,CAACd,MAAM,CAAC,EAAE,YAAY,CAAC;OAC3D,MAAM;QACLqC,GAAG,GAAGA,GAAG,CAACI,MAAM,CAAC,MAAM,EAAEC,MAAM,CAACH,MAAM,CAAC,EACrC,MAAM,EAAEG,MAAM,CAAC5B,OAAO,CAACd,MAAM,CAAC,EAAE,MAAM,EACtC0C,MAAM,CAAC5B,OAAO,CAACd,MAAM,CAAC,EAAE,WAAW,CAAC;;KAGzC,MAAM;MACL,IAAIY,IAAI,CAACmB,GAAG,CAAC,QAAQ,CAAC,EAAEd,KAAK,KAAK,EAAE,IAC/BL,IAAI,CAACmB,GAAG,CAAC,QAAQ,CAAC,EAAEd,KAAK,KAAK,IAAI,EAAE;QACvCoB,GAAG,GAAGA,GAAG,CAACI,MAAM,CAAC,MAAM,EAAEC,MAAM,CAACH,MAAM,CAAC,EACrC,MAAM,EAAEG,MAAM,CAACF,GAAG,CAAC,EAAE,MAAM,EAC3BE,MAAM,CAAC7B,WAAW,CAACb,MAAM,CAAC,EAAE,WAAW,EACvC,iBAAiB,EAAE0C,MAAM,CAAC5B,OAAO,CAACd,MAAM,CAAC,EAAE,YAAY,CAAC;OAC3D,MAAM;QACLqC,GAAG,GAAGA,GAAG,CAACI,MAAM,CAAC,MAAM,EAAEC,MAAM,CAACH,MAAM,CAAC,EACrC,MAAM,EAAEG,MAAM,CAACF,GAAG,CAAC,EAAE,MAAM,EAC3BE,MAAM,CAAC5B,OAAO,CAACd,MAAM,CAAC,EAAE,WAAW,CAAC;;;IAG1C,MAAMW,KAAK,GAAG,IAAI,CAACjB,QAAQ,CAACwC,aAAa,CAAC,GAAG,CAAC;IAC9C,MAAMS,IAAI,GAAG,IAAI,CAACjD,QAAQ,CAAC8B,UAAU,CAACa,GAAG,CAAC;IAC1C,IAAI,CAAC3C,QAAQ,CAAC2B,WAAW,CAACV,KAAK,EAAEgC,IAAI,CAAC;IACtC,IAAI,CAACjD,QAAQ,CAACe,QAAQ,CAACE,KAAK,EAAE,iBAAiB,CAAC;IAChD,IAAI,CAACjB,QAAQ,CAAC2B,WAAW,CAAC,IAAI,CAACiB,IAAI,EAAExC,aAAa,EAAEa,KAAK,CAAC;EAC5D;EAEAiC,eAAe,CAAChC,IAAe;IAC7B,IAAIiC,QAAQ,GAAG;MACbC,MAAM,EAAElC,IAAI,CAACmB,GAAG,CAAC,QAAQ,CAAC,EAAEd,KAAK;MACjCF,gBAAgB,EAAG,IAAI,CAACP,WAAW,KAAKuC,SAAS,GAC/C,CAAC,GAAG/B,MAAM,CAAC,IAAI,CAACR,WAAW,CAACS,KAAK,CAAC;MACpCa,UAAU,EAAEd,MAAM,CAACJ,IAAI,CAACmB,GAAG,CAAC,YAAY,CAAC,EAAEd,KAAK;KACjD;IACD,OAAO4B,QAAQ;EACjB;EACAG,QAAQ,CAACpC,IAAe,EAAEC,WAAkB,EAAEC,OAAc;IAC1D,IAAIlB,KAAK,GAAG,IAAI,CAACC,UAAU,EAAEC,aAAa,CAACK,QAAQ;IACnD,KAAI,IAAIoB,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC3B,KAAK,CAACI,MAAM,EAACuB,CAAC,EAAE,EAAC;MAC7B,IAAG3B,KAAK,CAAC2B,CAAC,CAAC,CAACN,KAAK,KAAG,IAAI,CAACT,WAAW,CAACS,KAAK,GAAC,CAAC,EAAC;QAC3C,IAAI,CAACP,UAAU,CAACd,KAAK,CAAC2B,CAAC,CAAC,EACtBX,IAAI,EAAEC,WAAW,EAAEC,OAAO,CAAC;QAC7B;;;EAGN;EACAmC,YAAY,CAACrC,IAAe,EAAEC,WAAkB,EAAEC,OAAc;IAC9D,IAAIlB,KAAK,GAAG,IAAI,CAACC,UAAU,EAAEC,aAAa,CAACK,QAAQ;IACnD,KAAI,IAAIoB,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC3B,KAAK,CAACI,MAAM,EAACuB,CAAC,EAAE,EAAC;MAC7B,IAAG3B,KAAK,CAAC2B,CAAC,CAAC,CAACN,KAAK,KAAG,IAAI,CAACT,WAAW,CAACS,KAAK,GAAC,CAAC,EAAC;QAC3C,IAAI,CAACP,UAAU,CAACd,KAAK,CAAC2B,CAAC,CAAC,EACtBX,IAAI,EAAEC,WAAW,EAAEC,OAAO,CAAC;QAC7B;;;EAGN","names":["Alert","DinamicTable","constructor","renderer","deleteChildren","nodes","pagination","nativeElement","childNodes","length","index","removeChild","children","AddDeleteStyles","classOne","classTwo","removeClass","currentPage","addClass","changePage","child","form","currentData","allData","indexCurrentPage","Number","value","getInfo","createPages","addClassPages","appendChild","addEventToChild","i","createText","toString","setProperty","listen","event","numberPages","numberRows","get","Math","trunc","createElement","insertBefore","next","msj","info","inicio","fin","concat","String","text","getValuesToPipe","argsPipe","search","undefined","nextPage","previousPage"],"sourceRoot":"","sources":["/home/luis/Documentos/systems vs code/inventary-system/client/src/app/utils/DinamicTable.ts"],"sourcesContent":["import { ElementRef, Renderer2, ViewChild } from \"@angular/core\";\nimport { FormGroup } from \"@angular/forms\";\nimport { Alert } from \"src/app/utils/Alert\";\n\nexport class DinamicTable extends Alert {\n  numberPages: number = 0;\n  currentPage?: any;\n  indexCurrentPage: number = 0\n  numberRows: number = 0\n  protected pagination?: ElementRef | undefined;\n  protected next?: ElementRef | undefined;\n  protected info?: ElementRef | undefined;\n  constructor(protected override renderer: Renderer2) {\n    super()\n  }\n\n  deleteChildren() {\n    let nodes = this.pagination?.nativeElement.childNodes;\n    if (nodes.length > 2) {\n      for (let index = 1; index < nodes.length - 1;) {\n        this.renderer.removeChild(this.pagination?.nativeElement,\n          this.pagination?.nativeElement.children[1])\n      }\n    }\n  }\n\n  AddDeleteStyles(classOne: string, classTwo: string) {\n    this.renderer.removeClass(this.currentPage, classOne)\n    this.renderer.addClass(this.currentPage, classTwo)\n  }\n  changePage(child: any, form: FormGroup, currentData: any[], allData: any[]) {\n    this.AddDeleteStyles('selected', 'items')\n    this.currentPage = child;\n    this.indexCurrentPage = Number(child.value)\n    this.AddDeleteStyles('items', 'selected')\n    this.getInfo(form, currentData, allData);\n    this.createPages(form, currentData, allData)\n  }\n  \n  addClassPages(child: any, value: number) {\n    this.renderer.addClass(child, 'dataTables_info')//\n    this.renderer.addClass(child, 'page-item')//añado las clases alos elementos\n    this.renderer.addClass(child, 'active')//\n    this.renderer.appendChild(child, value)//le agrego el texto al elemento\n  }\n\n  addEventToChild(child: any, form: FormGroup, currentData: any[], allData: any[], i: number) {\n    let value = this.renderer.createText((i + 1).toString())\n    this.renderer.setProperty(child, 'value', i)\n    this.renderer.listen(child, 'click', (event) => {\n      this.changePage(child, form, currentData, allData);\n    })\n    switch (this.indexCurrentPage) {\n      case this.numberPages:\n        this.indexCurrentPage = this.numberPages - 1\n        break;\n      case i:\n        this.renderer.addClass(child, 'selected')\n        this.currentPage = child;\n        break;\n      default:\n        this.renderer.addClass(child, 'items')\n        break;\n    }\n\n    return value;\n  }\n  createPages(form: FormGroup, currentData: any[], allData: any[]) {\n    if (this.numberRows != form.get('numberRows')?.value)\n      this.indexCurrentPage = 0;\n    this.numberRows = form.get('numberRows')?.value\n    this.deleteChildren(); //elimino todas las paginas actuales\n    this.numberPages = Math.trunc((currentData.length - 1) / this.numberRows) + 1\n    //itero sobre el numero de paginas a crear\n    for (let i = 0; i < ((this.numberPages > 7) ? 7 : this.numberPages); i++) {\n      const child = this.renderer.createElement('li')//creo la pagina\n      let value;\n      if (this.numberPages <=7) {\n        value = this.addEventToChild(child, form, currentData, allData, i)\n      } else {\n        switch (i) {\n          case 0:\n            value = this.addEventToChild(child, form, currentData, allData, i)\n            break;\n          case 1:\n            if (this.indexCurrentPage >= 4) {\n              value = this.renderer.createText(('...').toString())\n            } else {\n              value = this.addEventToChild(child, form, currentData, allData, i)\n            }\n            break;\n          case 5:\n            if (this.numberPages - this.indexCurrentPage > 4) {\n              value = this.renderer.createText(('...').toString())\n            } else {\n              value = this.addEventToChild(child, form, currentData, allData, this.numberPages - 2)\n            }\n            break;\n          case 6:\n            value = this.addEventToChild(child, form, currentData, allData, this.numberPages - 1)\n            break;\n          default:\n            if (this.indexCurrentPage >= 4 && this.numberPages-this.indexCurrentPage>3) {\n              value = this.addEventToChild(child, form, currentData, allData, this.indexCurrentPage-3+i)\n            }else if(this.numberPages - this.indexCurrentPage < 4){\n              value = this.addEventToChild(child, form, currentData, allData, this.numberPages-7+i)\n            } else {\n              value = this.addEventToChild(child, form, currentData, allData, i)\n\n            }\n            break;\n        }\n\n      }\n      \n      this.renderer.addClass(child, 'dataTables_info')//\n      this.renderer.addClass(child, 'page-item')//añado las clases alos elementos\n      this.renderer.addClass(child, 'active')//\n      this.renderer.appendChild(child, value)//le agrego el texto al elemento\n      this.renderer.insertBefore(this.pagination?.nativeElement,\n        child, this.next?.nativeElement)//inserto el elento en la vista\n\n      this.getInfo(form, currentData, allData);\n      \n    }\n  }\n\n  getInfo(form: FormGroup, currentData: any[], allData: any[]) {\n    let msj: string = 'mostrando ';\n    let nodes = this.info?.nativeElement.childNodes;\n    let inicio = Number(this.currentPage.value) *\n      Number(form.get('numberRows')?.value) + 1\n    let fin = inicio +\n      Number(form.get('numberRows')?.value) - 1\n    for (let index = 0; index < nodes.length;) {\n      this.renderer.removeChild(this.info?.nativeElement,\n        this.info?.nativeElement.children[0])\n    }\n    if (currentData.length < fin) {\n      if (form.get(\"search\")?.value !== '' &&\n        form.get(\"search\")?.value !== null) {\n        msj = msj.concat('del ', String(inicio),\n          ' al ', String(currentData.length), \" de \",\n          String(currentData.length), \" entradas \",\n          \" (filtradas de \", String(allData.length), \" en total)\")\n      } else {\n        msj = msj.concat('del ', String(inicio),\n          ' al ', String(allData.length), \" de \",\n          String(allData.length), \" entradas\")\n      }\n\n    } else {\n      if (form.get(\"search\")?.value !== ''\n        && form.get(\"search\")?.value !== null) {\n        msj = msj.concat('del ', String(inicio),\n          ' al ', String(fin), ' de ',\n          String(currentData.length), \" entradas\",\n          \" (filtradas de \", String(allData.length), \" en total)\")\n      } else {\n        msj = msj.concat('del ', String(inicio),\n          ' al ', String(fin), ' de ',\n          String(allData.length), \" entradas\")\n      }\n    }\n    const child = this.renderer.createElement('p')\n    const text = this.renderer.createText(msj)\n    this.renderer.appendChild(child, text)\n    this.renderer.addClass(child, 'dataTables_info')\n    this.renderer.appendChild(this.info?.nativeElement, child)\n  }\n\n  getValuesToPipe(form: FormGroup): any {\n    let argsPipe = {\n      search: form.get('search')?.value,\n      indexCurrentPage: (this.currentPage === undefined) ?\n        0 : Number(this.currentPage.value),\n      numberRows: Number(form.get('numberRows')?.value)\n    }\n    return argsPipe;\n  }\n  nextPage(form: FormGroup, currentData: any[], allData: any[]) {\n    let nodes = this.pagination?.nativeElement.children;\n    for(let i=0;i<nodes.length;i++){\n      if(nodes[i].value===this.currentPage.value+1){\n        this.changePage(nodes[i],\n          form, currentData, allData);\n        break;\n      }\n    }\n  }\n  previousPage(form: FormGroup, currentData: any[], allData: any[]) {\n    let nodes = this.pagination?.nativeElement.children;\n    for(let i=1;i<nodes.length;i++){\n      if(nodes[i].value===this.currentPage.value-1){\n        this.changePage(nodes[i],\n          form, currentData, allData);\n        break;\n      }\n    }\n  }\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}