{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { DinamicTable } from 'src/app/utils/DinamicTable';\nlet DetallesKardexComponent = class DetallesKardexComponent extends DinamicTable {\n  constructor(routes, comunicatorSvc, renderer, route, location, ventasSvc, comprasSvc, devolucionesSvc, coinsSvc, kardexSvc) {\n    super(renderer);\n    this.routes = routes;\n    this.comunicatorSvc = comunicatorSvc;\n    this.renderer = renderer;\n    this.route = route;\n    this.location = location;\n    this.ventasSvc = ventasSvc;\n    this.comprasSvc = comprasSvc;\n    this.devolucionesSvc = devolucionesSvc;\n    this.coinsSvc = coinsSvc;\n    this.kardexSvc = kardexSvc;\n    this.title = [];\n  }\n  ngOnInit() {\n    setTimeout(() => {\n      /* Obtengo la ruta actual y la transformo para obtener el titulo del componente*/\n      this.ruta = this.routes.url.slice(this.routes.url.slice(1).indexOf('/') + 2, this.routes.url.lastIndexOf('?'));\n      this.title.push(\"fas fa-pallet fa-fw\"); //aa単ado el icono del titulo al array\n      this.title.push(decodeURI(this.ruta).toUpperCase()); //a単ado el titulo al array\n      this.comunicatorSvc.setTitleComponent(this.title);\n    });\n    this.coinsSvc.getMainCoin().subscribe(res => {\n      if (res instanceof Array) this.mainCoin = res[0];\n    });\n    this.route.queryParams.subscribe(params => {\n      this.comprasSvc.getProductBuy(params['id'], params['id_product']).subscribe(res => {\n        if (res instanceof Array) this.productOperation = res[0];\n      });\n      this.ventasSvc.getProductSell(params['id'], params['id_product']).subscribe(res => {\n        if (res instanceof Array) this.productOperation = res[0];\n      });\n      this.devolucionesSvc.getRepayment(params['id']).subscribe(res => {\n        if (res instanceof Array) {\n          if (res[0].id_buy !== undefined) {\n            this.comprasSvc.getProductBuy(res[0].id_buy, params['id_product']).subscribe(res => {\n              if (res instanceof Array) this.productOperation = res[0];\n            });\n          }\n          if (res[0].id_sell !== undefined) {\n            this.ventasSvc.getProductSell(res[0].id_sell, params['id_product']).subscribe(res => {\n              if (res instanceof Array) this.productOperation = res[0];\n            });\n          }\n        }\n      });\n      this.kardexSvc.getKardexById(params['type'], params['id']).subscribe(res => {\n        if (res instanceof Array) {\n          let aux = res;\n          this.kardex = aux[0];\n          this.product = aux[0];\n        }\n      });\n    });\n  }\n  calcularMontoImponible(price) {\n    let price_wiht_discount = Number((price - Number((price * this.productOperation.discount_product).toFixed(2))).toFixed(2));\n    let montoImponible = Number((this.productOperation.impuest * price_wiht_discount).toFixed(2));\n    return montoImponible;\n  }\n  redirectToKardex() {\n    this.location.back();\n  }\n};\nDetallesKardexComponent = __decorate([Component({\n  selector: 'app-detalles-kardex',\n  templateUrl: './detalles-kardex.component.html',\n  styleUrls: ['./detalles-kardex.component.css']\n})], DetallesKardexComponent);\nexport { DetallesKardexComponent };","map":{"version":3,"mappings":"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","names":["Component","DinamicTable","DetallesKardexComponent","constructor","routes","comunicatorSvc","renderer","route","location","ventasSvc","comprasSvc","devolucionesSvc","coinsSvc","kardexSvc","ngOnInit","setTimeout","ruta","url","slice","indexOf","lastIndexOf","title","push","decodeURI","toUpperCase","setTitleComponent","getMainCoin","subscribe","res","Array","mainCoin","queryParams","params","getProductBuy","productOperation","getProductSell","getRepayment","id_buy","undefined","id_sell","getKardexById","aux","kardex","product","calcularMontoImponible","price","price_wiht_discount","Number","discount_product","toFixed","montoImponible","impuest","redirectToKardex","back","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/home/luis/Documentos/systems vs code/inventary-system/client/src/app/content/kardex/detalles-kardex/detalles-kardex/detalles-kardex.component.ts"],"sourcesContent":["import { Component, Renderer2 } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ComprasService } from 'src/app/content/compras/service/compras.service';\nimport { buy, buy_product, coin, kardex, product, repayment, sell, sell_product } from 'src/app/interfaces/interfaces';\nimport { ComunicatorComponetsService } from 'src/app/services/comunicator/comunicator-componets.service';\nimport { DinamicTable } from 'src/app/utils/DinamicTable';\nimport { Location } from '@angular/common';\nimport { CoinsService } from 'src/app/content/configuraciones/service/coins.service';\nimport { KardexService } from '../../service/kardex.service';\nimport { VentasService } from 'src/app/content/ventas/service/ventas.service';\nimport { DevolucionesService } from 'src/app/content/devoluciones/service/devoluciones.service';\n\n@Component({\n  selector: 'app-detalles-kardex',\n  templateUrl: './detalles-kardex.component.html',\n  styleUrls: ['./detalles-kardex.component.css']\n})\nexport class DetallesKardexComponent extends DinamicTable {\n  productOperation!: buy_product | sell_product\n  repayment!: repayment\n  ruta!: string\n  title: string[] = []\n  kardex!: kardex\n  mainCoin!: coin\n  product!: product\n  constructor(private routes: Router,\n    public comunicatorSvc: ComunicatorComponetsService,\n    public override renderer: Renderer2,\n    private route: ActivatedRoute,\n    private location: Location,\n    private ventasSvc: VentasService,\n    private comprasSvc: ComprasService,\n    private devolucionesSvc: DevolucionesService,\n    private coinsSvc: CoinsService,\n    private kardexSvc: KardexService) {\n    super(renderer)\n  }\n  ngOnInit() {\n    setTimeout(() => {\n      /* Obtengo la ruta actual y la transformo para obtener el titulo del componente*/\n      this.ruta = this.routes.url.slice((this.routes.url.slice(1).indexOf('/')) + 2, this.routes.url.lastIndexOf('?'));\n      this.title.push(\"fas fa-pallet fa-fw\");//aa単ado el icono del titulo al array\n      this.title.push(decodeURI(this.ruta).toUpperCase());//a単ado el titulo al array\n      this.comunicatorSvc.setTitleComponent(this.title);\n    });\n    this.coinsSvc.getMainCoin().subscribe(res => {\n      if (res instanceof Array)\n        this.mainCoin = res[0]\n    })\n    this.route.queryParams.subscribe((params) => {\n\n      this.comprasSvc.getProductBuy(params['id'], params['id_product']).subscribe(res => {\n        if (res instanceof Array)\n          this.productOperation = res[0]\n      })\n      this.ventasSvc.getProductSell(params['id'], params['id_product']).subscribe(res => {\n        if (res instanceof Array)\n          this.productOperation = res[0]\n      })\n      this.devolucionesSvc.getRepayment(params['id']).subscribe(res => {\n        if (res instanceof Array) {\n          if (res[0].id_buy !== undefined) {\n            this.comprasSvc.getProductBuy(res[0].id_buy, params['id_product']).subscribe(res => {\n              if (res instanceof Array)\n                this.productOperation = res[0]\n            })\n          }\n          if (res[0].id_sell !== undefined) {\n            this.ventasSvc.getProductSell(res[0].id_sell, params['id_product']).subscribe(res => {\n              if (res instanceof Array)\n                this.productOperation = res[0]\n            })\n          }\n        }\n      })\n      this.kardexSvc.getKardexById(params['type'], params['id']).subscribe(res => {\n        if (res instanceof Array) {\n          let aux: any = res\n          this.kardex = aux[0]\n          this.product = aux[0]\n        }\n      })\n    })\n\n  }\n\n  calcularMontoImponible(price: number) {\n    let price_wiht_discount = Number((price - (Number((price * this.productOperation.discount_product).toFixed(2)))).toFixed(2))\n    let montoImponible = Number((this.productOperation.impuest * price_wiht_discount).toFixed(2))\n    return montoImponible\n  }\n  redirectToKardex() {\n    this.location.back()\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}