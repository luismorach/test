{"ast":null,"code":"import { map, mergeMap } from 'rxjs';\nimport { Columns, PdfMakeWrapper, Table, Txt } from 'pdfmake-wrapper';\nimport { FormControl, Validators } from '@angular/forms';\nimport { concat } from 'rxjs';\nimport { DinamicInput } from 'src/app/utils/DinamicInput';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/comunicator/comunicator-componets.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../ventas/service/ventas.service\";\nimport * as i4 from \"../../configuraciones/service/coins.service\";\nimport * as i5 from \"../../configuraciones/service/empresa.service\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@angular/common\";\nfunction ReporteDeVentaComponent_tr_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const reporte_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(reporte_r5.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", reporte_r5.names_user, \" \", reporte_r5.last_names_user, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(reporte_r5.sells);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(9, 7, reporte_r5.total_sell, reporte_r5.coin + \" \"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(12, 10, reporte_r5.costos, reporte_r5.coin + \" \"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(15, 13, reporte_r5.total_sell - reporte_r5.costos, reporte_r5.coin + \" \"));\n  }\n}\nfunction ReporteDeVentaComponent_tr_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 21);\n    i0.ɵɵtext(2, \"No hay ventas realizadas el dia de hoy\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ReporteDeVentaComponent_tr_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.calcularTotales(ctx_r2.reportes).sells);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 4, ctx_r2.calcularTotales(ctx_r2.reportes).total_sell, ctx_r2.calcularTotales(ctx_r2.reportes).coin + \" \"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(8, 7, ctx_r2.calcularTotales(ctx_r2.reportes).total_costos, ctx_r2.calcularTotales(ctx_r2.reportes).coin + \" \"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(11, 10, ctx_r2.calcularTotales(ctx_r2.reportes).ganancias, ctx_r2.calcularTotales(ctx_r2.reportes).coin + \" \"));\n  }\n}\nfunction ReporteDeVentaComponent_tr_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 21);\n    i0.ɵɵtext(2, \"No hay ventas realizadas el dia de hoy\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ReporteDeVentaComponent_tr_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"td\")(4, \"td\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const coin_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", coin_r6.name, \" \", coin_r6.symbol, \"\");\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"enable\": a0\n  };\n};\nconst _c1 = function (a0) {\n  return {\n    \"input-on-focus\": a0\n  };\n};\nconst _c2 = function (a0) {\n  return {\n    \"label-on-focus-up\": a0\n  };\n};\nvar pdfFonts = require(\"pdfmake/build/vfs_fonts\"); // fonts provided for pdfmake\n// If any issue using previous fonts import. you can try this:\n// import pdfFonts from \"pdfmake/build/vfs_fonts\";\n// Set the fonts to use\nPdfMakeWrapper.setFonts(pdfFonts);\nexport class ReporteDeVentaComponent extends DinamicInput {\n  constructor(comunicatorSvc, routes, ventasSvc, coinsSvc, empresaSvc, fb) {\n    super();\n    this.comunicatorSvc = comunicatorSvc;\n    this.routes = routes;\n    this.ventasSvc = ventasSvc;\n    this.coinsSvc = coinsSvc;\n    this.empresaSvc = empresaSvc;\n    this.fb = fb;\n    this.result = [];\n    this.date = new Date();\n    this.reportes = [];\n    this.coins = [];\n    this.paysOfCoin = [{}];\n    this.reportesByDate = [];\n    this.paysOfCoinBydate = [];\n    this.paysOfCoin = [];\n  }\n  ngOnInit() {\n    let title = [];\n    let ruta;\n    setTimeout(() => {\n      /* Obtengo la ruta actual y la transformo para obtener el titulo del componente*/\n      ruta = this.routes.url.slice(this.routes.url.slice(1).indexOf('/') + 2);\n      title.push(decodeURI(ruta).toUpperCase()); //añado el titulo al array\n      title.push(\"fas fa-hand-holding-usd fa-fw\"); //aañado el icono del titulo al array\n      this.comunicatorSvc.setTitleComponent(title);\n    });\n    this.data$ = this.ventasSvc.getSellBydate(this.date, this.date).subscribe(res => {\n      if (res instanceof Array) this.reportes = res;\n    });\n    this.paysOfCoin.push({\n      coin: '',\n      efectivo: 0,\n      transaccion: 0\n    });\n    this.coinsSvc.getCoins().subscribe(coins => {\n      this.coins = coins;\n    });\n    this.empresaSvc.getBuildings().subscribe(res => {\n      if (res instanceof Array) {\n        this.empresa = res[0];\n      }\n    });\n    this.formGenerateReport = this.fb.group({\n      initialDate: new FormControl('', [Validators.required, Validators.pattern(/^\\d{4}\\-(0[1-9]|1[012])\\-(0[1-9]|[12][0-9]|3[01])$/)]),\n      endDate: new FormControl('', [Validators.required, Validators.pattern(/^\\d{4}\\-(0[1-9]|1[012])\\-(0[1-9]|[12][0-9]|3[01])$/)])\n    });\n  }\n  calcularTotales(reportes) {\n    let values = {\n      sells: 0,\n      total_sell: 0,\n      total_costos: 0,\n      ganancias: 0,\n      coin: ''\n    };\n    reportes.forEach(reporte => {\n      values.sells += Number(reporte.sells);\n      values.total_sell += Number(Number(reporte.total_sell).toFixed(2));\n      values.total_costos += Number(Number(reporte.costos).toFixed(2));\n      values.ganancias += Number(Number(reporte.total_sell - reporte.costos).toFixed(2));\n      values.coin = reporte.coin;\n    });\n    return values;\n  }\n  createPDF(tipo) {\n    const pdf = new PdfMakeWrapper();\n    pdf.add(new Columns([new Txt(this.empresa.name).fontSize(12).lineHeight(1.4).end, '']).end);\n    pdf.add(new Columns([new Txt(this.empresa.document_type + ' ' + this.empresa.document_number + '\\n' + 'Dirección: ' + this.empresa.address + '\\n' + 'Télefono:' + this.empresa.phone_number + '\\n' + 'Email: ' + this.empresa.email).fontSize(8).end, '']).end);\n    tipo === 'reporte de hoy' ? this.dataPdf(pdf) : this.consultar(pdf);\n    pdf.create().open();\n  }\n  createTables(funcion) {\n    return new Table([funcion(this.reportes, this.comunicatorSvc.currencyFormatter, this.calcularTotales).header, ...funcion(this.reportes, this.comunicatorSvc.currencyFormatter).body]).alignment('center').fontSize(8).widths('*').heights(rowIndex => {\n      return rowIndex === 0 ? 13 : 0;\n    }).layout({\n      fillColor(rowIndex, node, columnIndex) {\n        return rowIndex === 0 ? '#cccccc' : '';\n      }\n    }).end;\n  }\n  extractDataSell(reportes) {\n    let aux = ['Caja', 'Vendedor', 'Ventas realizadas', 'Total en ventas', 'Costos de ventas', 'Ganancias'];\n    let other = reportes.map(reporte => [reporte.name, reporte.names_user + ' ' + reporte.last_names_user, reporte.sells, this.comunicatorSvc.currencyFormatter(reporte.total_sell), this.comunicatorSvc.currencyFormatter(reporte.costos), this.comunicatorSvc.currencyFormatter(reporte.total_sell - reporte.costos)]);\n    return {\n      header: aux,\n      body: other\n    };\n  }\n  extractDataTotals(reportes) {\n    let aux = ['Total ventas realizadas', 'Total en ventas', 'Total costos de ventas', 'Total ganancias'];\n    let other = reportes.map(reporte => [this.calcularTotales(reportes).sells, this.comunicatorSvc.currencyFormatter(this.calcularTotales(reportes).total_sell), this.comunicatorSvc.currencyFormatter(this.calcularTotales(reportes).total_costos), this.comunicatorSvc.currencyFormatter(this.calcularTotales(reportes).total_sell - this.calcularTotales(reportes).total_costos)]);\n    return {\n      header: aux,\n      body: other\n    };\n  }\n  extractDataCoin(pays) {\n    let aux = ['Moneda', 'Total en transacciones eléctronicas', 'Total en efectivo'];\n    let other = this.coins.map((coin, index) => [coin.name + ' ' + coin.symbol, this.comunicatorSvc.currencyFormatter(pays[index].transaccion), this.comunicatorSvc.currencyFormatter(pays[index].efectivo)]);\n    return {\n      header: aux,\n      body: other\n    };\n  }\n  dataPdfByDate(pdf) {\n    let initialDate = new Date(this.formGenerateReport.get('initialDate')?.value);\n    let endDate = new Date(this.formGenerateReport.get('endDate')?.value);\n    pdf.add(new Txt('Reporte de venta (' + new Intl.DateTimeFormat('es-CL').format(initialDate) + ' al ' + new Intl.DateTimeFormat('es-CL').format(endDate) + ')').alignment('center').margin([0, 50, 0, 20]).fontSize(10).end);\n    pdf.add(this.createTables(this.extractDataSell.bind(this, this.reportesByDate)));\n    pdf.add(new Txt('').margin([0, 50, 0, 0]).end);\n    pdf.add(this.createTables(this.extractDataTotals.bind(this, this.reportesByDate)));\n    pdf.add(new Txt('').margin([0, 50, 0, 0]).end);\n    pdf.add(this.createTables(this.extractDataCoin.bind(this, this.paysOfCoinBydate)));\n  }\n  dataPdf(pdf) {\n    pdf.add(new Txt('Reporte de venta (' + new Intl.DateTimeFormat('es-CL').format(this.date) + ')').alignment('center').margin([0, 50, 0, 20]).fontSize(10).end);\n    pdf.add(this.createTables(this.extractDataSell.bind(this, this.reportes)));\n    pdf.add(new Txt('').margin([0, 50, 0, 0]).end);\n    pdf.add(this.createTables(this.extractDataTotals.bind(this, this.reportes)));\n    pdf.add(new Txt('').margin([0, 50, 0, 0]).end);\n    pdf.add(this.createTables(this.extractDataCoin.bind(this, this.paysOfCoin)));\n  }\n  consultar(pdf) {\n    let initialDate = new Date(this.formGenerateReport.get('initialDate')?.value);\n    let endDate = new Date(this.formGenerateReport.get('endDate')?.value);\n    this.paysOfCoinBydate = [];\n    const sell = this.ventasSvc.getSellBydate(initialDate, endDate);\n    const coins = this.coinsSvc.getCoins();\n    const pays = this.coinsSvc.getCoins().pipe(mergeMap(res => res), mergeMap(other => this.ventasSvc.getPaysByDate(initialDate, endDate, other.symbol)), map(res => this.paysOfCoinBydate = this.paysOfCoinBydate.concat(res)));\n    const concatenar = concat(sell, pays);\n    concatenar.subscribe({\n      next: res => {\n        console.log(res);\n        this.reportesByDate.push(res);\n      },\n      complete: () => {\n        this.reportesByDate = this.reportesByDate[0];\n        console.log(this.paysOfCoinBydate);\n        console.log(this.reportesByDate);\n        //this.dataPdfByDate(pdf)   \n      }\n    });\n    /* this.ventasSvc.getSellBydate(initialDate,endDate).subscribe(res => {\n      console.log('epa')\n      console.log(res)\n      if (res instanceof Array)\n        this.reportesByDate = res\n    })\n    this.coinsSvc.getCoins().subscribe(coins => {\n      this.coins = coins\n      coins.forEach((coin: coin, i: number) => {\n        this.paysOfCoinBydate.push({ efectivo: 0, transaccion: 0 })\n             this.ventasSvc.getPaysByDate(initialDate, endDate, coin.symbol).subscribe(res => {\n          if (res instanceof Array) {\n            res.forEach((pay: pay) => {\n              if (pay.type === 'Efectivo')\n                this.paysOfCoinBydate[i].efectivo += Number(pay.mount)\n              else\n                this.paysOfCoinBydate[i].transaccion += Number(pay.mount)\n            })\n          }\n        })\n      })\n    }) */\n  }\n\n  verificarFechas() {\n    let result = {\n      isValid: false,\n      msj: ''\n    };\n    if (this.formGenerateReport.get('initialDate')?.invalid) {\n      result = {\n        isValid: false,\n        msj: 'La fecha inicial es invalida'\n      };\n    } else if (this.formGenerateReport.get('endDate')?.invalid) {\n      result = {\n        isValid: false,\n        msj: 'La fecha final es invalida'\n      };\n    } else if (this.formGenerateReport.get('endDate')?.value <= this.formGenerateReport.get('initialDate')?.value) {\n      result = {\n        isValid: false,\n        msj: 'La fecha final debe ser mayor a la inicial'\n      };\n    } else {\n      result = {\n        isValid: true,\n        msj: ''\n      };\n    }\n    return result;\n  }\n  ngOnDestroy() {\n    this.data$.unsubscribe();\n  }\n}\nReporteDeVentaComponent.ɵfac = function ReporteDeVentaComponent_Factory(t) {\n  return new (t || ReporteDeVentaComponent)(i0.ɵɵdirectiveInject(i1.ComunicatorComponetsService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.VentasService), i0.ɵɵdirectiveInject(i4.CoinsService), i0.ɵɵdirectiveInject(i5.EmpresaService), i0.ɵɵdirectiveInject(i6.FormBuilder));\n};\nReporteDeVentaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ReporteDeVentaComponent,\n  selectors: [[\"app-reporte-de-venta\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 78,\n  vars: 35,\n  consts: [[1, \"report-title\"], [1, \"table-body\"], [1, \"table-responsive\"], [1, \"table\", \"table-bordered\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"form-actions\"], [1, \"form-button\", \"btn\", 3, \"ngClass\", \"click\"], [1, \"fas\", \"fa-print\"], [1, \"line\"], [1, \"form-container\"], [1, \"form-title\"], [1, \"form\", 3, \"formGroup\"], [1, \"form-group\"], [1, \"form-control\", 3, \"ngClass\"], [1, \"form-label\", 3, \"ngClass\", \"ngStyle\"], [1, \"fab\", \"fa-font-awesome-alt\"], [\"type\", \"date\", \"formControlName\", \"initialDate\", 1, \"form-input\", 3, \"focus\", \"focusout\"], [\"type\", \"date\", \"formControlName\", \"endDate\", 1, \"form-input\", 3, \"min\", \"focus\", \"focusout\"], [1, \"form-button\", \"btn\", 3, \"title\", \"ngClass\", \"click\"], [1, \"far\", \"fa-save\"], [\"colspan\", \"7\"]],\n  template: function ReporteDeVentaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h3\", 0);\n      i0.ɵɵtext(1);\n      i0.ɵɵpipe(2, \"date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 1)(4, \"div\", 2)(5, \"table\", 3)(6, \"thead\")(7, \"tr\")(8, \"th\");\n      i0.ɵɵtext(9, \"Caja\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"th\");\n      i0.ɵɵtext(11, \"Vendedor\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"th\");\n      i0.ɵɵtext(13, \"Ventas realizadas\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"th\");\n      i0.ɵɵtext(15, \"Total en ventas\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"th\");\n      i0.ɵɵtext(17, \"Costo de venta\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"th\");\n      i0.ɵɵtext(19, \"Ganancias\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(20, \"th\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"tbody\");\n      i0.ɵɵtemplate(22, ReporteDeVentaComponent_tr_22_Template, 16, 16, \"tr\", 4);\n      i0.ɵɵtemplate(23, ReporteDeVentaComponent_tr_23_Template, 3, 0, \"tr\", 5);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(24, \"div\", 1)(25, \"div\", 2)(26, \"table\", 3)(27, \"thead\")(28, \"tr\")(29, \"th\");\n      i0.ɵɵtext(30, \"Total ventas realizadas\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"th\");\n      i0.ɵɵtext(32, \"Total en ventas\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"th\");\n      i0.ɵɵtext(34, \"Total costos de venta\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(35, \"th\");\n      i0.ɵɵtext(36, \"Total ganancias\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(37, \"tbody\");\n      i0.ɵɵtemplate(38, ReporteDeVentaComponent_tr_38_Template, 12, 13, \"tr\", 5);\n      i0.ɵɵtemplate(39, ReporteDeVentaComponent_tr_39_Template, 3, 0, \"tr\", 5);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(40, \"div\", 1)(41, \"div\", 2)(42, \"table\", 3)(43, \"thead\")(44, \"tr\")(45, \"th\");\n      i0.ɵɵtext(46, \"Moneda\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"th\");\n      i0.ɵɵtext(48, \"Total en transacciones el\\u00E9ctronicas\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"th\");\n      i0.ɵɵtext(50, \"Total en efectivo\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(51, \"tbody\");\n      i0.ɵɵtemplate(52, ReporteDeVentaComponent_tr_52_Template, 5, 2, \"tr\", 4);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(53, \"div\", 6)(54, \"button\", 7);\n      i0.ɵɵlistener(\"click\", function ReporteDeVentaComponent_Template_button_click_54_listener() {\n        return ctx.createPDF(\"reporte de hoy\");\n      });\n      i0.ɵɵelement(55, \"i\", 8);\n      i0.ɵɵtext(56, \"\\u00A0\\u00A0IMPRIMIR\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(57, \"div\", 9);\n      i0.ɵɵelementStart(58, \"div\", 10)(59, \"h3\", 11);\n      i0.ɵɵtext(60, \" \\u00A0Generar reporte por fecha \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(61, \"div\", 12)(62, \"div\", 13)(63, \"div\", 14)(64, \"label\", 15);\n      i0.ɵɵtext(65, \" Fecha de inicio \");\n      i0.ɵɵelement(66, \"i\", 16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(67, \"input\", 17);\n      i0.ɵɵlistener(\"focus\", function ReporteDeVentaComponent_Template_input_focus_67_listener() {\n        return ctx.isFocused(0, ctx.formGenerateReport, \"select\");\n      })(\"focusout\", function ReporteDeVentaComponent_Template_input_focusout_67_listener() {\n        return ctx.isFocused(0, ctx.formGenerateReport, \"select\");\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(68, \"div\", 14)(69, \"label\", 15);\n      i0.ɵɵtext(70, \" Fecha de fin \");\n      i0.ɵɵelement(71, \"i\", 16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(72, \"input\", 18);\n      i0.ɵɵlistener(\"focus\", function ReporteDeVentaComponent_Template_input_focus_72_listener() {\n        return ctx.isFocused(1, ctx.formGenerateReport, \"select\");\n      })(\"focusout\", function ReporteDeVentaComponent_Template_input_focusout_72_listener() {\n        return ctx.isFocused(1, ctx.formGenerateReport, \"select\");\n      });\n      i0.ɵɵpipe(73, \"date\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(74, \"div\", 6)(75, \"button\", 19);\n      i0.ɵɵlistener(\"click\", function ReporteDeVentaComponent_Template_button_click_75_listener() {\n        return ctx.createPDF(\"reporte de fechas\");\n      });\n      i0.ɵɵelement(76, \"i\", 20);\n      i0.ɵɵtext(77, \" \\u00A0\\u00A0GENERAR REPORTE\");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      let tmp_14_0;\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\"Estad\\u00EDsticas de venta hoy (\", i0.ɵɵpipeBind2(2, 17, ctx.date, \"dd/MM/yyyy\"), \")\");\n      i0.ɵɵadvance(21);\n      i0.ɵɵproperty(\"ngForOf\", ctx.reportes);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.reportes.length < 1);\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngIf\", ctx.reportes.length > 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.reportes.length < 1);\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngForOf\", ctx.coins);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(23, _c0, ctx.reportes.length > 0));\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"formGroup\", ctx.formGenerateReport);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(25, _c1, ctx.elementHasFocus[0]));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(27, _c2, ctx.elementHasFocus[0]))(\"ngStyle\", ctx.animationLabel(ctx.formGenerateReport, \"select\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(29, _c1, ctx.elementHasFocus[1]));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(31, _c2, ctx.elementHasFocus[1]))(\"ngStyle\", ctx.animationLabel(ctx.formGenerateReport, \"select\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵpropertyInterpolate(\"min\", i0.ɵɵpipeBind2(73, 20, (tmp_14_0 = ctx.formGenerateReport.get(\"initialDate\")) == null ? null : tmp_14_0.value, \"yyyy-MM-dd\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵpropertyInterpolate(\"title\", ctx.verificarFechas().msj);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(33, _c0, ctx.verificarFechas().isValid));\n    }\n  },\n  dependencies: [i7.NgClass, i7.NgForOf, i7.NgIf, i7.NgStyle, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.FormGroupDirective, i6.FormControlName, i7.CurrencyPipe, i7.DatePipe],\n  styles: [\".report-title[_ngcontent-%COMP%]{\\n    text-align:center;\\n    margin:0px;\\n    margin-top: 40px;\\n    font-size: 1.6rem;\\n    font-weight: 200;\\n}\\n.table[_ngcontent-%COMP%]{\\n    background-color: white;\\n    color:black;\\n    text-align: center;\\n}\\n.btn[_ngcontent-%COMP%] {\\n    all: unset;\\n    min-width: 70px;\\n    padding: .8rem 1rem;\\n    margin: 2rem;\\n    border-radius: .3rem;\\n    font-size: .8125rem;\\n    text-align: center;\\n    cursor: not-allowed;\\n    outline: 0;\\n    font-size: 1rem;\\n    color: #676d74;\\n    border:1px solid #676d74\\n  }\\n  .enable[_ngcontent-%COMP%]{\\n    color: #03a9f4;\\n    border:1px solid #03a9f4;\\n    cursor: pointer;\\n  }\\n  .enable[_ngcontent-%COMP%]:hover {\\n    background-color: #EBEBEB;\\n  }\\n  .line[_ngcontent-%COMP%]{\\n    border-bottom: 1px solid #D8D8D8;\\n}\\n.form-title[_ngcontent-%COMP%]{\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29udGVudC9yZXBvcnRlcy9yZXBvcnRlLWRlLXZlbnRhL3JlcG9ydGUtZGUtdmVudGEuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGlCQUFpQjtJQUNqQixVQUFVO0lBQ1YsZ0JBQWdCO0lBQ2hCLGlCQUFpQjtJQUNqQixnQkFBZ0I7QUFDcEI7QUFDQTtJQUNJLHVCQUF1QjtJQUN2QixXQUFXO0lBQ1gsa0JBQWtCO0FBQ3RCO0FBQ0E7SUFDSSxVQUFVO0lBQ1YsZUFBZTtJQUNmLG1CQUFtQjtJQUNuQixZQUFZO0lBQ1osb0JBQW9CO0lBQ3BCLG1CQUFtQjtJQUNuQixrQkFBa0I7SUFDbEIsbUJBQW1CO0lBQ25CLFVBQVU7SUFDVixlQUFlO0lBQ2YsY0FBYztJQUNkO0VBQ0Y7RUFDQTtJQUNFLGNBQWM7SUFDZCx3QkFBd0I7SUFDeEIsZUFBZTtFQUNqQjtFQUNBO0lBQ0UseUJBQXlCO0VBQzNCO0VBQ0E7SUFDRSxnQ0FBZ0M7QUFDcEM7QUFDQTtFQUNFLGtCQUFrQjtBQUNwQiIsInNvdXJjZXNDb250ZW50IjpbIi5yZXBvcnQtdGl0bGV7XG4gICAgdGV4dC1hbGlnbjpjZW50ZXI7XG4gICAgbWFyZ2luOjBweDtcbiAgICBtYXJnaW4tdG9wOiA0MHB4O1xuICAgIGZvbnQtc2l6ZTogMS42cmVtO1xuICAgIGZvbnQtd2VpZ2h0OiAyMDA7XG59XG4udGFibGV7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgY29sb3I6YmxhY2s7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuLmJ0biB7XG4gICAgYWxsOiB1bnNldDtcbiAgICBtaW4td2lkdGg6IDcwcHg7XG4gICAgcGFkZGluZzogLjhyZW0gMXJlbTtcbiAgICBtYXJnaW46IDJyZW07XG4gICAgYm9yZGVyLXJhZGl1czogLjNyZW07XG4gICAgZm9udC1zaXplOiAuODEyNXJlbTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgY3Vyc29yOiBub3QtYWxsb3dlZDtcbiAgICBvdXRsaW5lOiAwO1xuICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICBjb2xvcjogIzY3NmQ3NDtcbiAgICBib3JkZXI6MXB4IHNvbGlkICM2NzZkNzRcbiAgfVxuICAuZW5hYmxle1xuICAgIGNvbG9yOiAjMDNhOWY0O1xuICAgIGJvcmRlcjoxcHggc29saWQgIzAzYTlmNDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gIH1cbiAgLmVuYWJsZTpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI0VCRUJFQjtcbiAgfVxuICAubGluZXtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0Q4RDhEODtcbn1cbi5mb3JtLXRpdGxle1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["map","mergeMap","Columns","PdfMakeWrapper","Table","Txt","FormControl","Validators","concat","DinamicInput","i0","pdfFonts","require","setFonts","ReporteDeVentaComponent","constructor","comunicatorSvc","routes","ventasSvc","coinsSvc","empresaSvc","fb","Date","paysOfCoin","ngOnInit","title","ruta","setTimeout","url","slice","indexOf","push","decodeURI","toUpperCase","setTitleComponent","data$","getSellBydate","date","subscribe","res","Array","reportes","coin","efectivo","transaccion","getCoins","coins","getBuildings","empresa","formGenerateReport","group","initialDate","required","pattern","endDate","calcularTotales","values","sells","total_sell","total_costos","ganancias","forEach","reporte","Number","toFixed","costos","createPDF","tipo","pdf","add","name","fontSize","lineHeight","end","document_type","document_number","address","phone_number","email","dataPdf","consultar","create","open","createTables","funcion","currencyFormatter","header","body","alignment","widths","heights","rowIndex","layout","fillColor","node","columnIndex","extractDataSell","aux","other","names_user","last_names_user","extractDataTotals","extractDataCoin","pays","index","symbol","dataPdfByDate","get","value","Intl","DateTimeFormat","format","margin","bind","reportesByDate","paysOfCoinBydate","sell","pipe","getPaysByDate","concatenar","next","console","log","complete","verificarFechas","result","isValid","msj","invalid","ngOnDestroy","unsubscribe","selectors","features","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/home/luis/Documentos/systems vs code/inventary-system/client/src/app/content/reportes/reporte-de-venta/reporte-de-venta.component.ts","/home/luis/Documentos/systems vs code/inventary-system/client/src/app/content/reportes/reporte-de-venta/reporte-de-venta.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Subscription, concatMap, map, mergeMap, tap } from 'rxjs';\nimport { ComunicatorComponetsService } from 'src/app/services/comunicator/comunicator-componets.service';\nimport { VentasService } from '../../ventas/service/ventas.service';\nimport { alert, building, coin, pay } from 'src/app/interfaces/interfaces';\nimport { CoinsService } from '../../configuraciones/service/coins.service';\nimport { EmpresaService } from '../../configuraciones/service/empresa.service';\nimport { Columns, ITable, Img, PdfMakeWrapper, Table, Txt } from 'pdfmake-wrapper'\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { concat } from 'rxjs'\nimport { DinamicInput } from 'src/app/utils/DinamicInput';\nvar pdfFonts = require(\"pdfmake/build/vfs_fonts\"); // fonts provided for pdfmake\n\n// If any issue using previous fonts import. you can try this:\n// import pdfFonts from \"pdfmake/build/vfs_fonts\";\n\n// Set the fonts to use\nPdfMakeWrapper.setFonts(pdfFonts);\n\n@Component({\n  selector: 'app-reporte-de-venta',\n  templateUrl: './reporte-de-venta.component.html',\n  styleUrls: ['./reporte-de-venta.component.css']\n})\nexport class ReporteDeVentaComponent extends DinamicInput {\n  result: any[] = [];\n  data$!: Subscription\n  date = new Date()\n  reportes: any[] = []\n  coins: coin[] = []\n  paysOfCoin = [{}]\n  reportesByDate: any[] = []\n  paysOfCoinBydate:pay[] = []\n  empresa!: building\n  formGenerateReport!: FormGroup;\n  constructor(private comunicatorSvc: ComunicatorComponetsService,\n    private routes: Router,\n    private ventasSvc: VentasService,\n    private coinsSvc: CoinsService,\n    private empresaSvc: EmpresaService,\n    private fb: FormBuilder) {\n    super();\n    this.paysOfCoin = [];\n  }\n  ngOnInit() {\n    let title: string[] = [];\n    let ruta;\n    setTimeout(() => {\n      /* Obtengo la ruta actual y la transformo para obtener el titulo del componente*/\n      ruta = this.routes.url.slice((this.routes.url.slice(1).indexOf('/')) + 2);\n      title.push(decodeURI(ruta).toUpperCase());//añado el titulo al array\n      title.push(\"fas fa-hand-holding-usd fa-fw\");//aañado el icono del titulo al array\n      this.comunicatorSvc.setTitleComponent(title);\n    });\n    this.data$ = this.ventasSvc.getSellBydate(this.date, this.date).subscribe(res => {\n      if (res instanceof Array)\n        this.reportes = res\n    })\n    this.paysOfCoin.push({coin:'',efectivo:0,transaccion:0})\n    this.coinsSvc.getCoins().subscribe(coins => {\n      this.coins = coins\n      \n    })\n    this.empresaSvc.getBuildings().subscribe(res => {\n      if (res instanceof Array) {\n        this.empresa = res[0]\n      }\n    })\n    this.formGenerateReport = this.fb.group({\n      initialDate: new FormControl('', [Validators.required,\n      Validators.pattern(/^\\d{4}\\-(0[1-9]|1[012])\\-(0[1-9]|[12][0-9]|3[01])$/)]),\n      endDate: new FormControl('', [Validators.required,\n      Validators.pattern(/^\\d{4}\\-(0[1-9]|1[012])\\-(0[1-9]|[12][0-9]|3[01])$/)]),\n    })\n  }\n  calcularTotales(reportes: any) {\n    let values = { sells: 0, total_sell: 0, total_costos: 0, ganancias: 0, coin: '' }\n    reportes.forEach((reporte: any) => {\n      values.sells += Number(reporte.sells)\n      values.total_sell += Number(Number(reporte.total_sell).toFixed(2))\n      values.total_costos += Number(Number(reporte.costos).toFixed(2))\n      values.ganancias += Number(Number(reporte.total_sell - reporte.costos).toFixed(2))\n      values.coin = reporte.coin\n    })\n    return values\n  }\n  createPDF(tipo: string) {\n    const pdf = new PdfMakeWrapper();\n    pdf.add(\n      new Columns([\n        new Txt(this.empresa.name).fontSize(12).lineHeight(1.4).end,\n        ''\n      ]).end)\n    pdf.add(\n      new Columns([\n        new Txt(this.empresa.document_type + ' ' + this.empresa.document_number + '\\n' +\n          'Dirección: ' + this.empresa.address + '\\n' + 'Télefono:' + this.empresa.phone_number + '\\n' +\n          'Email: ' + this.empresa.email).fontSize(8).end,\n        ''\n      ]).end)\n    tipo === 'reporte de hoy' ? this.dataPdf(pdf) : this.consultar(pdf)\n    pdf.create().open()\n  }\n  createTables(funcion: Function): ITable {\n    return new Table([\n      funcion(this.reportes, this.comunicatorSvc.currencyFormatter, this.calcularTotales).header,\n      ...funcion(this.reportes, this.comunicatorSvc.currencyFormatter).body\n    ]).alignment('center').fontSize(8).widths('*').heights(rowIndex => {\n      return rowIndex === 0 ? 13 : 0\n    }).layout({\n      fillColor(rowIndex: number | undefined, node: any, columnIndex: number | undefined): string {\n        return rowIndex === 0 ? '#cccccc' : ''\n      },\n    }).end\n  }\n  extractDataSell(reportes: any) {\n    let aux = ['Caja', 'Vendedor', 'Ventas realizadas', 'Total en ventas', 'Costos de ventas', 'Ganancias'];\n    let other = reportes.map((reporte: any) => [\n      reporte.name, reporte.names_user + ' ' + reporte.last_names_user,\n      reporte.sells,\n      this.comunicatorSvc.currencyFormatter(reporte.total_sell),\n      this.comunicatorSvc.currencyFormatter(reporte.costos),\n      this.comunicatorSvc.currencyFormatter(reporte.total_sell - reporte.costos)\n    ])\n    return { header: aux, body: other }\n  }\n  extractDataTotals(reportes: any) {\n    let aux = ['Total ventas realizadas', 'Total en ventas', 'Total costos de ventas', 'Total ganancias'];\n    let other = reportes.map((reporte: any) => [\n      this.calcularTotales(reportes).sells,\n      this.comunicatorSvc.currencyFormatter(this.calcularTotales(reportes).total_sell),\n      this.comunicatorSvc.currencyFormatter(this.calcularTotales(reportes).total_costos),\n      this.comunicatorSvc.currencyFormatter(this.calcularTotales(reportes).total_sell - this.calcularTotales(reportes).total_costos)\n    ])\n    return { header: aux, body: other }\n  }\n  extractDataCoin(pays: any) {\n    let aux = ['Moneda', 'Total en transacciones eléctronicas', 'Total en efectivo'];\n    let other = this.coins.map((coin: any, index: number) => [\n      coin.name + ' ' + coin.symbol,\n      this.comunicatorSvc.currencyFormatter(pays[index].transaccion),\n      this.comunicatorSvc.currencyFormatter(pays[index].efectivo),\n    ])\n    return { header: aux, body: other }\n  }\n\n  dataPdfByDate(pdf: PdfMakeWrapper) {\n    let initialDate = new Date(this.formGenerateReport.get('initialDate')?.value)\n    let endDate = new Date(this.formGenerateReport.get('endDate')?.value)\n    pdf.add(new Txt('Reporte de venta (' +\n      new Intl.DateTimeFormat('es-CL').format(initialDate) +\n      ' al ' + new Intl.DateTimeFormat('es-CL').format(endDate) + ')').alignment('center')\n      .margin([0, 50, 0, 20]).fontSize(10).end)\n    pdf.add(this.createTables(this.extractDataSell.bind(this, this.reportesByDate)))\n    pdf.add(new Txt('').margin([0, 50, 0, 0]).end)\n    pdf.add(this.createTables(this.extractDataTotals.bind(this, this.reportesByDate)))\n    pdf.add(new Txt('').margin([0, 50, 0, 0]).end)\n    pdf.add(this.createTables(this.extractDataCoin.bind(this, this.paysOfCoinBydate)))\n  }\n  dataPdf(pdf: PdfMakeWrapper) {\n    pdf.add(new Txt('Reporte de venta (' +\n      new Intl.DateTimeFormat('es-CL').format(this.date) + ')').alignment('center')\n      .margin([0, 50, 0, 20]).fontSize(10).end)\n    pdf.add(this.createTables(this.extractDataSell.bind(this, this.reportes)))\n    pdf.add(new Txt('').margin([0, 50, 0, 0]).end)\n    pdf.add(this.createTables(this.extractDataTotals.bind(this, this.reportes)))\n    pdf.add(new Txt('').margin([0, 50, 0, 0]).end)\n    pdf.add(this.createTables(this.extractDataCoin.bind(this, this.paysOfCoin)))\n  }\n  \n  consultar(pdf: PdfMakeWrapper) {\n    let initialDate = new Date(this.formGenerateReport.get('initialDate')?.value)\n    let endDate = new Date(this.formGenerateReport.get('endDate')?.value)\n    this.paysOfCoinBydate = []\n    const sell = this.ventasSvc.getSellBydate(initialDate, endDate)\n    const coins = this.coinsSvc.getCoins()\n    const pays = this.coinsSvc.getCoins().pipe(\n      mergeMap((res: any) => res),\n      mergeMap((other: any) => this.ventasSvc.getPaysByDate(initialDate, endDate, other.symbol)),\n      map((res:any)=>this.paysOfCoinBydate=this.paysOfCoinBydate.concat(res))\n      \n    )\n    \n    \n    const concatenar = concat(sell, pays)\n    concatenar.subscribe({\n      next: res => {\n        console.log(res)\n        this.reportesByDate.push(res)\n      },\n      complete: () => {\n        this.reportesByDate = this.reportesByDate[0]\n        console.log(this.paysOfCoinBydate)\n        console.log(this.reportesByDate)\n        //this.dataPdfByDate(pdf)   \n      }\n    }) \n    /* this.ventasSvc.getSellBydate(initialDate,endDate).subscribe(res => {\n      console.log('epa')\n      console.log(res)\n      if (res instanceof Array)\n        this.reportesByDate = res\n    })\n    this.coinsSvc.getCoins().subscribe(coins => {\n      this.coins = coins\n      coins.forEach((coin: coin, i: number) => {\n        this.paysOfCoinBydate.push({ efectivo: 0, transaccion: 0 })\n\n        this.ventasSvc.getPaysByDate(initialDate, endDate, coin.symbol).subscribe(res => {\n          if (res instanceof Array) {\n            res.forEach((pay: pay) => {\n              if (pay.type === 'Efectivo')\n                this.paysOfCoinBydate[i].efectivo += Number(pay.mount)\n              else\n                this.paysOfCoinBydate[i].transaccion += Number(pay.mount)\n            })\n          }\n        })\n      })\n    }) */\n  }\n  verificarFechas() {\n    let result = { isValid: false, msj: '' }\n    if (this.formGenerateReport.get('initialDate')?.invalid) {\n      result = { isValid: false, msj: 'La fecha inicial es invalida' }\n    } else if (this.formGenerateReport.get('endDate')?.invalid) {\n      result = { isValid: false, msj: 'La fecha final es invalida' }\n    } else if (this.formGenerateReport.get('endDate')?.value <= this.formGenerateReport.get('initialDate')?.value) {\n      result = { isValid: false, msj: 'La fecha final debe ser mayor a la inicial' }\n    } else {\n      result = { isValid: true, msj: '' }\n    }\n    return result\n  }\n  ngOnDestroy() {\n    this.data$.unsubscribe();\n  }\n}\n","<h3 class=\"report-title\">Estadísticas de venta hoy ({{date|date:'dd/MM/yyyy'}})</h3>\n<div class=\"table-body\">\n    <div class=\"table-responsive\">\n        <table class=\"table table-bordered\">\n            <thead>\n                <tr>\n                    <th>Caja</th>\n                    <th>Vendedor</th>\n                    <th>Ventas realizadas</th>\n                    <th>Total en ventas</th>\n                    <th>Costo de venta</th>\n                    <th>Ganancias</th>\n                    <th></th>\n                </tr>\n            </thead>\n\n            <tbody>\n                 <tr *ngFor=\"let reporte of reportes\">\n                    <td>{{reporte.name}}</td>\n                    <td>{{reporte.names_user}} {{reporte.last_names_user}}</td>\n                    <td>{{reporte.sells}}</td>\n                    <td>{{reporte.total_sell|currency:reporte.coin+' '}}</td>\n                    <td>{{reporte.costos|currency:reporte.coin+' '}}</td>\n                    <td>{{reporte.total_sell-reporte.costos|currency:reporte.coin+' '}}</td>\n                </tr>\n                <tr *ngIf=\"reportes.length<1\">\n                    <td colspan=\"7\">No hay ventas realizadas el dia de hoy</td>\n                </tr> \n            </tbody>\n        </table>\n    </div>\n</div>\n<div class=\"table-body\">\n    <div class=\"table-responsive\">\n        <table class=\"table table-bordered\">\n            <thead>\n                <tr>\n                    <th>Total ventas realizadas</th>\n                    <th>Total en ventas</th>\n                    <th>Total costos de venta</th>\n                    <th>Total ganancias</th>\n                </tr>\n            </thead>\n \n            <tbody >\n                <tr *ngIf=\"reportes.length>0\">\n                    <td>{{calcularTotales(reportes).sells}}</td>\n                    <td>{{calcularTotales(reportes).total_sell|currency:calcularTotales(reportes).coin+' '}}</td>\n                    <td>{{calcularTotales(reportes).total_costos|currency:calcularTotales(reportes).coin+' '}}</td>\n                    <td>{{calcularTotales(reportes).ganancias|currency:calcularTotales(reportes).coin+' '}}</td>\n                </tr>\n                <tr *ngIf=\"reportes.length<1\">\n                    <td colspan=\"7\">No hay ventas realizadas el dia de hoy</td>\n                </tr> \n            </tbody>\n        </table>\n    </div>\n</div>\n<div class=\"table-body\">\n    <div class=\"table-responsive\">\n        <table class=\"table table-bordered\">\n            <thead>\n                <tr>\n                    <th>Moneda</th>\n                    <th>Total en transacciones eléctronicas</th>\n                    <th>Total en efectivo</th>\n                </tr>\n            </thead>\n\n              <tbody>\n                <tr *ngFor=\"let coin of coins; let i=index\">\n                    <td>{{coin.name}} {{coin.symbol}}</td>\n                    <td ></td>\n                    <td ></td>\n                </tr>\n               \n            </tbody>\n        </table>\n    </div>\n</div>\n<div class=\"form-actions\">\n    <button class=\"form-button btn\" (click)=\"createPDF('reporte de hoy')\"\n    [ngClass]=\"{'enable':reportes.length>0}\">\n        <i class=\"fas fa-print\"></i>&nbsp;&nbsp;IMPRIMIR</button>\n   \n</div>\n<div class=\"line\"></div>\n<div class=\"form-container\">\n    <h3 class=\"form-title\">\n        &nbsp;Generar reporte por fecha\n    </h3>\n    <div class=\"form\" [formGroup]=\"formGenerateReport\">\n        <div class=\"form-group\">\n            <div class=\"form-control\" [ngClass]=\"{'input-on-focus':elementHasFocus[0]}\">\n                <label class=\"form-label\" [ngClass]=\"{'label-on-focus-up':\n                elementHasFocus[0]}\" [ngStyle]=\"animationLabel(formGenerateReport,\n                'select')\">\n                    Fecha de inicio\n                    <i class=\"fab fa-font-awesome-alt\"></i>\n                </label>\n                <input type=\"date\" formControlName=\"initialDate\" (focus)=\"isFocused(0,formGenerateReport,\n                'select')\" (focusout)=\"isFocused(0,formGenerateReport,'select')\" class=\"form-input\">\n            </div>\n            <div class=\"form-control\" [ngClass]=\"{'input-on-focus':elementHasFocus[1]}\">\n                <label class=\"form-label\" [ngClass]=\"{'label-on-focus-up':\n            elementHasFocus[1]}\" [ngStyle]=\"animationLabel(formGenerateReport,\n            'select')\">\n                     Fecha de fin\n                    <i class=\"fab fa-font-awesome-alt\"></i>\n                </label>\n                <input type=\"date\" formControlName=\"endDate\" (focus)=\"isFocused(1,formGenerateReport,'select')\"\n                    (focusout)=\"isFocused(1,formGenerateReport,'select')\" class=\"form-input\"\n                    min=\"{{formGenerateReport.get('initialDate')?.value|date:'yyyy-MM-dd'}}\">\n            </div>\n        </div>\n        <div class=\"form-actions\">\n            <button class=\"form-button btn\" title=\"{{verificarFechas().msj}}\"\n            (click)=\"createPDF('reporte de fechas')\"\n            [ngClass]=\"{'enable':verificarFechas().isValid}\">\n                <i class=\"far fa-save\"></i>\n                &nbsp;&nbsp;GENERAR REPORTE</button>\n        </div>\n    </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}