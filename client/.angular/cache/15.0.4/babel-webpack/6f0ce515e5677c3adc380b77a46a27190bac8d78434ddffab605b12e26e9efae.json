{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport { DinamicInput } from 'src/app/utils/DinamicInput';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/services/comunicator/comunicator-componets.service\";\nimport * as i4 from \"../service/categorias.service\";\nimport * as i5 from \"@angular/common\";\nconst _c0 = [\"popup\"];\nconst _c1 = function (a0) {\n  return {\n    \"btn-save\": a0\n  };\n};\nfunction NuevaCategoriaComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function NuevaCategoriaComponent_div_16_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.openModal(ctx_r4.formNewCategory));\n    });\n    i0.ɵɵelement(2, \"i\", 20);\n    i0.ɵɵtext(3, \" \\u00A0\\u00A0ACEPTAR\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function NuevaCategoriaComponent_div_16_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.clean());\n    });\n    i0.ɵɵelement(5, \"i\", 22);\n    i0.ɵɵtext(6, \" \\u00A0\\u00A0LIMPIAR\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(1, _c1, ctx_r0.formNewCategory.valid));\n  }\n}\nconst _c2 = function (a0) {\n  return {\n    \"btn-update\": a0\n  };\n};\nfunction NuevaCategoriaComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function NuevaCategoriaComponent_div_17_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.openModal(ctx_r7.formNewCategory));\n    });\n    i0.ɵɵelement(2, \"i\", 15);\n    i0.ɵɵtext(3, \" \\u00A0\\u00A0ACTUALIZAR\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(1, _c2, ctx_r1.formNewCategory.valid));\n  }\n}\nfunction NuevaCategoriaComponent_button_32_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function NuevaCategoriaComponent_button_32_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.cancel());\n    });\n    i0.ɵɵtext(1, \" \\u00A0\\u00A0CANCELAR\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c3 = function (a0, a1) {\n  return {\n    \"input-on-focus-success\": a0,\n    \"input-on-focus-fail\": a1\n  };\n};\nconst _c4 = function (a0, a1) {\n  return {\n    \"label-on-focus-down\": a0,\n    \"label-on-focus-up\": a1\n  };\n};\nexport class NuevaCategoriaComponent extends DinamicInput {\n  constructor(fb, routes, comunicatorSvc$, route, categoriasSvc, renderer) {\n    super();\n    this.fb = fb;\n    this.routes = routes;\n    this.comunicatorSvc$ = comunicatorSvc$;\n    this.route = route;\n    this.categoriasSvc = categoriasSvc;\n    this.renderer = renderer;\n    this.usedClass = [];\n  }\n  ngOnInit() {\n    setTimeout(() => {\n      this.usedClass[0] = \"input-on-focus\";\n      this.ruta = this.routes.url.slice(this.routes.url.slice(1).indexOf('/') + 2);\n      this.title = [];\n      if (this.ruta.indexOf(\"actualizar\")) {\n        this.title.push(\"fa fa-tags fa-fw\"); //añado el icono del titulo al array\n      } else {\n        this.ruta = this.routes.url.slice(this.routes.url.slice(1).indexOf('/') + 2, this.routes.url.lastIndexOf('/'));\n        this.title.push(\"fa fa-arrows-rotate\");\n      }\n      this.title.push(decodeURI(this.ruta).toUpperCase()); //añado el titulo al array\n      this.comunicatorSvc$.setTitleComponent(this.title);\n    });\n    this.formNewCategory = this.fb.group({\n      name: new FormControl('', [Validators.required, Validators.pattern(/^[a-zA-Z ]+$/)]),\n      ubication: new FormControl('', [Validators.required])\n    });\n    if (this.routes.url.includes(\"actualizar\")) {\n      this.route.paramMap.subscribe(params => {\n        this.id_category = Number(params.get('id_category'));\n        this.categoriasSvc.getCategory(this.id_category).subscribe({\n          next: res => {\n            if (res instanceof Array) {\n              this.formNewCategory.get('name')?.setValue(res[0].name);\n              this.formNewCategory.get('ubication')?.setValue(res[0].ubication);\n            } else {\n              this.changeModal(res);\n              this.popUp?.nativeElement.showModal();\n            }\n          },\n          error: error => {\n            this.error(error);\n          }\n        });\n      });\n    }\n  }\n  error(error) {\n    this.changeModal(this.comunicatorSvc$.errorServer(error));\n    this.popUp?.nativeElement.showModal();\n  }\n  submit() {\n    console.log;\n    this.categoriasSvc.setCategory(this.formNewCategory.value).subscribe({\n      next: res => {\n        this.changeModal(res);\n        this.popUp?.nativeElement.showModal();\n      },\n      error: error => {\n        this.error(error);\n      }\n    });\n  }\n  acept() {\n    this.popUp?.nativeElement.close();\n    if (this.popUp?.nativeElement.children[1].textContent === '¿Estas seguro?') {\n      if (this.ruta.indexOf(\"actualizar\")) {\n        this.submit();\n      } else {\n        this.update();\n      }\n    }\n  }\n  update() {\n    this.categoriasSvc.updateCategory(Number(this.id_category), this.formNewCategory.value).subscribe({\n      next: res => {\n        console.log(res);\n        this.changeModal(res);\n        console.log(this.popUp?.nativeElement);\n        this.popUp?.nativeElement.showModal();\n      },\n      error: error => {\n        this.error(error);\n      }\n    });\n    this.redirectToListCategories();\n  }\n  redirectToListCategories() {\n    this.routes.navigate(['/administracion/lista categorías']);\n  }\n  clean() {\n    this.formNewCategory.get('name')?.setValue('');\n    this.formNewCategory.get('ubication')?.setValue('');\n  }\n}\nNuevaCategoriaComponent.ɵfac = function NuevaCategoriaComponent_Factory(t) {\n  return new (t || NuevaCategoriaComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.ComunicatorComponetsService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i4.CategoriasService), i0.ɵɵdirectiveInject(i0.Renderer2));\n};\nNuevaCategoriaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NuevaCategoriaComponent,\n  selectors: [[\"app-nueva-categoria\"]],\n  viewQuery: function NuevaCategoriaComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.popUp = _t.first);\n    }\n  },\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 33,\n  vars: 24,\n  consts: [[1, \"form-container\"], [1, \"form-title\"], [1, \"far\", \"fa-address-card\"], [1, \"form\", 3, \"formGroup\"], [1, \"form-group\"], [1, \"form-control\", 3, \"ngClass\"], [1, \"form-label\", 3, \"ngClass\", \"ngStyle\"], [1, \"fab\", \"fa-font-awesome-alt\"], [\"formControlName\", \"name\", \"autofocus\", \"\", 1, \"form-input\", 3, \"ngStyle\", \"focus\", \"focusout\"], [\"formControlName\", \"ubication\", 1, \"form-input\", 3, \"ngStyle\", \"focus\", \"focusout\"], [\"class\", \"form-actions\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"form-info\"], [1, \"dialog\"], [\"popup\", \"\"], [1, \"fa\", \"fa-arrows-rotate\"], [1, \"form-button\", \"btn-save\", 3, \"click\"], [\"class\", \"form-button btn-save\", 3, \"click\", 4, \"ngIf\"], [1, \"form-actions\"], [1, \"form-button\", 3, \"ngClass\", \"click\"], [1, \"far\", \"fa-save\"], [1, \"form-button\", \"btn-clean\", 3, \"click\"], [1, \"fas\", \"fa-paint-roller\"]],\n  template: function NuevaCategoriaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\", 1);\n      i0.ɵɵelement(2, \"i\", 2);\n      i0.ɵɵtext(3, \" \\u00A0Informaci\\u00F3n de la categor\\u00EDa \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"label\", 6);\n      i0.ɵɵtext(8, \" Nombre de la categor\\u00EDa \");\n      i0.ɵɵelement(9, \"i\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"input\", 8);\n      i0.ɵɵlistener(\"focus\", function NuevaCategoriaComponent_Template_input_focus_10_listener() {\n        return ctx.isFocused(0, ctx.formNewCategory, \"name\");\n      })(\"focusout\", function NuevaCategoriaComponent_Template_input_focusout_10_listener() {\n        return ctx.isFocused(0, ctx.formNewCategory, \"name\");\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(11, \"div\", 5)(12, \"label\", 6);\n      i0.ɵɵtext(13, \" Pasillo o ubicaci\\u00F3n de la categor\\u00EDa \");\n      i0.ɵɵelement(14, \"i\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"input\", 9);\n      i0.ɵɵlistener(\"focus\", function NuevaCategoriaComponent_Template_input_focus_15_listener() {\n        return ctx.isFocused(1, ctx.formNewCategory, \"ubication\");\n      })(\"focusout\", function NuevaCategoriaComponent_Template_input_focusout_15_listener() {\n        return ctx.isFocused(1, ctx.formNewCategory, \"ubication\");\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(16, NuevaCategoriaComponent_div_16_Template, 7, 3, \"div\", 10);\n      i0.ɵɵtemplate(17, NuevaCategoriaComponent_div_17_Template, 4, 3, \"div\", 11);\n      i0.ɵɵelementStart(18, \"p\", 12);\n      i0.ɵɵtext(19, \"Los campos marcados con \");\n      i0.ɵɵelement(20, \"i\", 7);\n      i0.ɵɵtext(21, \" son obligatorios\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(22, \"dialog\", 13, 14);\n      i0.ɵɵelement(24, \"i\", 15);\n      i0.ɵɵelementStart(25, \"h3\");\n      i0.ɵɵtext(26, \"\\u00BFEstas seguro?\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"p\");\n      i0.ɵɵtext(28, \"Lois datos seran guardados en el sistema\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"div\")(30, \"button\", 16);\n      i0.ɵɵlistener(\"click\", function NuevaCategoriaComponent_Template_button_click_30_listener() {\n        return ctx.acept();\n      });\n      i0.ɵɵtext(31, \" \\u00A0\\u00A0ACEPTAR\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(32, NuevaCategoriaComponent_button_32_Template, 2, 0, \"button\", 17);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formGroup\", ctx.formNewCategory);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(12, _c3, ctx.verifyStyleInput(ctx.formNewCategory, \"name\") && ctx.elementHasFocus[0], !ctx.verifyStyleInput(ctx.formNewCategory, \"name\")));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(15, _c4, ctx.elementHasFocus[0] && ctx.positionLabel[0], ctx.elementHasFocus[0] && !ctx.positionLabel[0]))(\"ngStyle\", ctx.animationLabel(ctx.formNewCategory, \"name\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngStyle\", ctx.styleForeground(ctx.formNewCategory, \"name\"));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(18, _c3, ctx.verifyStyleInput(ctx.formNewCategory, \"ubication\") && ctx.elementHasFocus[1], !ctx.verifyStyleInput(ctx.formNewCategory, \"ubication\")));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(21, _c4, ctx.elementHasFocus[1] && ctx.positionLabel[1], ctx.elementHasFocus[1] && !ctx.positionLabel[1]))(\"ngStyle\", ctx.animationLabel(ctx.formNewCategory, \"ubication\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngStyle\", ctx.styleForeground(ctx.formNewCategory, \"ubication\"));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.routes.url.includes(\"nueva\"));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.routes.url.includes(\"actualizar\"));\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngIf\", (ctx.popUp == null ? null : ctx.popUp.nativeElement.children[1].textContent) === \"\\u00BFEstas seguro?\");\n    }\n  },\n  dependencies: [i5.NgClass, i5.NgIf, i5.NgStyle, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\".form-group[_ngcontent-%COMP%] {\\n    flex-wrap: wrap;\\n  }\\n  .form-control[_ngcontent-%COMP%] {\\n    width: 40%;\\n    min-width: 200px;\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29udGVudC9hZG1pbmlzdHJhY2lvbi9jYXRlZ29yaWFzL251ZXZhLWNhdGVnb3JpYS9udWV2YS1jYXRlZ29yaWEuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGVBQWU7RUFDakI7RUFDQTtJQUNFLFVBQVU7SUFDVixnQkFBZ0I7RUFDbEIiLCJzb3VyY2VzQ29udGVudCI6WyIuZm9ybS1ncm91cCB7XG4gICAgZmxleC13cmFwOiB3cmFwO1xuICB9XG4gIC5mb3JtLWNvbnRyb2wge1xuICAgIHdpZHRoOiA0MCU7XG4gICAgbWluLXdpZHRoOiAyMDBweDtcbiAgfSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","Validators","DinamicInput","i0","NuevaCategoriaComponent","constructor","fb","routes","comunicatorSvc$","route","categoriasSvc","renderer","ngOnInit","setTimeout","usedClass","ruta","url","slice","indexOf","title","push","lastIndexOf","decodeURI","toUpperCase","setTitleComponent","formNewCategory","group","name","required","pattern","ubication","includes","paramMap","subscribe","params","id_category","Number","get","getCategory","next","res","Array","setValue","changeModal","popUp","nativeElement","showModal","error","errorServer","submit","console","log","setCategory","value","acept","close","children","textContent","update","updateCategory","redirectToListCategories","navigate","clean","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["/home/luis/Documentos/systems vs code/inventary-system/client/src/app/content/administracion/categorias/nueva-categoria/nueva-categoria.component.ts","/home/luis/Documentos/systems vs code/inventary-system/client/src/app/content/administracion/categorias/nueva-categoria/nueva-categoria.component.html"],"sourcesContent":["import { Component, ElementRef, Renderer2, ViewChild } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, ParamMap, Router } from '@angular/router';\nimport { ComunicatorComponetsService } from 'src/app/services/comunicator/comunicator-componets.service';\nimport { DinamicInput } from 'src/app/utils/DinamicInput';\nimport { CategoriasService } from '../service/categorias.service';\nimport { HttpErrorResponse } from '@angular/common/http';\n\n@Component({\n  selector: 'app-nueva-categoria',\n  templateUrl: './nueva-categoria.component.html',\n  styleUrls: ['./nueva-categoria.component.css']\n})\n\nexport class NuevaCategoriaComponent extends DinamicInput {\n\n  formNewCategory!: FormGroup;\n  usedClass: string[] = [];\n  title!: string[];\n  ruta!: string;\n  id_category!: number;\n\n  @ViewChild('popup', { static: true }) override popUp?: ElementRef;\n\n\n  constructor(private fb: FormBuilder,\n    public routes: Router,\n    private comunicatorSvc$: ComunicatorComponetsService,\n    private route:ActivatedRoute,\n    private categoriasSvc: CategoriasService,\n    protected override renderer: Renderer2) {\n    super();\n\n  }\n\n  ngOnInit() {\n    setTimeout(() => {\n      this.usedClass[0] = \"input-on-focus\";\n      this.ruta = this.routes.url.slice((this.routes.url.slice(1).indexOf('/')) + 2);\n      this.title = []\n      if (this.ruta.indexOf(\"actualizar\")) {\n        this.title.push(\"fa fa-tags fa-fw\");//añado el icono del titulo al array\n      } else {\n        this.ruta = this.routes.url.slice((this.routes.url.slice(1).indexOf('/')) + 2, this.routes.url.lastIndexOf('/'));\n        this.title.push(\"fa fa-arrows-rotate\");\n      }\n      this.title.push(decodeURI(this.ruta).toUpperCase());//añado el titulo al array\n      this.comunicatorSvc$.setTitleComponent(this.title);\n    })\n    this.formNewCategory = this.fb.group({\n      name: new FormControl('', [Validators.required, Validators.pattern(/^[a-zA-Z ]+$/)]),\n      ubication: new FormControl('', [Validators.required])\n    })\n    if (this.routes.url.includes(\"actualizar\")) {\n      this.route.paramMap.subscribe((params: ParamMap) => {\n        this.id_category = Number(params.get('id_category'));\n        this.categoriasSvc.getCategory(this.id_category).subscribe({\n          next: res => {\n            if (res instanceof Array) {\n              this.formNewCategory.get('name')?.setValue(res[0].name)\n              this.formNewCategory.get('ubication')?.setValue(res[0].ubication)\n            } else {\n              this.changeModal(res)\n              this.popUp?.nativeElement.showModal()\n            }\n          },\n          error: (error: HttpErrorResponse) => {\n            this.error(error)\n          }\n        });\n      });\n    }\n  }\n\n  public error(error: HttpErrorResponse) {\n    this.changeModal(this.comunicatorSvc$.errorServer(error))\n    this.popUp?.nativeElement.showModal()\n  }\n\n  submit() {\n    console.log\n    this.categoriasSvc.setCategory(this.formNewCategory.value).subscribe({\n      next: res => {\n        this.changeModal(res);\n        this.popUp?.nativeElement.showModal()\n      },\n      error: (error: HttpErrorResponse) => {\n        this.error(error)\n      }\n    })\n  }\n  acept() {\n    this.popUp?.nativeElement.close();\n    if (this.popUp?.nativeElement.children[1].textContent === '¿Estas seguro?') {\n      if (this.ruta.indexOf(\"actualizar\")) {\n        this.submit()\n      } else {\n        this.update()\n      }\n    }\n  }\n\n  update() {\n    this.categoriasSvc.updateCategory(Number(this.id_category),\n      this.formNewCategory.value).subscribe({\n        next: res => {\n          console.log(res)\n          this.changeModal(res);\n          console.log(this.popUp?.nativeElement)\n          this.popUp?.nativeElement.showModal();\n        },\n        error: (error: HttpErrorResponse) => {\n          this.error(error);\n        }\n      })\n    this.redirectToListCategories();\n  }\n  redirectToListCategories() {\n    this.routes.navigate(['/administracion/lista categorías'])\n  }\n\n  clean() {\n    this.formNewCategory.get('name')?.setValue('');\n    this.formNewCategory.get('ubication')?.setValue('');\n  }\n}\n","<div class=\"form-container\">\n    <h3 class=\"form-title\">\n        <i class=\"far fa-address-card\"></i>\n        &nbsp;Información de la categoría\n    </h3>\n    <div class=\"form\" [formGroup]=\"formNewCategory\">\n        <div class=\"form-group\">\n            <div class=\"form-control\" \n            [ngClass]=\"{'input-on-focus-success':verifyStyleInput(formNewCategory,'name') && \n            elementHasFocus[0],'input-on-focus-fail':!verifyStyleInput(formNewCategory,'name')}\">\n                <label class=\"form-label\" \n                [ngClass]=\"{'label-on-focus-down':elementHasFocus[0]&&positionLabel[0],\n                'label-on-focus-up':elementHasFocus[0]&&!positionLabel[0]}\"\n                [ngStyle]=\"animationLabel(formNewCategory,'name')\">\n                    Nombre de la categoría\n                    <i class=\"fab fa-font-awesome-alt\"></i>\n                </label>\n                <input formControlName=\"name\" autofocus\n                (focus)=\"isFocused(0,formNewCategory,'name')\"\n                (focusout)=\"isFocused(0,formNewCategory,'name')\"\n                class=\"form-input\" [ngStyle]=\"styleForeground(formNewCategory,'name')\">\n            </div>\n            <div class=\"form-control\"\n            [ngClass]=\"{'input-on-focus-success':verifyStyleInput(formNewCategory,'ubication') && \n            elementHasFocus[1],'input-on-focus-fail':!verifyStyleInput(formNewCategory,'ubication')}\">\n                <label class=\"form-label\" \n                [ngClass]=\"{'label-on-focus-down':\n                elementHasFocus[1]&&positionLabel[1],\n                'label-on-focus-up':\n                elementHasFocus[1]&&!positionLabel[1]}\"\n                [ngStyle]=\"animationLabel(formNewCategory,\n                'ubication')\">\n                    Pasillo o ubicación de la categoría\n                    <i class=\"fab fa-font-awesome-alt\"></i>\n                </label>\n                <input formControlName=\"ubication\"\n                (focus)=\"isFocused(1,formNewCategory,'ubication')\"\n                (focusout)=\"isFocused(1,formNewCategory,'ubication')\"\n                class=\"form-input\" [ngStyle]=\"styleForeground(formNewCategory,'ubication')\">\n                \n            </div>\n        </div>\n        <div *ngIf=\"this.routes.url.includes('nueva')\" class=\"form-actions\">\n            <button class=\"form-button\" [ngClass]=\"{'btn-save':formNewCategory.valid}\" \n            (click)=\"openModal(formNewCategory)\">\n                <i class=\"far fa-save\"></i>\n                &nbsp;&nbsp;ACEPTAR</button>\n\n            <button class=\"form-button btn-clean\" (click)=\"clean()\">\n                <i class=\"fas fa-paint-roller\"></i>\n                &nbsp;&nbsp;LIMPIAR</button>\n        </div>\n        <div *ngIf=\"this.routes.url.includes('actualizar')\">\n            <button class=\"form-button\" [ngClass]=\"{'btn-update':formNewCategory.valid}\" \n            (click)=\"openModal(formNewCategory)\">\n                <i class=\"fa fa-arrows-rotate\"></i>\n                &nbsp;&nbsp;ACTUALIZAR</button>\n        </div>\n        <p class=\"form-info\">Los campos marcados con <i class=\"fab fa-font-awesome-alt\"></i> \n            son obligatorios</p>\n    </div>\n</div>\n<dialog class=\"dialog\" #popup>\n    <i class=\"fa fa-arrows-rotate\"></i>\n    <h3>¿Estas seguro?</h3>\n    <p>Lois datos seran guardados en el sistema</p>\n    <div>\n        <button class=\"form-button btn-save\" (click)=\"acept()\">\n            &nbsp;&nbsp;ACEPTAR</button>\n        <button *ngIf=\"this.popUp?.nativeElement.children[1].textContent === '¿Estas seguro?'\"\n         class=\"form-button btn-save\" (click)=\"cancel()\">\n            &nbsp;&nbsp;CANCELAR</button>\n    </div>\n</dialog>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}