{"ast":null,"code":"import { DinamicTable } from 'src/app/utils/DinamicTable';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/comunicator/comunicator-componets.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"src/app/content/compras/service/compras.service\";\nimport * as i5 from \"src/app/content/configuraciones/service/coins.service\";\nimport * as i6 from \"../../service/kardex.service\";\nfunction DetallesKardexComponent_div_7_i_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"i\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" / \", i0.ɵɵpipeBind2(2, 1, ctx_r1.comunicatorSvc.converterToMainCoin(ctx_r1.kardex.price, ctx_r1.kardex.exchange), ctx_r1.mainCoin.symbol + \" \"), \"\");\n  }\n}\nfunction DetallesKardexComponent_div_7_i_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"i\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" / \", i0.ɵɵpipeBind2(2, 1, ctx_r2.comunicatorSvc.converterToMainCoin(ctx_r2.kardex.price, ctx_r2.kardex.exchange) * ctx_r2.productOperation.discount_product, ctx_r2.mainCoin.symbol + \" \"), \"\");\n  }\n}\nfunction DetallesKardexComponent_div_7_i_66_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"i\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" / \", ctx_r3.calcularMontoImponible(ctx_r3.comunicatorSvc.converterToMainCoin(ctx_r3.kardex.price, ctx_r3.kardex.exchange)), \"\");\n  }\n}\nfunction DetallesKardexComponent_div_7_i_72_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"i\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" / \", ctx_r4.kardex.weighted_averages_sell, \"\");\n  }\n}\nfunction DetallesKardexComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\")(2, \"h3\");\n    i0.ɵɵtext(3, \"ENTRADAS\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\")(5, \"strong\");\n    i0.ɵɵtext(6, \"Fecha: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"date\");\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\")(11, \"strong\");\n    i0.ɵɵtext(12, \"N\\u00B0 factura: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"p\")(15, \"strong\");\n    i0.ɵɵtext(16, \"Entrada de unidades: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"p\")(19, \"strong\");\n    i0.ɵɵtext(20, \"Costo de unidades: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21);\n    i0.ɵɵpipe(22, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"p\")(24, \"strong\");\n    i0.ɵɵtext(25, \"Precio de venta de unidades: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26);\n    i0.ɵɵpipe(27, \"currency\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(28, \"div\")(29, \"h3\");\n    i0.ɵɵtext(30, \"EXISTENCIAS\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"p\")(32, \"strong\");\n    i0.ɵɵtext(33, \"Inventario inicial: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"p\")(36, \"strong\");\n    i0.ɵɵtext(37, \"Inventario final del producto:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"p\")(40, \"strong\");\n    i0.ɵɵtext(41, \"Precio inicial del producto: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(42);\n    i0.ɵɵpipe(43, \"currency\");\n    i0.ɵɵtemplate(44, DetallesKardexComponent_div_7_i_44_Template, 3, 4, \"i\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(45, \"p\")(46, \"strong\");\n    i0.ɵɵtext(47, \"Descuento:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(48);\n    i0.ɵɵpipe(49, \"percent\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(50, \"p\")(51, \"strong\");\n    i0.ɵɵtext(52, \"Valor de descuento: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(53);\n    i0.ɵɵpipe(54, \"currency\");\n    i0.ɵɵtemplate(55, DetallesKardexComponent_div_7_i_55_Template, 3, 4, \"i\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(56, \"p\")(57, \"strong\");\n    i0.ɵɵtext(58, \"Impuesto: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(59);\n    i0.ɵɵpipe(60, \"percent\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(61, \"p\")(62, \"strong\");\n    i0.ɵɵtext(63, \"Valor del impuesto: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(64);\n    i0.ɵɵpipe(65, \"currency\");\n    i0.ɵɵtemplate(66, DetallesKardexComponent_div_7_i_66_Template, 2, 1, \"i\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(67, \"p\")(68, \"strong\");\n    i0.ɵɵtext(69, \"Precio final del producto :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(70);\n    i0.ɵɵpipe(71, \"currency\");\n    i0.ɵɵtemplate(72, DetallesKardexComponent_div_7_i_72_Template, 2, 1, \"i\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(73, \"p\")(74, \"strong\");\n    i0.ɵɵtext(75, \"Total: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(76);\n    i0.ɵɵpipe(77, \"currency\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(8, 19, ctx_r0.kardex.date, \"dd/MM/yyyy\"), \" \", i0.ɵɵpipeBind2(9, 22, ctx_r0.kardex.time, \"hh:mm:ss aaaa\"), \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.kardex.id_operation);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.kardex.quantity_products);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(22, 25, ctx_r0.productOperation.buy_price, ctx_r0.kardex.coin_kardex + \" \"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(27, 28, ctx_r0.productOperation.sell_price, ctx_r0.kardex.coin_kardex + \" \"));\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(ctx_r0.kardex.exist - ctx_r0.kardex.quantity_products);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.kardex.exist, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(43, 31, ctx_r0.kardex.price, ctx_r0.kardex.coin_kardex + \" \"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.kardex.coin_kardex != ctx_r0.mainCoin.symbol);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(49, 34, ctx_r0.productOperation.discount_product, \"2.2-2\"), \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(54, 37, ctx_r0.kardex.price * ctx_r0.productOperation.discount_product, ctx_r0.kardex.coin_kardex + \" \"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.kardex.coin_kardex != ctx_r0.mainCoin.symbol);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(60, 40, ctx_r0.productOperation.impuest, \"2.2-2\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(65, 43, ctx_r0.calcularMontoImponible(ctx_r0.kardex.price), ctx_r0.kardex.coin_kardex + \" \"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.kardex.coin_kardex != ctx_r0.mainCoin.symbol);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(71, 46, ctx_r0.comunicatorSvc.converterToSecondaryCoin(ctx_r0.kardex.weighted_averages_sell, ctx_r0.kardex.exchange), ctx_r0.kardex.coin_kardex + \" \"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.kardex.coin_kardex != ctx_r0.mainCoin.symbol);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(77, 49, ctx_r0.kardex.weighted_averages_sell * ctx_r0.kardex.exist, ctx_r0.mainCoin.symbol + \" \"), \"\");\n  }\n}\nexport class DetallesKardexComponent extends DinamicTable {\n  constructor(routes, comunicatorSvc, renderer, route, location, comprasSvc, coinsSvc, kardexSvc) {\n    super(renderer);\n    this.routes = routes;\n    this.comunicatorSvc = comunicatorSvc;\n    this.renderer = renderer;\n    this.route = route;\n    this.location = location;\n    this.comprasSvc = comprasSvc;\n    this.coinsSvc = coinsSvc;\n    this.kardexSvc = kardexSvc;\n    this.title = [];\n  }\n  ngOnInit() {\n    setTimeout(() => {\n      /* Obtengo la ruta actual y la transformo para obtener el titulo del componente*/\n      this.ruta = this.routes.url.slice(this.routes.url.slice(1).indexOf('/') + 2, this.routes.url.lastIndexOf('?'));\n      this.title.push(\"fas fa-coins fa-fw\"); //aañado el icono del titulo al array\n      this.title.push(decodeURI(this.ruta).toUpperCase()); //añado el titulo al array\n      this.comunicatorSvc.setTitleComponent(this.title);\n    });\n    this.coinsSvc.getMainCoin().subscribe(res => {\n      if (res instanceof Array) this.mainCoin = res[0];\n    });\n    this.route.queryParams.subscribe(params => {\n      this.comprasSvc.getProductBuy(params['id'], params['id_product']).subscribe(res => {\n        if (res instanceof Array) this.productOperation = res[0];\n      });\n      this.kardexSvc.getKardexById('compra', params['id']).subscribe(res => {\n        if (res instanceof Array) {\n          console.log(res);\n          this.kardex = res[0];\n        }\n      });\n    });\n  }\n  calcularMontoImponible(price) {\n    let price_wiht_discount = Number((price - Number((price * this.productOperation.discount_product).toFixed(2))).toFixed(2));\n    let montoImponible = Number((this.productOperation.impuest * price_wiht_discount).toFixed(2));\n    return montoImponible;\n  }\n  redirectToKardex() {\n    this.location.back();\n  }\n}\nDetallesKardexComponent.ɵfac = function DetallesKardexComponent_Factory(t) {\n  return new (t || DetallesKardexComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ComunicatorComponetsService), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Location), i0.ɵɵdirectiveInject(i4.ComprasService), i0.ɵɵdirectiveInject(i5.CoinsService), i0.ɵɵdirectiveInject(i6.KardexService));\n};\nDetallesKardexComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DetallesKardexComponent,\n  selectors: [[\"app-detalles-kardex\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 8,\n  vars: 1,\n  consts: [[1, \"form-container\"], [1, \"back\"], [1, \"form-button\", \"btn-save\", 3, \"click\"], [1, \"fas\", \"fa-reply\"], [1, \"form-title\"], [\"class\", \"datos\", 4, \"ngIf\"], [1, \"datos\"], [4, \"ngIf\"]],\n  template: function DetallesKardexComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function DetallesKardexComponent_Template_button_click_2_listener() {\n        return ctx.redirectToKardex();\n      });\n      i0.ɵɵelement(3, \"i\", 3);\n      i0.ɵɵtext(4, \" \\u00A0Regresar\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"h3\", 4);\n      i0.ɵɵtext(6, \" \\u00A0Datos de la venta \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(7, DetallesKardexComponent_div_7_Template, 78, 52, \"div\", 5);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.kardex !== undefined);\n    }\n  },\n  dependencies: [i3.NgIf, i3.PercentPipe, i3.CurrencyPipe, i3.DatePipe],\n  styles: [\".datos[_ngcontent-%COMP%]{\\n    width: 100%;\\n    display: flex;\\n    justify-content: space-between;\\n    flex-grow: 0;\\n}\\n.datos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{\\n    width: 100%;\\n    margin: 1rem;\\n}\\n.datos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{\\n    color:white;\\n    padding: .3rem;\\n    background-color: #424242;\\n    text-align: center;\\n}\\n.back[_ngcontent-%COMP%]{\\n    display: flex;\\n    justify-content: right;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29udGVudC9rYXJkZXgvZGV0YWxsZXMta2FyZGV4L2RldGFsbGVzLWthcmRleC9kZXRhbGxlcy1rYXJkZXguY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLFdBQVc7SUFDWCxhQUFhO0lBQ2IsOEJBQThCO0lBQzlCLFlBQVk7QUFDaEI7QUFDQTtJQUNJLFdBQVc7SUFDWCxZQUFZO0FBQ2hCO0FBQ0E7SUFDSSxXQUFXO0lBQ1gsY0FBYztJQUNkLHlCQUF5QjtJQUN6QixrQkFBa0I7QUFDdEI7QUFDQTtJQUNJLGFBQWE7SUFDYixzQkFBc0I7QUFDMUIiLCJzb3VyY2VzQ29udGVudCI6WyIuZGF0b3N7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgZmxleC1ncm93OiAwO1xufVxuLmRhdG9zIGRpdntcbiAgICB3aWR0aDogMTAwJTtcbiAgICBtYXJnaW46IDFyZW07XG59XG4uZGF0b3MgZGl2IGgze1xuICAgIGNvbG9yOndoaXRlO1xuICAgIHBhZGRpbmc6IC4zcmVtO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICM0MjQyNDI7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuLmJhY2t7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHJpZ2h0O1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["DinamicTable","i0","DetallesKardexComponent","constructor","routes","comunicatorSvc","renderer","route","location","comprasSvc","coinsSvc","kardexSvc","ngOnInit","setTimeout","ruta","url","slice","indexOf","lastIndexOf","title","push","decodeURI","toUpperCase","setTitleComponent","getMainCoin","subscribe","res","Array","mainCoin","queryParams","params","getProductBuy","productOperation","getKardexById","console","log","kardex","calcularMontoImponible","price","price_wiht_discount","Number","discount_product","toFixed","montoImponible","impuest","redirectToKardex","back","selectors","features","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/home/luis/Documentos/systems vs code/inventary-system/client/src/app/content/kardex/detalles-kardex/detalles-kardex/detalles-kardex.component.ts","/home/luis/Documentos/systems vs code/inventary-system/client/src/app/content/kardex/detalles-kardex/detalles-kardex/detalles-kardex.component.html"],"sourcesContent":["import { Component, Renderer2 } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ComprasService } from 'src/app/content/compras/service/compras.service';\nimport { VentasService } from 'src/app/content/ventas/service/ventas.service';\nimport { buy, buy_product, coin, kardex, sell, sell_product } from 'src/app/interfaces/interfaces';\nimport { ComunicatorComponetsService } from 'src/app/services/comunicator/comunicator-componets.service';\nimport { DinamicTable } from 'src/app/utils/DinamicTable';\nimport { Location } from '@angular/common';\nimport { CoinsService } from 'src/app/content/configuraciones/service/coins.service';\nimport { KardexService } from '../../service/kardex.service';\n\n@Component({\n  selector: 'app-detalles-kardex',\n  templateUrl: './detalles-kardex.component.html',\n  styleUrls: ['./detalles-kardex.component.css']\n})\nexport class DetallesKardexComponent extends DinamicTable {\n  productOperation!: buy_product|sell_product\n  ruta!: string\n  title: string[] = []\n  kardex!:kardex\n  mainCoin!: coin\n  constructor(private routes: Router,\n    public comunicatorSvc: ComunicatorComponetsService,\n    public override renderer: Renderer2,\n    private route: ActivatedRoute,\n    private location: Location,\n    private comprasSvc: ComprasService,\n    private coinsSvc:CoinsService,\n    private kardexSvc:KardexService) {\n    super(renderer)\n  }\n  ngOnInit() {\n    setTimeout(() => {\n      /* Obtengo la ruta actual y la transformo para obtener el titulo del componente*/\n      this.ruta = this.routes.url.slice((this.routes.url.slice(1).indexOf('/')) + 2, this.routes.url.lastIndexOf('?'));\n      this.title.push(\"fas fa-coins fa-fw\");//aañado el icono del titulo al array\n      this.title.push(decodeURI(this.ruta).toUpperCase());//añado el titulo al array\n      this.comunicatorSvc.setTitleComponent(this.title);\n    });\n    this.coinsSvc.getMainCoin().subscribe(res => {\n      if (res instanceof Array)\n        this.mainCoin = res[0]\n    })\n    this.route.queryParams.subscribe((params) => {\n      \n      this.comprasSvc.getProductBuy(params['id'], params['id_product']).subscribe(res => {\n        if (res instanceof Array)\n          this.productOperation = res[0]\n      })\n      this.kardexSvc.getKardexById('compra',params['id']).subscribe(res=>{\n        if(res instanceof Array){\n          console.log(res)\n          this.kardex=res[0]\n        }\n      })\n    })\n    \n  }\n\n  calcularMontoImponible(price:number){\n    let price_wiht_discount=Number((price - (Number((price * this.productOperation.discount_product).toFixed(2)))).toFixed(2))\n    let montoImponible = Number((this.productOperation.impuest * price_wiht_discount).toFixed(2))\n    return montoImponible\n  }\n  redirectToKardex() {\n    this.location.back()\n  }\n}\n","<div class=\"form-container\">\n    <div class=\"back\">\n        <button (click)=\"redirectToKardex()\" class=\"form-button btn-save\"><i class=\"fas fa-reply\"></i>\n            &nbsp;Regresar</button>\n    </div>\n    <h3 class=\"form-title\">\n        &nbsp;Datos de la venta\n    </h3>\n    <div class=\"datos\" *ngIf=\"kardex!==undefined\">\n        <div>\n            <h3>ENTRADAS</h3>\n            <p><strong>Fecha: </strong>{{kardex.date|date:'dd/MM/yyyy'}} {{kardex.time|date:'hh:mm:ss aaaa'}}</p>\n            <p><strong>N° factura: </strong>{{kardex.id_operation}}</p>\n            <p><strong>Entrada de unidades: </strong>{{kardex.quantity_products}}</p>\n            <p><strong>Costo de unidades: </strong>{{productOperation.buy_price|currency:kardex.coin_kardex+' '}}</p>\n            <p><strong>Precio de venta de unidades: </strong>{{productOperation.sell_price|currency:kardex.coin_kardex+' '}}</p>\n        </div>\n       <!--  <div>\n            <h3>CAJA Y USUARIO</h3>\n            <p><strong>Caja: </strong>{{register_buy.name}}</p>\n            <p><strong>Vendedor: </strong>{{user_buy.names_user}} {{user_buy.last_names_user}}</p>\n            <p><strong>Cliente: </strong> {{client.names_client}} {{client.last_names_client}}</p>\n        </div> -->\n        <div>\n            <h3>EXISTENCIAS</h3>\n            <p><strong>Inventario inicial: </strong>{{kardex.exist-kardex.quantity_products}}</p>\n            <p><strong>Inventario final del producto:</strong> {{kardex.exist}}</p>\n            <p><strong>Precio inicial del producto: </strong>{{kardex.price|currency:kardex.coin_kardex+' '}}\n                <i *ngIf=\"kardex.coin_kardex!=mainCoin.symbol\"> /\n                    {{comunicatorSvc.converterToMainCoin(kardex.price,kardex.exchange)|currency:mainCoin.symbol+' '}}</i>\n            </p>\n            \n            <p><strong>Descuento:</strong> {{productOperation.discount_product|percent:'2.2-2'}}</p> \n            <p><strong>Valor de descuento: </strong>\n                {{kardex.price*productOperation.discount_product|currency:kardex.coin_kardex+' '}}\n                <i *ngIf=\"kardex.coin_kardex!=mainCoin.symbol\"> /\n                    {{comunicatorSvc.converterToMainCoin(kardex.price,kardex.exchange)*productOperation.discount_product|\n                    currency:mainCoin.symbol+' '}}</i>\n            </p>\n            <p><strong>Impuesto: </strong>{{productOperation.impuest|percent:'2.2-2'}}</p>\n            <p><strong>Valor del impuesto: </strong>{{calcularMontoImponible(kardex.price)|\n                currency:kardex.coin_kardex+' '}}\n                <i *ngIf=\"kardex.coin_kardex!=mainCoin.symbol\"> /\n                    {{calcularMontoImponible(comunicatorSvc.converterToMainCoin(kardex.price,kardex.exchange))}}</i>\n            </p>\n            <p><strong>Precio final del producto :</strong> \n                {{comunicatorSvc.converterToSecondaryCoin(kardex.weighted_averages_sell,kardex.exchange)|currency:kardex.coin_kardex+' '}}\n                <i *ngIf=\"kardex.coin_kardex!=mainCoin.symbol\"> /\n                    {{kardex.weighted_averages_sell}}</i></p>\n            <p><strong>Total: </strong> {{kardex.weighted_averages_sell*kardex.exist|currency:mainCoin.symbol+' '}}</p>\n        </div> \n\n    </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}