{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { tap } from 'rxjs';\nlet ListaCajasComponent = class ListaCajasComponent {\n  constructor(fb, renderer, comunicatorSvc) {\n    this.fb = fb;\n    this.renderer = renderer;\n    this.comunicatorSvc = comunicatorSvc;\n    this.data = [{\n      name: \"Tiger Nixon\",\n      position: 'System Architect',\n      office: 'Edinburgh',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$320,800'\n    }, {\n      name: \"Black Adams\",\n      position: 'System Engineer',\n      office: 'Illinois',\n      age: 21,\n      startDate: '2011/12/25',\n      salary: '$120,300'\n    }, {\n      name: \"Woods Ada\",\n      position: 'Secretary',\n      office: 'England',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$50,800'\n    }, {\n      name: \"Tiger Nixon\",\n      position: 'System Architect',\n      office: 'Edinburgh',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$320,800'\n    }, {\n      name: \"Black Adams\",\n      position: 'System Engineer',\n      office: 'Illinois',\n      age: 21,\n      startDate: '2011/12/25',\n      salary: '$120,300'\n    }, {\n      name: \"Woods Ada\",\n      position: 'Secretary',\n      office: 'England',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$50,800'\n    }, {\n      name: \"Woods Ada\",\n      position: 'Secretary',\n      office: 'England',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$50,800'\n    }, {\n      name: \"Tiger Nixon\",\n      position: 'System Architect',\n      office: 'Edinburgh',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$320,800'\n    }, {\n      name: \"Black Adams\",\n      position: 'System Engineer',\n      office: 'Illinois',\n      age: 21,\n      startDate: '2011/12/25',\n      salary: '$120,300'\n    }, {\n      name: \"Woods Ada\",\n      position: 'Secretary',\n      office: 'England',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$50,800'\n    }, {\n      name: \"Woods Ada\",\n      position: 'Secretary',\n      office: 'England',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$50,800'\n    }];\n    this.numberPages = 0;\n    this.result = [];\n  }\n  ngOnInit() {\n    this.comunicatorSvc.getData().pipe(tap(res => this.result = res)).subscribe();\n    this.tableSearch = new FormGroup({\n      search: new FormControl(),\n      numberRows: new FormControl('10')\n    });\n  }\n  //Se insertan las paginas al DOM\n  ngAfterViewInit() {\n    this.createPages();\n  }\n  deleteChildren() {\n    let nodes = this.pagination?.nativeElement.childNodes;\n    if (nodes.length > 2) {\n      for (let index = 1; index < nodes.length - 1;) {\n        this.renderer.removeChild(this.pagination?.nativeElement, this.pagination?.nativeElement.children[1]);\n      }\n    }\n  }\n  AddDeleteStyles(classOne, classTwo) {\n    this.renderer.removeClass(this.currentPage, classOne);\n    this.renderer.addClass(this.currentPage, classTwo);\n  }\n  changePage(child) {\n    this.AddDeleteStyles('selected', 'items');\n    this.currentPage = child;\n    this.AddDeleteStyles('items', 'selected');\n    this.getInfo();\n  }\n  createPages() {\n    this.deleteChildren(); //elimino todas las paginas actuales\n    this.numberPages = Math.trunc((this.result.length - 1) / this.tableSearch.get('numberRows')?.value) + 1;\n    //itero sobre el numero de paginas a crear\n    for (let i = 0; i < this.numberPages; i++) {\n      const child = this.renderer.createElement('li'); //creo la pagina\n      const value = this.renderer.createText((i + 1).toString());\n      this.renderer.setProperty(child, 'value', i);\n      this.renderer.listen(child, 'click', event => {\n        this.changePage(child);\n      });\n      if (i === 0) {\n        this.renderer.addClass(child, 'selected');\n        this.currentPage = child;\n      } else {\n        this.renderer.addClass(child, 'items');\n      }\n      this.renderer.addClass(child, 'dataTables_info'); //\n      this.renderer.addClass(child, 'page-item'); //añado las clases alos elementos\n      this.renderer.addClass(child, 'active'); //\n      this.renderer.appendChild(child, value); //le agrego el texto al elemento\n      this.renderer.insertBefore(this.pagination?.nativeElement, child, this.next?.nativeElement); //inserto el elento en la vista\n      this.getInfo();\n    }\n  }\n  getInfo() {\n    let msj = 'mostrando ';\n    let nodes = this.info?.nativeElement.childNodes;\n    let inicio = Number(this.currentPage.value) * Number(this.tableSearch.get('numberRows')?.value) + 1;\n    let fin = inicio + Number(this.tableSearch.get('numberRows')?.value) - 1;\n    for (let index = 0; index < nodes.length;) {\n      this.renderer.removeChild(this.info?.nativeElement, this.info?.nativeElement.children[0]);\n    }\n    if (this.result.length < fin) {\n      if (this.tableSearch.get(\"search\")?.value !== '' && this.tableSearch.get(\"search\")?.value !== null) {\n        msj = msj.concat('del ', String(inicio), ' al ', String(this.result.length), \" de \", String(this.result.length), \" entradas \", \" (filtradas de \", String(this.data.length), \" en total)\");\n      } else {\n        msj = msj.concat('del ', String(inicio), ' al ', String(this.data.length), \" de \", String(this.data.length), \" entradas\");\n      }\n    } else {\n      if (this.tableSearch.get(\"search\")?.value !== '' && this.tableSearch.get(\"search\")?.value !== null) {\n        msj = msj.concat('del ', String(inicio), ' al ', String(fin), ' de ', String(this.result.length), \" entradas\", \" (filtradas de \", String(this.data.length), \" en total)\");\n      } else {\n        msj = msj.concat('del ', String(inicio), ' al ', String(fin), ' de ', String(this.data.length), \" entradas\");\n      }\n    }\n    const child = this.renderer.createElement('p');\n    const text = this.renderer.createText(msj);\n    this.renderer.appendChild(child, text);\n    this.renderer.addClass(child, 'dataTables_info');\n    this.renderer.appendChild(this.info?.nativeElement, child);\n  }\n  getValuesToPipe() {\n    let argsPipe = {\n      search: this.tableSearch.get('search')?.value,\n      indexCurrentPage: this.currentPage === undefined ? 0 : Number(this.currentPage.value),\n      numberRows: Number(this.tableSearch.get('numberRows')?.value)\n    };\n    return argsPipe;\n  }\n  nextPage() {\n    let nodes = this.pagination?.nativeElement.children;\n    this.changePage(nodes[Number(this.currentPage.value) + 2]);\n  }\n  previousPage() {\n    let nodes = this.pagination?.nativeElement.children;\n    this.changePage(nodes[Number(this.currentPage.value)]);\n  }\n};\n__decorate([ViewChild('pagination', {\n  static: false\n})], ListaCajasComponent.prototype, \"pagination\", void 0);\n__decorate([ViewChild('next', {\n  static: false\n})], ListaCajasComponent.prototype, \"next\", void 0);\n__decorate([ViewChild('dataTables_info', {\n  static: false\n})], ListaCajasComponent.prototype, \"info\", void 0);\nListaCajasComponent = __decorate([Component({\n  selector: 'app-lista-cajas',\n  templateUrl: './lista-cajas.component.html',\n  styleUrls: ['./lista-cajas.component.css']\n})], ListaCajasComponent);\nexport { ListaCajasComponent };","map":{"version":3,"mappings":"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","names":["Component","ViewChild","FormControl","FormGroup","tap","ListaCajasComponent","constructor","fb","renderer","comunicatorSvc","name","position","office","age","startDate","salary","ngOnInit","getData","pipe","res","result","subscribe","tableSearch","search","numberRows","ngAfterViewInit","createPages","deleteChildren","nodes","pagination","nativeElement","childNodes","length","index","removeChild","children","AddDeleteStyles","classOne","classTwo","removeClass","currentPage","addClass","changePage","child","getInfo","numberPages","Math","trunc","get","value","i","createElement","createText","toString","setProperty","listen","event","appendChild","insertBefore","next","msj","info","inicio","Number","fin","concat","String","data","text","getValuesToPipe","argsPipe","indexCurrentPage","undefined","nextPage","previousPage","__decorate","static","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/home/luis/Documentos/systems vs code/app/src/app/content/administracion/cajas/lista-cajas/lista-cajas.component.ts"],"sourcesContent":["import { Component, ElementRef, Renderer2, ViewChild } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { filter, tap } from 'rxjs';\nimport { TableFilterPipe } from 'src/app/pipes/table-filter.pipe';\nimport { ComunicatorComponetsService } from 'src/app/services/comunicator/comunicator-componets.service';\n\n@Component({\n  selector: 'app-lista-cajas',\n  templateUrl: './lista-cajas.component.html',\n  styleUrls: ['./lista-cajas.component.css']\n})\nexport class ListaCajasComponent {\n  data = [\n    {\n      name: \"Tiger Nixon\",\n      position: 'System Architect',\n      office: 'Edinburgh',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$320,800',\n    },\n    {\n      name: \"Black Adams\",\n      position: 'System Engineer',\n      office: 'Illinois',\n      age: 21,\n      startDate: '2011/12/25',\n      salary: '$120,300',\n    },\n    {\n      name: \"Woods Ada\",\n      position: 'Secretary',\n      office: 'England',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$50,800',\n    },\n    {\n      name: \"Tiger Nixon\",\n      position: 'System Architect',\n      office: 'Edinburgh',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$320,800',\n    },\n    {\n      name: \"Black Adams\",\n      position: 'System Engineer',\n      office: 'Illinois',\n      age: 21,\n      startDate: '2011/12/25',\n      salary: '$120,300',\n    },\n    {\n      name: \"Woods Ada\",\n      position: 'Secretary',\n      office: 'England',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$50,800',\n    },\n    {\n      name: \"Woods Ada\",\n      position: 'Secretary',\n      office: 'England',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$50,800',\n    },\n    {\n      name: \"Tiger Nixon\",\n      position: 'System Architect',\n      office: 'Edinburgh',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$320,800',\n    },\n    {\n      name: \"Black Adams\",\n      position: 'System Engineer',\n      office: 'Illinois',\n      age: 21,\n      startDate: '2011/12/25',\n      salary: '$120,300',\n    },\n    {\n      name: \"Woods Ada\",\n      position: 'Secretary',\n      office: 'England',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$50,800',\n    },\n    {\n      name: \"Woods Ada\",\n      position: 'Secretary',\n      office: 'England',\n      age: 61,\n      startDate: '2011/04/25',\n      salary: '$50,800',\n    }\n  ]\n  tableSearch!: FormGroup;\n  numberPages: number = 0;\n  currentPage?: any;\n  result: any[] = [];\n\n  constructor(private fb: FormBuilder,\n    private renderer: Renderer2,\n    private comunicatorSvc: ComunicatorComponetsService) { }\n  //Elemento donde se insertaran los numeros \n  //de paginas para la paginacion\n  @ViewChild('pagination', { static: false }) pagination?: ElementRef;\n  //Elemento antes del cual se comenzaran a insertar las paginas\n  @ViewChild('next', { static: false }) next?: ElementRef;\n  @ViewChild('dataTables_info', { static: false }) info?: ElementRef;\n\n  ngOnInit() {\n    this.comunicatorSvc.getData().pipe(tap(res => this.result = res))\n      .subscribe();\n    this.tableSearch = new FormGroup({\n      search: new FormControl(),\n      numberRows: new FormControl('10')\n    });\n\n  }\n  //Se insertan las paginas al DOM\n  ngAfterViewInit() {\n    this.createPages();\n  }\n\n  deleteChildren() {\n    let nodes = this.pagination?.nativeElement.childNodes;\n    if (nodes.length > 2) {\n      for (let index = 1; index < nodes.length - 1;) {\n        this.renderer.removeChild(this.pagination?.nativeElement,\n          this.pagination?.nativeElement.children[1])\n      }\n    }\n  }\n\n  AddDeleteStyles(classOne: string, classTwo: string) {\n    this.renderer.removeClass(this.currentPage, classOne)\n    this.renderer.addClass(this.currentPage, classTwo)\n  }\n  changePage(child: any) {\n    this.AddDeleteStyles('selected', 'items')\n    this.currentPage = child;\n    this.AddDeleteStyles('items', 'selected')\n    this.getInfo();\n  }\n\n  createPages() {\n\n    this.deleteChildren(); //elimino todas las paginas actuales\n    this.numberPages = Math.trunc((this.result.length - 1) /\n      this.tableSearch.get('numberRows')?.value) + 1\n\n    //itero sobre el numero de paginas a crear\n    for (let i = 0; i < this.numberPages; i++) {\n      const child = this.renderer.createElement('li')//creo la pagina\n      const value = this.renderer.createText((i + 1).toString())\n      this.renderer.setProperty(child, 'value', i)\n      this.renderer.listen(child, 'click', (event) => {\n        this.changePage(child);\n      })\n      if (i === 0) {\n        this.renderer.addClass(child, 'selected')\n        this.currentPage = child;\n      } else {\n        this.renderer.addClass(child, 'items')\n\n      }\n      this.renderer.addClass(child, 'dataTables_info')//\n      this.renderer.addClass(child, 'page-item')//añado las clases alos elementos\n      this.renderer.addClass(child, 'active')//\n      this.renderer.appendChild(child, value)//le agrego el texto al elemento\n      this.renderer.insertBefore(this.pagination?.nativeElement,\n        child, this.next?.nativeElement)//inserto el elento en la vista\n   \n    this.getInfo();\n      }\n\n  }\n\n  getInfo() {\n    let msj: string = 'mostrando ';\n    let nodes = this.info?.nativeElement.childNodes;\n    let inicio = Number(this.currentPage.value) *\n      Number(this.tableSearch.get('numberRows')?.value) + 1\n    let fin = inicio +\n      Number(this.tableSearch.get('numberRows')?.value) - 1\n    for (let index = 0; index < nodes.length;) {\n      this.renderer.removeChild(this.info?.nativeElement,\n        this.info?.nativeElement.children[0])\n    }\n    if (this.result.length<fin) {\n      if (this.tableSearch.get(\"search\")?.value !== '' &&\n      this.tableSearch.get(\"search\")?.value !== null) {\n        msj = msj.concat('del ', String(inicio),\n          ' al ', String(this.result.length),\" de \",\n          String(this.result.length),\" entradas \",\n          \" (filtradas de \", String(this.data.length), \" en total)\")\n      } else {\n        msj = msj.concat('del ', String(inicio),\n          ' al ', String(this.data.length),\" de \",\n           String(this.data.length),\" entradas\")\n      }\n\n    } else {\n      if (this.tableSearch.get(\"search\")?.value !== ''\n      && this.tableSearch.get(\"search\")?.value !== null) {\n        msj = msj.concat('del ', String(inicio),\n          ' al ', String(fin), ' de ',\n          String(this.result.length),\" entradas\",\n          \" (filtradas de \", String(this.data.length), \" en total)\")\n      } else {\n        msj = msj.concat('del ', String(inicio),\n          ' al ', String(fin), ' de ',\n          String(this.data.length),\" entradas\")\n      }\n    }\n    const child = this.renderer.createElement('p')\n    const text = this.renderer.createText(msj)\n    this.renderer.appendChild(child, text)\n    this.renderer.addClass(child, 'dataTables_info')\n    this.renderer.appendChild(this.info?.nativeElement, child)\n  }\n\n  getValuesToPipe(): any {\n    let argsPipe = {\n      search: this.tableSearch.get('search')?.value,\n      indexCurrentPage: (this.currentPage === undefined) ?\n        0 : Number(this.currentPage.value),\n      numberRows: Number(this.tableSearch.get('numberRows')?.value)\n    }\n    return argsPipe;\n  }\n  nextPage() {\n    let nodes = this.pagination?.nativeElement.children;\n    this.changePage(nodes[Number(this.currentPage.value) + 2]);\n  }\n  previousPage() {\n    let nodes = this.pagination?.nativeElement.children;\n    this.changePage(nodes[Number(this.currentPage.value)]);\n  }\n}\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}