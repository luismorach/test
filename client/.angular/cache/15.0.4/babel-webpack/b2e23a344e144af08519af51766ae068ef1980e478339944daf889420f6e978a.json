{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet ReporteDeVentaComponent = class ReporteDeVentaComponent {\n  constructor(comunicatorSvc, routes, ventasSvc) {\n    this.comunicatorSvc = comunicatorSvc;\n    this.routes = routes;\n    this.ventasSvc = ventasSvc;\n    this.result = [];\n    this.date = new Date();\n    this.reportes = [];\n  }\n  ngOnInit() {\n    let title = [];\n    let ruta;\n    setTimeout(() => {\n      /* Obtengo la ruta actual y la transformo para obtener el titulo del componente*/\n      ruta = this.routes.url.slice(this.routes.url.slice(1).indexOf('/') + 2);\n      title.push(decodeURI(ruta).toUpperCase()); //a単ado el titulo al array\n      title.push(\"fas fa-hand-holding-usd fa-fw\"); //aa単ado el icono del titulo al array\n      this.comunicatorSvc.setTitleComponent(title);\n    });\n    this.ventasSvc.getSellBydate(this.date).subscribe(res => {\n      this.reportes = res;\n    });\n  }\n  calcularTotales() {\n    let values = {\n      sells: 0,\n      total_sell: 0,\n      total_costos: 0,\n      ganancias: 0\n    };\n    this.reportes.forEach(reporte => {\n      values.sells += Number(reporte.sells);\n      values.total_sell += Number(Number(reporte.total_sell).toFixed(2));\n      console.log(values.total_sell);\n      values.total_costos += Number(Number(reporte.costos).toFixed(2));\n      values.ganancias += Number(Number(reporte.total_sell - reporte.costos).toFixed(2));\n    });\n    return values;\n  }\n  ngOnDestroy() {\n    this.data$.unsubscribe();\n  }\n};\nReporteDeVentaComponent = __decorate([Component({\n  selector: 'app-reporte-de-venta',\n  templateUrl: './reporte-de-venta.component.html',\n  styleUrls: ['./reporte-de-venta.component.css']\n})], ReporteDeVentaComponent);\nexport { ReporteDeVentaComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AAWlC,IAAMC,uBAAuB,GAA7B,MAAMA,uBAAuB;EAKlCC,YAAoBC,cAA2C,EACrDC,MAAc,EACdC,SAAwB;IAFd,mBAAc,GAAdF,cAAc;IACxB,WAAM,GAANC,MAAM;IACN,cAAS,GAATC,SAAS;IANnB,WAAM,GAAU,EAAE;IAElB,SAAI,GAAG,IAAIC,IAAI,EAAE;IACjB,aAAQ,GAAU,EAAE;EAGkB;EACtCC,QAAQ;IACN,IAAIC,KAAK,GAAa,EAAE;IACxB,IAAIC,IAAI;IACRC,UAAU,CAAC,MAAK;MACd;MACAD,IAAI,GAAG,IAAI,CAACL,MAAM,CAACO,GAAG,CAACC,KAAK,CAAE,IAAI,CAACR,MAAM,CAACO,GAAG,CAACC,KAAK,CAAC,CAAC,CAAC,CAACC,OAAO,CAAC,GAAG,CAAC,GAAI,CAAC,CAAC;MACzEL,KAAK,CAACM,IAAI,CAACC,SAAS,CAACN,IAAI,CAAC,CAACO,WAAW,EAAE,CAAC,CAAC;MAC1CR,KAAK,CAACM,IAAI,CAAC,+BAA+B,CAAC,CAAC;MAC5C,IAAI,CAACX,cAAc,CAACc,iBAAiB,CAACT,KAAK,CAAC;IAC9C,CAAC,CAAC;IACF,IAAI,CAACH,SAAS,CAACa,aAAa,CAAC,IAAI,CAACC,IAAI,CAAC,CAACC,SAAS,CAACC,GAAG,IAAG;MAEtD,IAAI,CAACC,QAAQ,GAAGD,GAAG;IACrB,CAAC,CAAC;EACJ;EACAE,eAAe;IACb,IAAIC,MAAM,GAAC;MAACC,KAAK,EAAC,CAAC;MAACC,UAAU,EAAC,CAAC;MAACC,YAAY,EAAC,CAAC;MAACC,SAAS,EAAC;IAAC,CAAC;IAC5D,IAAI,CAACN,QAAQ,CAACO,OAAO,CAAEC,OAAW,IAAG;MACnCN,MAAM,CAACC,KAAK,IAAEM,MAAM,CAACD,OAAO,CAACL,KAAK,CAAC;MAEnCD,MAAM,CAACE,UAAU,IAAEK,MAAM,CAACA,MAAM,CAACD,OAAO,CAACJ,UAAU,CAAC,CAACM,OAAO,CAAC,CAAC,CAAC,CAAC;MAChEC,OAAO,CAACC,GAAG,CAACV,MAAM,CAACE,UAAU,CAAC;MAC9BF,MAAM,CAACG,YAAY,IAAEI,MAAM,CAACA,MAAM,CAACD,OAAO,CAACK,MAAM,CAAC,CAACH,OAAO,CAAC,CAAC,CAAC,CAAC;MAC9DR,MAAM,CAACI,SAAS,IAAEG,MAAM,CAACA,MAAM,CAACD,OAAO,CAACJ,UAAU,GAACI,OAAO,CAACK,MAAM,CAAC,CAACH,OAAO,CAAC,CAAC,CAAC,CAAC;IAChF,CAAC,CAAC;IACF,OAAOR,MAAM;EACf;EACAY,WAAW;IACT,IAAI,CAACC,KAAK,CAACC,WAAW,EAAE;EAC1B;CACD;AAtCYrC,uBAAuB,eALnCD,SAAS,CAAC;EACTuC,QAAQ,EAAE,sBAAsB;EAChCC,WAAW,EAAE,mCAAmC;EAChDC,SAAS,EAAE,CAAC,kCAAkC;CAC/C,CAAC,GACWxC,uBAAuB,CAsCnC;SAtCYA,uBAAuB","names":["Component","ReporteDeVentaComponent","constructor","comunicatorSvc","routes","ventasSvc","Date","ngOnInit","title","ruta","setTimeout","url","slice","indexOf","push","decodeURI","toUpperCase","setTitleComponent","getSellBydate","date","subscribe","res","reportes","calcularTotales","values","sells","total_sell","total_costos","ganancias","forEach","reporte","Number","toFixed","console","log","costos","ngOnDestroy","data$","unsubscribe","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/home/luis/Documentos/systems vs code/inventary-system/client/src/app/content/reportes/reporte-de-venta/reporte-de-venta.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Subscription, tap } from 'rxjs';\nimport { ComunicatorComponetsService } from 'src/app/services/comunicator/comunicator-componets.service';\nimport { VentasService } from '../../ventas/service/ventas.service';\n\n@Component({\n  selector: 'app-reporte-de-venta',\n  templateUrl: './reporte-de-venta.component.html',\n  styleUrls: ['./reporte-de-venta.component.css']\n})\nexport class ReporteDeVentaComponent {\n  result: any[] = [];\n  data$!: Subscription\n  date = new Date()\n  reportes: any[] = []\n  constructor(private comunicatorSvc: ComunicatorComponetsService,\n    private routes: Router,\n    private ventasSvc: VentasService) { }\n  ngOnInit() {\n    let title: string[] = [];\n    let ruta;\n    setTimeout(() => {\n      /* Obtengo la ruta actual y la transformo para obtener el titulo del componente*/\n      ruta = this.routes.url.slice((this.routes.url.slice(1).indexOf('/')) + 2);\n      title.push(decodeURI(ruta).toUpperCase());//a単ado el titulo al array\n      title.push(\"fas fa-hand-holding-usd fa-fw\");//aa単ado el icono del titulo al array\n      this.comunicatorSvc.setTitleComponent(title);\n    });\n    this.ventasSvc.getSellBydate(this.date).subscribe(res => {\n\n      this.reportes = res\n    })\n  }\n  calcularTotales(){\n    let values={sells:0,total_sell:0,total_costos:0,ganancias:0}\n    this.reportes.forEach((reporte:any)=>{\n      values.sells+=Number(reporte.sells)\n     \n      values.total_sell+=Number(Number(reporte.total_sell).toFixed(2))\n      console.log(values.total_sell)\n      values.total_costos+=Number(Number(reporte.costos).toFixed(2))\n      values.ganancias+=Number(Number(reporte.total_sell-reporte.costos).toFixed(2))\n    })\n    return values\n  }\n  ngOnDestroy() {\n    this.data$.unsubscribe();\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}