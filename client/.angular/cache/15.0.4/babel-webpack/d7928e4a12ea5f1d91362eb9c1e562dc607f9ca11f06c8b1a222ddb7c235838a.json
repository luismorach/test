{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { FormControl, Validators } from '@angular/forms';\nimport { DinamicInput } from 'src/app/utils/DinamicInput';\nlet NuevoProveedorComponent = class NuevoProveedorComponent extends DinamicInput {\n  constructor(fb, routes, comunicatorSvc$, route, providersSvc, renderer) {\n    super();\n    this.fb = fb;\n    this.routes = routes;\n    this.comunicatorSvc$ = comunicatorSvc$;\n    this.route = route;\n    this.providersSvc = providersSvc;\n    this.renderer = renderer;\n    this.usedClass = [];\n  }\n  ngOnInit() {\n    setTimeout(() => {\n      this.usedClass[0] = \"input-on-focus\";\n      this.ruta = this.routes.url.slice(this.routes.url.slice(1).indexOf('/') + 2);\n      this.title = [];\n      if (this.ruta.indexOf(\"actualizar\")) {\n        this.title.push(\"fa fa-shipping-fast fa-fw\"); //añado el icono del titulo al array\n      } else {\n        this.ruta = this.routes.url.slice(this.routes.url.slice(1).indexOf('/') + 2, this.routes.url.lastIndexOf('/'));\n        this.title.push(\"fa fa-arrows-rotate\");\n      }\n      this.title.push(decodeURI(this.ruta).toUpperCase()); //añado el titulo al array\n      this.comunicatorSvc$.setTitleComponent(this.title);\n    });\n    this.formNewProvider = this.fb.group({\n      document_type: new FormControl('Habilitado'),\n      document_number: new FormControl('', [Validators.required, Validators.pattern(/^[0-9]+$/)]),\n      nameProvider: new FormControl('', [Validators.required, Validators.pattern(/^[a-zA-Z ]+$/)]),\n      addressProvider: new FormControl('', [Validators.pattern(/^[a-zA-Z ]+$/)]),\n      state: new FormControl('Habilitado'),\n      nameBoss: new FormControl('', [Validators.pattern(/^[a-zA-Z ]+$/)]),\n      phoneNumber: new FormControl('', [Validators.pattern(/^[0-9]+$/)]),\n      email: new FormControl('', [Validators.email])\n    });\n  }\n  error(error) {\n    this.changeModal(this.comunicatorSvc$.errorServer(error));\n    this.popUp?.nativeElement.showModal();\n  }\n  submit() {\n    this.providersSvc.setProvider(this.formNewProvider.value).subscribe({\n      next: res => {\n        this.changeModal(res);\n        this.popUp?.nativeElement.showModal();\n      },\n      error: error => {\n        this.error(error);\n      }\n    });\n  }\n  acept() {\n    this.popUp?.nativeElement.close();\n    if (this.popUp?.nativeElement.children[1].textContent === '¿Estás seguro?') {\n      if (this.ruta.indexOf(\"actualizar\")) {\n        this.submit();\n      } else if (this.popUp?.nativeElement.children[2].textContent.includes('¿desea continuar?')) {\n        this.redirectToListProviders();\n      } else {\n        this.validarUpdate();\n      }\n    } else if (this.popUp?.nativeElement.children[1].textContent.includes('Actualizada') && this.ruta.indexOf(\"nueva\")) {\n      this.redirectToListProviders();\n    }\n  }\n  update() {\n    this.providersSvc.updateProvider(Number(this.id_provider), this.formNewProvider.value).subscribe({\n      next: res => {\n        this.changeModal(res);\n        this.popUp?.nativeElement.showModal();\n      },\n      error: error => {\n        this.error(error);\n      }\n    });\n  }\n  validarUpdate() {\n    if (this.formNewProvider.get('document_type')?.value === this.providerToUpdate.document_type && this.formNewProvider.get('doucemnt_number')?.value === this.providerToUpdate.document_number && this.formNewProvider.get('name_provider')?.value === this.providerToUpdate.name_provider && this.formNewProvider.get('address_provider')?.value === this.providerToUpdate.address_provider && this.formNewProvider.get('state')?.value === this.providerToUpdate.state && this.formNewProvider.get('name_boss')?.value === this.providerToUpdate.name_boss && this.formNewProvider.get('phone_number')?.value === this.providerToUpdate.phone_number && this.formNewProvider.get('email')?.value === this.providerToUpdate.email) {\n      let msj = {\n        icon: '',\n        title: '¿Estás seguro?',\n        content: 'No ha modificado los datos de la categoría ¿desea continuar?'\n      };\n      this.changeModal(msj);\n      this.popUp?.nativeElement.showModal();\n    } else {\n      this.update();\n    }\n  }\n  redirectToListProviders() {\n    this.routes.navigate(['/administracion/lista proveedores']);\n  }\n  clean() {\n    this.formNewProvider.get('documentNumber')?.setValue('');\n    this.formNewProvider.get('nameProvider')?.setValue('');\n    this.formNewProvider.get('addressProvider')?.setValue('');\n    this.formNewProvider.get('nameBoss')?.setValue('');\n    this.formNewProvider.get('phoneNumber')?.setValue('');\n    this.formNewProvider.get('email')?.setValue('');\n  }\n};\n__decorate([ViewChild('popup', {\n  static: true\n})], NuevoProveedorComponent.prototype, \"popUp\", void 0);\nNuevoProveedorComponent = __decorate([Component({\n  selector: 'app-nuevo-proveedor',\n  templateUrl: './nuevo-proveedor.component.html',\n  styleUrls: ['./nuevo-proveedor.component.css']\n})], NuevoProveedorComponent);\nexport { NuevoProveedorComponent };","map":{"version":3,"mappings":"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","names":["Component","ViewChild","FormControl","Validators","DinamicInput","NuevoProveedorComponent","constructor","fb","routes","comunicatorSvc$","route","providersSvc","renderer","ngOnInit","setTimeout","usedClass","ruta","url","slice","indexOf","title","push","lastIndexOf","decodeURI","toUpperCase","setTitleComponent","formNewProvider","group","document_type","document_number","required","pattern","nameProvider","addressProvider","state","nameBoss","phoneNumber","email","error","changeModal","errorServer","popUp","nativeElement","showModal","submit","setProvider","value","subscribe","next","res","acept","close","children","textContent","includes","redirectToListProviders","validarUpdate","update","updateProvider","Number","id_provider","get","providerToUpdate","name_provider","address_provider","name_boss","phone_number","msj","icon","content","navigate","clean","setValue","__decorate","static","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/home/luis/Documentos/systems vs code/inventary-system/client/src/app/content/administracion/proveedores/nuevo-proveedor/nuevo-proveedor.component.ts"],"sourcesContent":["import { HttpErrorResponse } from '@angular/common/http';\nimport { Component, ElementRef, Renderer2, ViewChild } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { provider,alert } from 'src/app/interfaces/interfaces';\nimport { ComunicatorComponetsService } from 'src/app/services/comunicator/comunicator-componets.service';\nimport { DinamicInput } from 'src/app/utils/DinamicInput';\nimport { ProveedoresService } from '../service/proveedores.service';\n\n@Component({\n  selector: 'app-nuevo-proveedor',\n  templateUrl: './nuevo-proveedor.component.html',\n  styleUrls: ['./nuevo-proveedor.component.css']\n})\nexport class NuevoProveedorComponent extends DinamicInput{\n\n  formNewProvider!: FormGroup;\n  usedClass: string[] = [];\n  title!: string[];\n  ruta!: string;\n  id_provider!: number;\n  providerToUpdate!:provider\n  @ViewChild('popup', { static: true }) override popUp?: ElementRef;\n\n  constructor(private fb: FormBuilder,\n    public routes: Router,\n    private comunicatorSvc$:ComunicatorComponetsService,\n    private route: ActivatedRoute,\n    private providersSvc: ProveedoresService,\n    protected override renderer: Renderer2) {\n    super();\n   }\n\n  ngOnInit() {\n    setTimeout(() => {\n      this.usedClass[0] = \"input-on-focus\";\n      this.ruta = this.routes.url.slice((this.routes.url.slice(1).indexOf('/')) + 2);\n      this.title = []\n      if (this.ruta.indexOf(\"actualizar\")) {\n        this.title.push(\"fa fa-shipping-fast fa-fw\");//añado el icono del titulo al array\n      } else {\n        this.ruta = this.routes.url.slice((this.routes.url.slice(1).indexOf('/')) + 2, this.routes.url.lastIndexOf('/'));\n        this.title.push(\"fa fa-arrows-rotate\");\n      }\n      this.title.push(decodeURI(this.ruta).toUpperCase());//añado el titulo al array\n      this.comunicatorSvc$.setTitleComponent(this.title);\n    })\n    this.formNewProvider = this.fb.group({\n      document_type: new FormControl('Habilitado'),\n      document_number: new FormControl('',[Validators.required,Validators.pattern(/^[0-9]+$/)]),\n      nameProvider: new FormControl('',[Validators.required,Validators.pattern(/^[a-zA-Z ]+$/)]),\n      addressProvider: new FormControl('',[Validators.pattern(/^[a-zA-Z ]+$/)]),\n      state: new FormControl('Habilitado'),\n      nameBoss: new FormControl('',[Validators.pattern(/^[a-zA-Z ]+$/)]),\n      phoneNumber: new FormControl('',[Validators.pattern(/^[0-9]+$/)]),\n      email: new FormControl('',[Validators.email]),\n    })\n  }\n  public error(error: HttpErrorResponse) {\n    this.changeModal(this.comunicatorSvc$.errorServer(error))\n    this.popUp?.nativeElement.showModal()\n  }\n  submit() {\n    this.providersSvc.setProvider(this.formNewProvider.value).subscribe({\n      next: res => {\n        this.changeModal(res);\n        this.popUp?.nativeElement.showModal()\n      },\n      error: (error: HttpErrorResponse) => {\n        this.error(error)\n      }\n    })\n  }\n  acept() {\n    this.popUp?.nativeElement.close();\n    if (this.popUp?.nativeElement.children[1].textContent === '¿Estás seguro?') {\n      if (this.ruta.indexOf(\"actualizar\")) {\n        this.submit()\n      } else if(this.popUp?.nativeElement.children[2].textContent.includes('¿desea continuar?')){\n        this.redirectToListProviders();\n      }else {\n        this.validarUpdate()\n      }\n    }else if(this.popUp?.nativeElement.children[1].textContent.includes('Actualizada')&&\n    this.ruta.indexOf(\"nueva\")){\n      this.redirectToListProviders();\n    }\n  }\n\n  update() {\n    this.providersSvc.updateProvider(Number(this.id_provider),\n      this.formNewProvider.value).subscribe({\n        next: res => {\n          this.changeModal(res);\n          this.popUp?.nativeElement.showModal();\n        },\n        error: (error: HttpErrorResponse) => {\n          this.error(error);\n        }\n      })\n  }\n  validarUpdate(){\n    if(this.formNewProvider.get('document_type')?.value===this.providerToUpdate.document_type && \n    this.formNewProvider.get('doucemnt_number')?.value===this.providerToUpdate.document_number&&\n    this.formNewProvider.get('name_provider')?.value===this.providerToUpdate.name_provider && \n    this.formNewProvider.get('address_provider')?.value===this.providerToUpdate.address_provider&&\n    this.formNewProvider.get('state')?.value===this.providerToUpdate.state && \n    this.formNewProvider.get('name_boss')?.value===this.providerToUpdate.name_boss&&\n    this.formNewProvider.get('phone_number')?.value===this.providerToUpdate.phone_number && \n    this.formNewProvider.get('email')?.value===this.providerToUpdate.email){\n      let msj:alert={\n        icon:'',\n        title:'¿Estás seguro?',\n        content:'No ha modificado los datos de la categoría ¿desea continuar?'\n      }\n      this.changeModal(msj)\n      this.popUp?.nativeElement.showModal()\n    }else{\n      this.update()\n    }\n  }\n  \n\n  redirectToListProviders() {\n    this.routes.navigate(['/administracion/lista proveedores'])\n  }\n  clean(){\n    this.formNewProvider.get('documentNumber')?.setValue('');\n    this.formNewProvider.get('nameProvider')?.setValue('');\n    this.formNewProvider.get('addressProvider')?.setValue('');\n    this.formNewProvider.get('nameBoss')?.setValue('');\n    this.formNewProvider.get('phoneNumber')?.setValue('');\n    this.formNewProvider.get('email')?.setValue('');\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}