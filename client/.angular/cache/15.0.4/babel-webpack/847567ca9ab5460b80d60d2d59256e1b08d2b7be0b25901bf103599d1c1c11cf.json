{"ast":null,"code":"import { FormControl } from '@angular/forms';\nimport { DinamicInput } from 'src/app/utils/DinamicInput';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/comunicator/comunicator-componets.service\";\nimport * as i3 from \"../service/compras.service\";\nimport * as i4 from \"../../administracion/proveedores/service/proveedores.service\";\nimport * as i5 from \"../../administracion/usuarios/service/usuarios.service\";\nimport * as i6 from \"../../productos/productos-en-almacen/service/productos.service\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"../../devoluciones/service/devoluciones.service\";\nconst _c0 = [\"quantity\"];\nconst _c1 = [\"popup\"];\nfunction DetallesCompraComponent_p_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\")(1, \"strong\");\n    i0.ɵɵtext(2, \"FECHA:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(4, 1, ctx_r0.buy.time, \"dd/MM/yyyy\"), \"\");\n  }\n}\nfunction DetallesCompraComponent_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\")(1, \"strong\");\n    i0.ɵɵtext(2, \"COMPRA REGISTRADA POR:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r1.user.names_user, \" \", ctx_r1.user.last_names_user, \"\");\n  }\n}\nfunction DetallesCompraComponent_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\")(1, \"strong\");\n    i0.ɵɵtext(2, \"PROVEEDOR:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r2.provider.name_provider, \" \", ctx_r2.provider.address_provider, \"\");\n  }\n}\nfunction DetallesCompraComponent_tr_35_td_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r12 = i0.ɵɵnextContext().index;\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r13.products[i_r12].barcode);\n  }\n}\nfunction DetallesCompraComponent_tr_35_td_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r12 = i0.ɵɵnextContext().index;\n    const ctx_r14 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate3(\" \", ctx_r14.products[i_r12].name, \"\\u00A0\", ctx_r14.products[i_r12].mark, \"\\u00A0\", ctx_r14.products[i_r12].model, \"\\u00A0\");\n  }\n}\nfunction DetallesCompraComponent_tr_35_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, DetallesCompraComponent_tr_35_td_3_Template, 2, 1, \"td\", 2);\n    i0.ɵɵtemplate(4, DetallesCompraComponent_tr_35_td_4_Template, 2, 3, \"td\", 2);\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\", 30);\n    i0.ɵɵlistener(\"click\", function DetallesCompraComponent_tr_35_Template_td_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r18);\n      const i_r12 = restoredCtx.index;\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.showModal(ctx_r17.products[i_r12], i_r12));\n    });\n    i0.ɵɵelement(14, \"i\", 31);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const buy_product_r11 = ctx.$implicit;\n    const i_r12 = ctx.index;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r12 + 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.products[i_r12] != undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.products[i_r12] != undefined);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", buy_product_r11.quantity_products, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(9, 6, buy_product_r11.buy_price, ctx_r4.buy.coin + \" \"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(12, 9, buy_product_r11.quantity_products * buy_product_r11.buy_price, ctx_r4.buy.coin + \" \"));\n  }\n}\nfunction DetallesCompraComponent_tr_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelement(1, \"td\")(2, \"td\")(3, \"td\")(4, \"td\");\n    i0.ɵɵelementStart(5, \"td\")(6, \"strong\");\n    i0.ɵɵtext(7, \"Total\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"td\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(10, 1, ctx_r5.calcularTotal(), ctx_r5.buy.coin + \" \"));\n  }\n}\nfunction DetallesCompraComponent_tr_64_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const repayment_r19 = ctx.$implicit;\n    const i_r20 = ctx.index;\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r20 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 6, repayment_r19.date, \"dd/MM/yyyy\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r7.product(repayment_r19));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(repayment_r19.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(12, 9, repayment_r19.price, repayment_r19.coin + \" \"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(15, 12, repayment_r19.total, repayment_r19.coin + \" \"));\n  }\n}\nfunction DetallesCompraComponent_button_94_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function DetallesCompraComponent_button_94_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.cancel(ctx_r21.popUp));\n    });\n    i0.ɵɵtext(1, \" \\u00A0\\u00A0CANCELAR\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c2 = function (a0, a1) {\n  return {\n    \"input-on-focus-success\": a0,\n    \"input-on-focus-fail\": a1\n  };\n};\nconst _c3 = function (a0, a1) {\n  return {\n    \"label-on-focus-down\": a0,\n    \"label-on-focus-up\": a1\n  };\n};\nconst _c4 = function (a0) {\n  return {\n    \"enable aceptar\": a0\n  };\n};\nexport class DetallesCompraComponent extends DinamicInput {\n  constructor(routes, comunicatorSvc, renderer, route, comprasSvc, proveedoresSvc, usuariosSvc, productosSvc, fb, location, devolucionesSvc) {\n    super();\n    this.routes = routes;\n    this.comunicatorSvc = comunicatorSvc;\n    this.renderer = renderer;\n    this.route = route;\n    this.comprasSvc = comprasSvc;\n    this.proveedoresSvc = proveedoresSvc;\n    this.usuariosSvc = usuariosSvc;\n    this.productosSvc = productosSvc;\n    this.fb = fb;\n    this.location = location;\n    this.devolucionesSvc = devolucionesSvc;\n    this.title = [];\n    this.buy_products = [];\n    this.repayments = [];\n    this.products = [];\n  }\n  ngOnInit() {\n    setTimeout(() => {\n      /* Obtengo la ruta actual y la transformo para obtener el titulo del componente*/\n      this.ruta = this.routes.url.slice(this.routes.url.slice(1).indexOf('/') + 2, this.routes.url.lastIndexOf('?'));\n      this.title.push(decodeURI(this.ruta).toUpperCase()); //añado el titulo al array\n      this.title.push(\"fas fa-shopping-bag fa-fw\"); //aañado el icono del titulo al array\n      this.comunicatorSvc.setTitleComponent(this.title);\n    });\n    this.route.queryParams.subscribe(params => {\n      this.comprasSvc.getBuy(params['id_buy']).subscribe(res => {\n        if (res instanceof Array) {\n          this.buy = res[0];\n          this.proveedoresSvc.getProvider(this.buy.id_provider).subscribe(res => {\n            if (res instanceof Array) {\n              this.provider = res[0];\n            }\n          });\n          this.usuariosSvc.getUser(this.buy.id_user).subscribe(res => {\n            if (res instanceof Array) {\n              this.user = res[0];\n            }\n          });\n          this.comprasSvc.getProductsBuy(params['id_buy']).subscribe(res => {\n            console.log(res);\n            if (res instanceof Array) {\n              this.buy_products = res;\n              this.buy_products.forEach(buy_product => {\n                this.productosSvc.getProducto(buy_product.id_product).subscribe(res => {\n                  if (res instanceof Array) {\n                    this.products.push(res[0]);\n                  }\n                });\n              });\n            }\n          });\n          this.devolucionesSvc.getRepaymentsBuy(params['id_buy']).subscribe(res => {\n            if (res instanceof Array) this.repayments = res;\n          });\n        }\n      });\n    });\n    this.formDevolucion = this.fb.group({\n      quantity_back: new FormControl('')\n    });\n  }\n  showModal(product, index) {\n    this.indexElementToBack = index;\n    this.renderer.setProperty(this.quantityBack?.nativeElement.children[0].children[0], 'textContent', 'Realizar Devolución (' + product.name + ' ' + product.mark + ' ' + product.model + ')');\n    this.quantityBack?.nativeElement.showModal();\n  }\n  calcularPromedio(price) {\n    return (this.products[this.indexElementToBack].sell_price * this.products[this.indexElementToBack].exist_quantity - this.buy_products[this.indexElementToBack].sell_price * Number(this.formDevolucion.get('quantity_back')?.value)) / (this.products[this.indexElementToBack].exist_quantity - Number(this.formDevolucion.get('quantity_back')?.value));\n  }\n  registrarDevolucion() {\n    let content = '';\n    if (Number(this.formDevolucion.get('quantity_back')?.value) > this.buy_products[this.indexElementToBack].quantity_products - this.buy_products[this.indexElementToBack].quantity_back) {\n      content = 'La cantidad a devolver es mayor a la registrada en la compra';\n    } else if (this.products[this.indexElementToBack].exist_quantity - Number(this.formDevolucion.get('quantity_back')?.value) < 0) {\n      content = 'No existe esa cantidad en el almacen, los productos ya han sido vendidos';\n    } else {\n      let repayment = {\n        type: 'compra',\n        date: new Date(),\n        id_buy: this.buy_products[this.indexElementToBack].id_buy,\n        quantity: Number(this.formDevolucion.get('quantity_back')?.value),\n        price: this.buy_products[this.indexElementToBack].buy_price,\n        total: Number(this.formDevolucion.get('quantity_back')?.value) * this.buy_products[this.indexElementToBack].buy_price,\n        coin: this.buy.coin,\n        exchange: this.buy.exchange,\n        exist_quantity: this.products[this.indexElementToBack].exist_quantity - Number(this.formDevolucion.get('quantity_back')?.value),\n        weighted_averages_sell: Number(((this.products[this.indexElementToBack].sell_price * this.products[this.indexElementToBack].exist_quantity - this.comunicatorSvc.converterToMainCoin(this.buy_products[this.indexElementToBack].sell_price, this.buy.exchange) * Number(this.formDevolucion.get('quantity_back')?.value)) / (this.products[this.indexElementToBack].exist_quantity - Number(this.formDevolucion.get('quantity_back')?.value))).toFixed(2)),\n        weighted_averages_buy: Number(((this.products[this.indexElementToBack].buy_price * this.products[this.indexElementToBack].exist_quantity - this.comunicatorSvc.converterToMainCoin(this.buy_products[this.indexElementToBack].buy_price, this.buy.exchange) * Number(this.formDevolucion.get('quantity_back')?.value)) / (this.products[this.indexElementToBack].exist_quantity - Number(this.formDevolucion.get('quantity_back')?.value))).toFixed(2)),\n        id_user: this.buy.id_user,\n        id_product: this.buy_products[this.indexElementToBack].id_product\n      };\n      repayment.weighted_averages_buy = isNaN(repayment.weighted_averages_buy) ? 0 : repayment.weighted_averages_buy;\n      repayment.weighted_averages_buy = this.comunicatorSvc.converterToSecondaryCoin(repayment.weighted_averages_buy, this.buy.exchange);\n      repayment.weighted_averages_sell = isNaN(repayment.weighted_averages_sell) ? 0 : repayment.weighted_averages_sell;\n      repayment.weighted_averages_sell = this.comunicatorSvc.converterToSecondaryCoin(repayment.weighted_averages_sell, this.buy.exchange);\n      this.devolucionesSvc.setRepaymentBuy(repayment).subscribe(res => {\n        if (res.title.includes('Registrada')) {\n          this.repayments.push(repayment);\n        }\n        console.log(res);\n        this.changeModal(res);\n        this.popUp?.nativeElement.showModal();\n      });\n    }\n    if (content !== '') {\n      let values = {\n        icon: 'fa-regular fa-circle-xmark',\n        title: 'Ocurrió un error inesperado',\n        content: content\n      };\n      this.changeModal(values);\n      this.popUp?.nativeElement.showModal();\n    }\n  }\n  calcularTotal() {\n    this.quantityBack?.nativeElement;\n    let total = 0;\n    this.buy_products.forEach(buy_product => {\n      total += buy_product.buy_price * buy_product.quantity_products;\n    });\n    return total;\n  }\n  redirectToComprasRealizadas() {\n    this.location.back();\n  }\n  product(repayment) {\n    let name_product = '';\n    this.products.forEach(product => {\n      if (product.id_product === repayment.id_product) {\n        name_product = product.name + ' ' + product.mark + ' ' + product.model;\n      }\n    });\n    return name_product;\n  }\n  acept() {\n    if (this.popUp?.nativeElement.children[1].textContent === 'Ocurrió un error inesperado') {\n      this.cancel(this.popUp);\n    } else {\n      this.cancel(this.popUp);\n      this.cancel(this.quantityBack);\n    }\n  }\n}\nDetallesCompraComponent.ɵfac = function DetallesCompraComponent_Factory(t) {\n  return new (t || DetallesCompraComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ComunicatorComponetsService), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i3.ComprasService), i0.ɵɵdirectiveInject(i4.ProveedoresService), i0.ɵɵdirectiveInject(i5.UsuariosService), i0.ɵɵdirectiveInject(i6.ProductosService), i0.ɵɵdirectiveInject(i7.FormBuilder), i0.ɵɵdirectiveInject(i8.Location), i0.ɵɵdirectiveInject(i9.DevolucionesService));\n};\nDetallesCompraComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DetallesCompraComponent,\n  selectors: [[\"app-detalles-compra\"]],\n  viewQuery: function DetallesCompraComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n      i0.ɵɵviewQuery(_c1, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.quantityBack = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.popUp = _t.first);\n    }\n  },\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 95,\n  vars: 21,\n  consts: [[1, \"form-container\"], [1, \"datos\"], [4, \"ngIf\"], [1, \"form-button\", \"btn-save\", 3, \"click\"], [1, \"fas\", \"fa-reply\"], [1, \"table-container\"], [1, \"table-title\"], [1, \"table-body\"], [1, \"table-responsive\"], [1, \"table\", \"table-bordered\"], [\"tab\", \"\"], [4, \"ngFor\", \"ngForOf\"], [1, \"quantity\"], [\"quantity\", \"\"], [1, \"header\"], [1, \"title\"], [1, \"btn-cerrar-dialog\", 3, \"click\"], [1, \"form\", 3, \"formGroup\"], [1, \"form-control\", 3, \"ngClass\"], [1, \"form-label\", 3, \"ngClass\", \"ngStyle\"], [\"formControlName\", \"quantity_back\", 1, \"form-input\", 3, \"ngStyle\", \"focus\", \"focusout\", \"keypress\"], [1, \"form-actions\"], [1, \"form-button\", \"btn\", 3, \"ngClass\", \"click\"], [1, \"fas\", \"fa-truck-loading\", \"fa-fw\"], [1, \"form-button\", \"btn\", \"enable\", 2, \"color\", \"#f44336\", 3, \"click\"], [1, \"far\", \"fa-times-circle\"], [1, \"dialog\"], [\"popup\", \"\"], [1, \"fa-regular\", \"fa-circle-question\"], [\"class\", \"form-button btn-cancel\", 3, \"click\", 4, \"ngIf\"], [1, \"icon\", 3, \"click\"], [1, \"fas\", \"fa-truck-loading\", \"fa-fw\", 2, \"color\", \"#009688\"], [1, \"form-button\", \"btn-cancel\", 3, \"click\"]],\n  template: function DetallesCompraComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\");\n      i0.ɵɵtemplate(3, DetallesCompraComponent_p_3_Template, 5, 4, \"p\", 2);\n      i0.ɵɵtemplate(4, DetallesCompraComponent_p_4_Template, 4, 2, \"p\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\");\n      i0.ɵɵtemplate(6, DetallesCompraComponent_p_6_Template, 4, 2, \"p\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function DetallesCompraComponent_Template_button_click_7_listener() {\n        return ctx.redirectToComprasRealizadas();\n      });\n      i0.ɵɵelement(8, \"i\", 4);\n      i0.ɵɵtext(9, \" \\u00A0Regresar\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"div\", 5)(11, \"div\", 6)(12, \"h6\");\n      i0.ɵɵtext(13, \"productos comprados\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"div\", 7)(15, \"div\", 8)(16, \"table\", 9)(17, \"thead\")(18, \"tr\")(19, \"th\");\n      i0.ɵɵtext(20, \"N\\u00B0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"th\");\n      i0.ɵɵtext(22, \"C\\u00F3digo de barra\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"th\");\n      i0.ɵɵtext(24, \"Producto\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"th\");\n      i0.ɵɵtext(26, \"Cantidad\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"th\");\n      i0.ɵɵtext(28, \"Precio de compra\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"th\");\n      i0.ɵɵtext(30, \"Sub total\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"th\");\n      i0.ɵɵtext(32, \"Devoluci\\u00F3n\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(33, \"tbody\", null, 10);\n      i0.ɵɵtemplate(35, DetallesCompraComponent_tr_35_Template, 15, 12, \"tr\", 11);\n      i0.ɵɵtemplate(36, DetallesCompraComponent_tr_36_Template, 12, 4, \"tr\", 2);\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(37, \"div\", 5)(38, \"div\", 6)(39, \"h6\");\n      i0.ɵɵtext(40, \"Devoluciones realizadas\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(41, \"div\", 7)(42, \"div\", 8)(43, \"table\", 9)(44, \"thead\")(45, \"tr\")(46, \"th\");\n      i0.ɵɵtext(47, \"N\\u00B0\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(48, \"th\");\n      i0.ɵɵtext(49, \"Fecha\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(50, \"th\");\n      i0.ɵɵtext(51, \"Producto\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(52, \"th\");\n      i0.ɵɵtext(53, \"Cantidad\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(54, \"th\");\n      i0.ɵɵtext(55, \"Precio de compra\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(56, \"th\");\n      i0.ɵɵtext(57, \"Total\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(58, \"th\");\n      i0.ɵɵtext(59, \"Vendedor\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(60, \"th\");\n      i0.ɵɵtext(61, \"caja\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(62, \"tbody\", null, 10);\n      i0.ɵɵtemplate(64, DetallesCompraComponent_tr_64_Template, 16, 15, \"tr\", 11);\n      i0.ɵɵelementEnd()()()()()();\n      i0.ɵɵelementStart(65, \"dialog\", 12, 13)(67, \"div\", 14)(68, \"h2\", 15);\n      i0.ɵɵtext(69, \"Realizar devoluci\\u00F3n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(70, \"button\", 16);\n      i0.ɵɵlistener(\"click\", function DetallesCompraComponent_Template_button_click_70_listener() {\n        return ctx.cancel(ctx.quantityBack);\n      });\n      i0.ɵɵtext(71, \"x\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(72, \"div\", 17)(73, \"div\", 18)(74, \"label\", 19);\n      i0.ɵɵtext(75, \" Cantidad a devolver \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(76, \"input\", 20);\n      i0.ɵɵlistener(\"focus\", function DetallesCompraComponent_Template_input_focus_76_listener() {\n        return ctx.isFocused(7, ctx.formDevolucion, \"quantity_back\");\n      })(\"focusout\", function DetallesCompraComponent_Template_input_focusout_76_listener() {\n        return ctx.isFocused(7, ctx.formDevolucion, \"quantity_back\");\n      })(\"keypress\", function DetallesCompraComponent_Template_input_keypress_76_listener($event) {\n        return ctx.validate($event, false);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(77, \"div\", 21)(78, \"button\", 22);\n      i0.ɵɵlistener(\"click\", function DetallesCompraComponent_Template_button_click_78_listener() {\n        return ctx.registrarDevolucion();\n      });\n      i0.ɵɵelement(79, \"i\", 23);\n      i0.ɵɵtext(80, \" \\u00A0\\u00A0REALIZAR DEVOLUCI\\u00D3N\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(81, \"button\", 24);\n      i0.ɵɵlistener(\"click\", function DetallesCompraComponent_Template_button_click_81_listener() {\n        return ctx.cancel(ctx.quantityBack);\n      });\n      i0.ɵɵelement(82, \"i\", 25);\n      i0.ɵɵtext(83, \" \\u00A0\\u00A0CANCELAR\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(84, \"dialog\", 26, 27);\n      i0.ɵɵelement(86, \"i\", 28);\n      i0.ɵɵelementStart(87, \"h3\");\n      i0.ɵɵtext(88, \"\\u00BFEstas seguro?\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(89, \"p\");\n      i0.ɵɵtext(90, \"Lois datos seran guardados en el sistema\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(91, \"div\")(92, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function DetallesCompraComponent_Template_button_click_92_listener() {\n        return ctx.acept();\n      });\n      i0.ɵɵtext(93, \" \\u00A0\\u00A0ACEPTAR\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(94, DetallesCompraComponent_button_94_Template, 2, 0, \"button\", 29);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      let tmp_11_0;\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.buy != undefined);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.user != undefined);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.provider != undefined);\n      i0.ɵɵadvance(29);\n      i0.ɵɵproperty(\"ngForOf\", ctx.buy_products);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.buy_products.length > 0);\n      i0.ɵɵadvance(28);\n      i0.ɵɵproperty(\"ngForOf\", ctx.repayments);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"formGroup\", ctx.formDevolucion);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(13, _c2, ctx.verifyStyleInput(ctx.formDevolucion, \"quantity_back\") && ctx.elementHasFocus[7], !ctx.verifyStyleInput(ctx.formDevolucion, \"quantity_back\")));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(16, _c3, ctx.elementHasFocus[7] && ctx.positionLabel[7], ctx.elementHasFocus[7] && !ctx.positionLabel[7]))(\"ngStyle\", ctx.animationLabel(ctx.formDevolucion, \"quantity_back\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngStyle\", ctx.styleForeground(ctx.formDevolucion, \"quantity_back\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(19, _c4, ((tmp_11_0 = ctx.formDevolucion.get(\"quantity_back\")) == null ? null : tmp_11_0.value.length) > 0));\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"ngIf\", (ctx.popUp == null ? null : ctx.popUp.nativeElement.children[1].textContent) === \"\\u00BFEst\\u00E1s seguro?\");\n    }\n  },\n  dependencies: [i8.NgClass, i8.NgForOf, i8.NgIf, i8.NgStyle, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.FormGroupDirective, i7.FormControlName, i8.CurrencyPipe, i8.DatePipe],\n  styles: [\".datos[_ngcontent-%COMP%]{\\n    width: 100%;\\n    display: flex;\\n    justify-content: space-between;\\n    flex-grow: 0;\\n}\\n.datos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{\\n    width: 50%;\\n}\\n.datos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{\\n    width: 100%;\\n    display: flex;\\n    justify-content: space-between;\\n    flex-wrap: wrap;\\n}\\n.datos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{\\n   height:15px;\\n   width:100px;\\n}\\n.quantity[_ngcontent-%COMP%]{\\n    width: 30%;\\n    border: none;\\n  }\\n  .quantity[_ngcontent-%COMP%]::-webkit-backdrop{\\n    background-color: rgba(0, 0, 0, .5);\\n  }\\n  .quantity[_ngcontent-%COMP%]::backdrop{\\n    background-color: rgba(0, 0, 0, .5);\\n  }\\n  .quantity[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{\\n      width: 95%;\\n  }\\n  .header[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: space-between;\\n  }\\n  \\n  .form-actions[_ngcontent-%COMP%]{\\n    justify-content: right;\\n  }\\n  .btn[_ngcontent-%COMP%] {\\n    all: unset;\\n    min-width: 70px;\\n    padding: .8rem 1rem;\\n    margin: 0rem 0rem;\\n    margin-top: 1rem;\\n    border-radius: .3rem;\\n    font-size: .8125rem;\\n    text-align: center;\\n    cursor: not-allowed;\\n    outline: 0;\\n    font-size: 1rem;\\n    color: #676d74;\\n  }\\n  .btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{\\n    margin-top:0px;\\n  }\\n  .aceptar[_ngcontent-%COMP%]{\\n    color:#03a9f4\\n  }\\n  .enable[_ngcontent-%COMP%] {\\n    cursor: pointer;\\n  }\\n  .enable[_ngcontent-%COMP%]:hover {\\n    background-color: #EBEBEB;\\n  }\\n  .btn-cerrar-dialog[_ngcontent-%COMP%] {\\n    all: unset;\\n    padding: .1rem 1rem;\\n    border-radius: .1rem;\\n    background-color: transparent;\\n    font-size: 1.5rem;\\n    font-weight: 800;\\n    text-shadow: 0 1px 0 #fff;\\n    opacity: .5;\\n    cursor: pointer;\\n    color: black;\\n    -webkit-appearance: none;\\n            appearance: none;\\n  }\\n  .btn-cerrar-dialog[_ngcontent-%COMP%]:hover{\\n    opacity: 1;\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29udGVudC9jb21wcmFzL2RldGFsbGVzLWNvbXByYS9kZXRhbGxlcy1jb21wcmEuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLFdBQVc7SUFDWCxhQUFhO0lBQ2IsOEJBQThCO0lBQzlCLFlBQVk7QUFDaEI7QUFDQTtJQUNJLFVBQVU7QUFDZDtBQUNBO0lBQ0ksV0FBVztJQUNYLGFBQWE7SUFDYiw4QkFBOEI7SUFDOUIsZUFBZTtBQUNuQjtBQUNBO0dBQ0csV0FBVztHQUNYLFdBQVc7QUFDZDtBQUNBO0lBQ0ksVUFBVTtJQUNWLFlBQVk7RUFDZDtFQUNBO0lBQ0UsbUNBQW1DO0VBQ3JDO0VBRkE7SUFDRSxtQ0FBbUM7RUFDckM7RUFDQTtNQUNJLFVBQVU7RUFDZDtFQUNBO0lBQ0UsYUFBYTtJQUNiLDhCQUE4QjtFQUNoQzs7RUFFQTtJQUNFLHNCQUFzQjtFQUN4QjtFQUNBO0lBQ0UsVUFBVTtJQUNWLGVBQWU7SUFDZixtQkFBbUI7SUFDbkIsaUJBQWlCO0lBQ2pCLGdCQUFnQjtJQUNoQixvQkFBb0I7SUFDcEIsbUJBQW1CO0lBQ25CLGtCQUFrQjtJQUNsQixtQkFBbUI7SUFDbkIsVUFBVTtJQUNWLGVBQWU7SUFDZixjQUFjO0VBQ2hCO0VBQ0E7SUFDRSxjQUFjO0VBQ2hCO0VBQ0E7SUFDRTtFQUNGO0VBQ0E7SUFDRSxlQUFlO0VBQ2pCO0VBQ0E7SUFDRSx5QkFBeUI7RUFDM0I7RUFDQTtJQUNFLFVBQVU7SUFDVixtQkFBbUI7SUFDbkIsb0JBQW9CO0lBQ3BCLDZCQUE2QjtJQUM3QixpQkFBaUI7SUFDakIsZ0JBQWdCO0lBQ2hCLHlCQUF5QjtJQUN6QixXQUFXO0lBQ1gsZUFBZTtJQUNmLFlBQVk7SUFDWix3QkFBZ0I7WUFBaEIsZ0JBQWdCO0VBQ2xCO0VBQ0E7SUFDRSxVQUFVO0VBQ1oiLCJzb3VyY2VzQ29udGVudCI6WyIuZGF0b3N7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgZmxleC1ncm93OiAwO1xufVxuLmRhdG9zIGRpdntcbiAgICB3aWR0aDogNTAlO1xufVxuLmRhdG9zIGRpdiBkaXZ7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgZmxleC13cmFwOiB3cmFwO1xufVxuLmRhdG9zIGJ1dHRvbntcbiAgIGhlaWdodDoxNXB4O1xuICAgd2lkdGg6MTAwcHg7XG59XG4ucXVhbnRpdHl7XG4gICAgd2lkdGg6IDMwJTtcbiAgICBib3JkZXI6IG5vbmU7XG4gIH1cbiAgLnF1YW50aXR5OjpiYWNrZHJvcHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIC41KTtcbiAgfVxuICAucXVhbnRpdHkgLmZvcm0gLmZvcm0tY29udHJvbHtcbiAgICAgIHdpZHRoOiA5NSU7XG4gIH1cbiAgLmhlYWRlciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIH1cbiAgXG4gIC5mb3JtLWFjdGlvbnN7XG4gICAganVzdGlmeS1jb250ZW50OiByaWdodDtcbiAgfVxuICAuYnRuIHtcbiAgICBhbGw6IHVuc2V0O1xuICAgIG1pbi13aWR0aDogNzBweDtcbiAgICBwYWRkaW5nOiAuOHJlbSAxcmVtO1xuICAgIG1hcmdpbjogMHJlbSAwcmVtO1xuICAgIG1hcmdpbi10b3A6IDFyZW07XG4gICAgYm9yZGVyLXJhZGl1czogLjNyZW07XG4gICAgZm9udC1zaXplOiAuODEyNXJlbTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgY3Vyc29yOiBub3QtYWxsb3dlZDtcbiAgICBvdXRsaW5lOiAwO1xuICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICBjb2xvcjogIzY3NmQ3NDtcbiAgfVxuICAuYnRuLXNhdmUsLmJ0bi1jYW5jZWx7XG4gICAgbWFyZ2luLXRvcDowcHg7XG4gIH1cbiAgLmFjZXB0YXJ7XG4gICAgY29sb3I6IzAzYTlmNFxuICB9XG4gIC5lbmFibGUge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgfVxuICAuZW5hYmxlOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRUJFQkVCO1xuICB9XG4gIC5idG4tY2VycmFyLWRpYWxvZyB7XG4gICAgYWxsOiB1bnNldDtcbiAgICBwYWRkaW5nOiAuMXJlbSAxcmVtO1xuICAgIGJvcmRlci1yYWRpdXM6IC4xcmVtO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgIGZvbnQtc2l6ZTogMS41cmVtO1xuICAgIGZvbnQtd2VpZ2h0OiA4MDA7XG4gICAgdGV4dC1zaGFkb3c6IDAgMXB4IDAgI2ZmZjtcbiAgICBvcGFjaXR5OiAuNTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgY29sb3I6IGJsYWNrO1xuICAgIGFwcGVhcmFuY2U6IG5vbmU7XG4gIH1cbiAgLmJ0bi1jZXJyYXItZGlhbG9nOmhvdmVye1xuICAgIG9wYWNpdHk6IDE7XG4gIH1cbiAgIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","DinamicInput","i0","DetallesCompraComponent","constructor","routes","comunicatorSvc","renderer","route","comprasSvc","proveedoresSvc","usuariosSvc","productosSvc","fb","location","devolucionesSvc","ngOnInit","setTimeout","ruta","url","slice","indexOf","lastIndexOf","title","push","decodeURI","toUpperCase","setTitleComponent","queryParams","subscribe","params","getBuy","res","Array","buy","getProvider","id_provider","provider","getUser","id_user","user","getProductsBuy","console","log","buy_products","forEach","buy_product","getProducto","id_product","products","getRepaymentsBuy","repayments","formDevolucion","group","quantity_back","showModal","product","index","indexElementToBack","setProperty","quantityBack","nativeElement","children","name","mark","model","calcularPromedio","price","sell_price","exist_quantity","Number","get","value","registrarDevolucion","content","quantity_products","repayment","type","date","Date","id_buy","quantity","buy_price","total","coin","exchange","weighted_averages_sell","converterToMainCoin","toFixed","weighted_averages_buy","isNaN","converterToSecondaryCoin","setRepaymentBuy","includes","changeModal","popUp","values","icon","calcularTotal","redirectToComprasRealizadas","back","name_product","acept","textContent","cancel","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["/home/luis/Documentos/systems vs code/inventary-system/client/src/app/content/compras/detalles-compra/detalles-compra.component.ts","/home/luis/Documentos/systems vs code/inventary-system/client/src/app/content/compras/detalles-compra/detalles-compra.component.html"],"sourcesContent":["import { Component, ElementRef, Renderer2, ViewChild } from '@angular/core';\nimport { ActivatedRoute, ParamMap, Router } from '@angular/router';\nimport { ComunicatorComponetsService } from 'src/app/services/comunicator/comunicator-componets.service';\nimport { ComprasService } from '../service/compras.service';\nimport { alert, buy, buy_product, product, provider, user, repayment } from 'src/app/interfaces/interfaces';\nimport { ProveedoresService } from '../../administracion/proveedores/service/proveedores.service';\nimport { UsuariosService } from '../../administracion/usuarios/service/usuarios.service';\nimport { ProductosService } from '../../productos/productos-en-almacen/service/productos.service';\nimport { FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { DinamicInput } from 'src/app/utils/DinamicInput';\nimport { Location } from '@angular/common';\nimport { DevolucionesService } from '../../devoluciones/service/devoluciones.service';\n\n@Component({\n  selector: 'app-detalles-compra',\n  templateUrl: './detalles-compra.component.html',\n  styleUrls: ['./detalles-compra.component.css']\n})\nexport class DetallesCompraComponent extends DinamicInput {\n  ruta!: string\n  title: string[] = []\n  buy!: buy\n  provider!: provider\n  user!: user\n  buy_products: buy_product[] = []\n  repayments: repayment[] = []\n  products: product[] = []\n  indexElementToBack!: number\n  formDevolucion!: FormGroup\n  @ViewChild('quantity', { static: true }) quantityBack?: ElementRef;\n  @ViewChild('popup', { static: true }) override popUp?: ElementRef;\n\n  constructor(private routes: Router,\n    private comunicatorSvc: ComunicatorComponetsService,\n    public override renderer: Renderer2,\n    private route: ActivatedRoute,\n    private comprasSvc: ComprasService,\n    private proveedoresSvc: ProveedoresService,\n    private usuariosSvc: UsuariosService,\n    private productosSvc: ProductosService,\n    private fb: FormBuilder,\n    private location: Location,\n    private devolucionesSvc: DevolucionesService) {\n    super()\n  }\n\n  ngOnInit() {\n    setTimeout(() => {\n      /* Obtengo la ruta actual y la transformo para obtener el titulo del componente*/\n      this.ruta = this.routes.url.slice((this.routes.url.slice(1).indexOf('/')) + 2, this.routes.url.lastIndexOf('?'));\n      this.title.push(decodeURI(this.ruta).toUpperCase());//añado el titulo al array\n      this.title.push(\"fas fa-shopping-bag fa-fw\");//aañado el icono del titulo al array\n      this.comunicatorSvc.setTitleComponent(this.title);\n    });\n    this.route.queryParams.subscribe((params) => {\n      this.comprasSvc.getBuy(params['id_buy']).subscribe(res => {\n        if (res instanceof Array) {\n          this.buy = res[0]\n          this.proveedoresSvc.getProvider(this.buy.id_provider).subscribe(res => {\n            if (res instanceof Array) {\n              this.provider = res[0]\n            }\n          })\n          this.usuariosSvc.getUser(this.buy.id_user).subscribe(res => {\n            if (res instanceof Array) {\n              this.user = res[0]\n            }\n          })\n\n          this.comprasSvc.getProductsBuy(params['id_buy']).subscribe(res => {\n            console.log(res)\n            if (res instanceof Array) {\n\n              this.buy_products = res\n              this.buy_products.forEach((buy_product: buy_product) => {\n                this.productosSvc.getProducto(buy_product.id_product).subscribe(res => {\n                  if (res instanceof Array) {\n                    this.products.push(res[0])\n                  }\n                })\n\n              })\n            }\n          })\n          this.devolucionesSvc.getRepaymentsBuy(params['id_buy']).subscribe(\n            res => {\n              if (res instanceof Array)\n                this.repayments = res\n            })\n        }\n      })\n    })\n    this.formDevolucion = this.fb.group({\n      quantity_back: new FormControl('')\n    })\n  }\n  showModal(product: product, index: number) {\n    this.indexElementToBack = index\n    this.renderer.setProperty(this.quantityBack?.nativeElement.children[0].children[0],\n      'textContent', 'Realizar Devolución (' + product.name + ' ' + product.mark + ' ' + product.model + ')')\n    this.quantityBack?.nativeElement.showModal()\n  }\n  calcularPromedio(price: number) {\n    return ((this.products[this.indexElementToBack].sell_price *\n      this.products[this.indexElementToBack].exist_quantity) -\n      (this.buy_products[this.indexElementToBack].sell_price *\n        Number(this.formDevolucion.get('quantity_back')?.value))) /\n      (this.products[this.indexElementToBack].exist_quantity -\n        Number(this.formDevolucion.get('quantity_back')?.value))\n  }\n  registrarDevolucion() {\n    let content = ''\n    if (Number(this.formDevolucion.get('quantity_back')?.value) >\n      (this.buy_products[this.indexElementToBack].quantity_products -\n        this.buy_products[this.indexElementToBack].quantity_back)) {\n      content = 'La cantidad a devolver es mayor a la registrada en la compra'\n    } else if ((this.products[this.indexElementToBack].exist_quantity -\n      Number(this.formDevolucion.get('quantity_back')?.value)) < 0) {\n      content = 'No existe esa cantidad en el almacen, los productos ya han sido vendidos'\n    } else {\n      let repayment: repayment = {\n        type: 'compra',\n        date: new Date(),\n        id_buy: this.buy_products[this.indexElementToBack].id_buy,\n        quantity: Number(this.formDevolucion.get('quantity_back')?.value),\n        price: this.buy_products[this.indexElementToBack].buy_price,\n        total: Number(this.formDevolucion.get('quantity_back')?.value) *\n          this.buy_products[this.indexElementToBack].buy_price,\n        coin: this.buy.coin,\n        exchange:this.buy.exchange,\n        exist_quantity: this.products[this.indexElementToBack].exist_quantity - Number(this.formDevolucion.get('quantity_back')?.value),\n        weighted_averages_sell: Number((((this.products[this.indexElementToBack].sell_price *\n          this.products[this.indexElementToBack].exist_quantity) -\n          (this.comunicatorSvc.converterToMainCoin(this.buy_products[this.indexElementToBack].sell_price, this.buy.exchange) *\n            Number(this.formDevolucion.get('quantity_back')?.value))) /\n          (this.products[this.indexElementToBack].exist_quantity -\n            Number(this.formDevolucion.get('quantity_back')?.value))).toFixed(2)),\n        weighted_averages_buy:Number((((this.products[this.indexElementToBack].buy_price *\n          this.products[this.indexElementToBack].exist_quantity) -\n          (this.comunicatorSvc.converterToMainCoin(this.buy_products[this.indexElementToBack].buy_price, this.buy.exchange) *\n            Number(this.formDevolucion.get('quantity_back')?.value))) /\n          (this.products[this.indexElementToBack].exist_quantity -\n            Number(this.formDevolucion.get('quantity_back')?.value))).toFixed(2)),\n        id_user: this.buy.id_user,\n        id_product: this.buy_products[this.indexElementToBack].id_product,\n      }\n      repayment.weighted_averages_buy=(isNaN(repayment.weighted_averages_buy))?0:repayment.weighted_averages_buy\n      repayment.weighted_averages_buy = this.comunicatorSvc.converterToSecondaryCoin(repayment.weighted_averages_buy, this.buy.exchange)\n      repayment.weighted_averages_sell=(isNaN(repayment.weighted_averages_sell))?0:repayment.weighted_averages_sell\n      repayment.weighted_averages_sell = this.comunicatorSvc.converterToSecondaryCoin(repayment.weighted_averages_sell, this.buy.exchange)\n      this.devolucionesSvc.setRepaymentBuy(repayment).subscribe(res => {\n        if (res.title.includes('Registrada')) {\n          this.repayments.push(repayment)\n        }\n        console.log(res)\n        this.changeModal(res)\n        this.popUp?.nativeElement.showModal()\n      })\n    }\n    if (content !== '') {\n      let values: alert = {\n        icon: 'fa-regular fa-circle-xmark',\n        title: 'Ocurrió un error inesperado',\n        content: content\n      }\n      this.changeModal(values)\n      this.popUp?.nativeElement.showModal()\n    }\n  }\n\n  calcularTotal() {\n    this.quantityBack?.nativeElement\n    let total = 0;\n    this.buy_products.forEach((buy_product: buy_product) => {\n      total += buy_product.buy_price * buy_product.quantity_products\n    })\n    return total\n  }\n  redirectToComprasRealizadas() {\n    this.location.back()\n  }\n  product(repayment: repayment) {\n    let name_product = ''\n    this.products.forEach((product: product) => {\n      if (product.id_product === repayment.id_product) {\n        name_product = product.name + ' ' + product.mark + ' ' + product.model\n      }\n    })\n    return name_product\n  }\n  acept() {\n    if (this.popUp?.nativeElement.children[1].textContent === 'Ocurrió un error inesperado') {\n      this.cancel(this.popUp)\n    } else {\n      this.cancel(this.popUp)\n      this.cancel(this.quantityBack)\n    }\n  }\n}\n","<div class=\"form-container\">\n    <div class=\"datos\">\n        <div>\n            <p *ngIf=\"buy!=undefined\"> <strong>FECHA:</strong> {{buy.time|date:'dd/MM/yyyy'}}</p>\n            <p *ngIf=\"user!=undefined\"> <strong>COMPRA REGISTRADA POR:</strong> {{user.names_user}} \n                {{user.last_names_user}}</p>\n        </div>\n        <div>\n            <p *ngIf=\"provider!=undefined\"> <strong>PROVEEDOR:</strong> {{provider.name_provider}}\n                {{provider.address_provider}}</p>\n\n        </div>\n        <button (click)=\"redirectToComprasRealizadas()\"\n         class=\"form-button btn-save\"><i class=\"fas fa-reply\"></i> &nbsp;Regresar</button>\n    </div>\n    <div class=\"table-container\">\n        <div class=\"table-title\">\n            <h6>productos comprados</h6>\n        </div>\n        <div class=\"table-body\">\n            <div class=\"table-responsive\">\n                <table class=\"table table-bordered\">\n                    <thead>\n                        <tr>\n                            <th>N°</th>\n                            <th>Código de barra</th>\n                            <th>Producto</th>\n                            <th>Cantidad</th>\n                            <th>Precio de compra</th>\n                            <th>Sub total</th>\n                            <th>Devolución</th>\n                        </tr>\n                    </thead>\n\n                    <tbody #tab>\n                        <tr *ngFor=\"let buy_product of buy_products; let i=index\">\n                            <td>{{i+1}}</td>\n                            <td *ngIf=\"products[i]!=undefined\">{{products[i].barcode}}</td>\n                            <td *ngIf=\"products[i]!=undefined\">\n                                {{products[i].name}}&nbsp;{{products[i].mark}}&nbsp;{{products[i].model}}&nbsp;</td>\n                            <td>{{buy_product.quantity_products}} </td>\n                            <td>{{buy_product.buy_price|currency:buy.coin+' '}}</td>\n                            <td>{{buy_product.quantity_products*buy_product.buy_price|currency:buy.coin+' '}}</td>\n                            <td class=\"icon\" (click)=\"showModal(products[i],i)\">\n                                <i class=\"fas fa-truck-loading fa-fw\" style=\"color:#009688\"></i>\n                            </td>\n                        </tr>\n                     <tr *ngIf=\"buy_products.length>0\">\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td><strong>Total</strong></td>\n                        <td>{{calcularTotal()|currency:buy.coin+' '}}</td>\n                        <td></td>\n                    </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n    <div class=\"table-container\">\n        <div class=\"table-title\">\n            <h6>Devoluciones realizadas</h6>\n        </div>\n        <div class=\"table-body\">\n            <div class=\"table-responsive\">\n                <table class=\"table table-bordered\">\n                    <thead>\n                        <tr>\n                            <th>N°</th>\n                            <th>Fecha</th>\n                            <th>Producto</th>\n                            <th>Cantidad</th>\n                            <th>Precio de compra</th>\n                            <th>Total</th>\n                            <th>Vendedor</th>\n                            <th>caja</th>\n                        </tr>\n                    </thead>\n\n                    <tbody #tab>\n                       <tr *ngFor=\"let repayment of repayments; let i=index\">\n                        <td>{{i+1}}</td>\n                        <td>{{repayment.date|date:'dd/MM/yyyy'}}</td>\n                        <td>{{product(repayment)}}</td> \n                        <td>{{repayment.quantity}}</td>\n                        <td>{{repayment.price|currency:repayment.coin+' '}}</td>\n                        <td>{{repayment.total|currency:repayment.coin+' '}}</td>\n                    </tr>\n                        \n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n<dialog #quantity class=\"quantity\">\n    <div class=\"header\">\n        <h2 class=\"title\">Realizar devolución</h2>\n        <button class=\"btn-cerrar-dialog\" (click)=\"cancel(quantityBack)\">x</button>\n    </div>\n    <div class=\"form\" [formGroup]=\"formDevolucion\">\n        <div class=\"form-control\" [ngClass]=\"{'input-on-focus-success':verifyStyleInput(formDevolucion,'quantity_back')&&\n    elementHasFocus[7],'input-on-focus-fail':!verifyStyleInput(formDevolucion,'quantity_back')}\">\n            <label class=\"form-label\" [ngClass]=\"{'label-on-focus-down':\nelementHasFocus[7]&&positionLabel[7],\n'label-on-focus-up':\nelementHasFocus[7]&&!positionLabel[7]}\" [ngStyle]=\"animationLabel(formDevolucion,\n'quantity_back')\">\n                Cantidad a devolver\n            </label>\n            <input formControlName=\"quantity_back\"\n                (focus)=\"isFocused(7,formDevolucion,'quantity_back')\"\n                (focusout)=\"isFocused(7,formDevolucion,'quantity_back')\" class=\"form-input\"\n                [ngStyle]=\"styleForeground(formDevolucion,'quantity_back')\"\n                (keypress)=\"validate($event,false)\">\n        </div>\n    </div>\n    <div class=\"form-actions\">\n        <button class=\"form-button btn\"\n            [ngClass]=\"{'enable aceptar':formDevolucion.get('quantity_back')?.value.length>0}\"\n            (click)=\"registrarDevolucion()\">\n           <i class=\"fas fa-truck-loading fa-fw\"></i> &nbsp;&nbsp;REALIZAR DEVOLUCIÓN</button>\n        <button class=\"form-button btn enable\" (click)=\"cancel(quantityBack)\" style=\"color:#f44336\">\n            <i class=\"far fa-times-circle\"></i> &nbsp;&nbsp;CANCELAR</button>\n    </div>\n</dialog>\n<dialog class=\"dialog\" #popup>\n    <i class=\"fa-regular fa-circle-question\"></i>\n    <h3>¿Estas seguro?</h3>\n    <p>Lois datos seran guardados en el sistema</p>\n    <div>\n        <button class=\"form-button btn-save\" (click)=\"acept()\">\n            &nbsp;&nbsp;ACEPTAR</button>\n        <button *ngIf=\"this.popUp?.nativeElement.children[1].textContent === '¿Estás seguro?'\"\n            class=\"form-button btn-cancel\" (click)=\"cancel(popUp)\">\n            &nbsp;&nbsp;CANCELAR</button>\n    </div>\n</dialog>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}